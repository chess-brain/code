<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_colorblind" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    <script src='https://blog.meekdai.com/Gmeek/plugins/GmeekBSZ.js'></script><script src='https://blog.meekdai.com/Gmeek/plugins/GmeekVercount.js'></script>
    <link rel="icon" href="https://chess-brain.github.io/king.png"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="# è±¡æ£‹è„‘çš„æˆå°±ä¸æ’è¡Œæ¦œ
## è¯´æ˜ï¼š
è¿™æ˜¯ä¸€ä¸ªå¯ä»¥å®ç°æˆå°±ä¸æ’è¡Œæ¦œçš„æ‰©å±•
æˆ‘ä»¬çš„å£å·ï¼šå¹²å®Gandiçš„ç‰¹æœ‰åŠŸèƒ½ï¼ï¼ˆCCW: bushiï¼‰
## åŠ è½½æ–¹å¼ï¼š
### TurboWarp / 02Engine / Mistium / Penguin mod: ç›®å‰æ”¯æŒ
ã€æ‰©å±•ã€‘-> è‡ªå®šä¹‰æ‰©å±• -> æ–‡æœ¬ -> ç²˜è´´å†…å®¹
### Gandi IDE : æš‚ä¸æ”¯æŒ
## ä»£ç 
éœ€å¤åˆ¶å†…å®¹å¦‚ä¸‹ï¼š
```js
(function () {
	class Leaderboard {
		constructor(runtime) {
			this.runtime = runtime;
			this.storageKey = 'achieve_and_leaderboard';
			this._port = 'default';
			this._inMemoryStore = {};
 			this._cloudProvider = null;
 			this._cloudAutoSync = false;
			this._overlayElement = null;
			this._overlayMode = null;
			this._overlayContext = null;
			this._stylesInjected = false;
			this._lang = this._detectLang();
			const vers_num = '1.2.0';
			const build_type = 1;
			const build_version = '001';
			const version = vers_num + ['-alpha-', '-beta-', '-release-'][build_type] + build_version;
			this._translations = {
				'zh-cn': {
					extName: 'æˆå°±ä¸æ’è¡Œæ¦œ',
					label_version: 'V' + version,
					docLink: 'æŸ¥çœ‹æ–‡æ¡£',
					leaderboard: 'æ’è¡Œæ¦œ',
					createBoard: 'åˆ›å»ºæ’è¡Œæ¦œ [BOARD]',
					submitScore: 'æäº¤åˆ†æ•° åç§° [NAME] åˆ†æ•° [SCORE] åˆ° [BOARD]',
					getTop: 'è·å–å‰ [N] å ä» [BOARD]',
					getRank: 'æŸ¥è¯¢ åç§° [NAME] åœ¨ [BOARD] çš„åæ¬¡',
					getHighScore: 'æŸ¥è¯¢ åç§° [NAME] åœ¨ [BOARD] çš„æœ€é«˜åˆ†',
					resetBoard: 'é‡ç½®æ’è¡Œæ¦œ [BOARD]',
					getAllData: 'æ•´ä¸ªæ’è¡Œæ¦œæ•°æ®',
					toggleDisplay: '[TOGGLE] æ’è¡Œæ¦œ [BOARD]',
					achievements: 'æˆå°±ç³»ç»Ÿ',
					createAchievement: 'åˆ›å»ºæˆå°± ID [ID] åç§° [NAME] æ ‡ç­¾ [TAG]',
					awardAchievement: 'é¢å‘æˆå°± ID [ID] æ ‡ç­¾ [TAG] ç»™ ç”¨æˆ· [PLAYER] ï¼ˆå¯é€‰åç§° [NAME]ï¼‰ å¹¶ [DISPLAY] ç»™ç”¨æˆ·',
					isAchievementUnlocked: 'æˆå°± ID [ID] åœ¨ æ ‡ç­¾ [TAG] æ˜¯å¦è¢« ç”¨æˆ· [PLAYER] è§£é”',
					toggleAchievementsDisplay: '[TOGGLE] æˆå°± æ ‡ç­¾ [TAG] ç”¨æˆ· [PLAYER]',
					show: 'æ˜¾ç¤º',
					hide: 'éšè—',
					refresh: 'åˆ·æ–°',
					close: 'å…³é—­',
					nameHeader: 'åç§°',
					scoreHeader: 'åˆ†æ•°',
					noData: '(æ— æ•°æ®)',
					noAchievements: '(æ— æˆå°±)',
					moreRecords: '... è¿˜æœ‰ {n} æ¡è®°å½•',
					unlocked: 'å·²è§£é”',
					locked: 'æœªè§£é”',
					leaderboardTitle: 'æ’è¡Œæ¦œï¼š{board}',
					achievementsTitle: 'æˆå°±ï¼š{tag}ï¼ˆç”¨æˆ·ï¼š{player}ï¼‰'
				},
				'en': {
					extName: 'Achievements & Leaderboards',
					label_version: 'V' + version,
					docLink: 'View Docs',
					leaderboard: 'Leaderboard',
					createBoard: 'Create board [BOARD]',
					submitScore: 'Submit score NAME [NAME] SCORE [SCORE] to [BOARD]',
					getTop: 'Get top [N] from [BOARD]',
					getRank: 'Get rank of NAME [NAME] on [BOARD]',
					getHighScore: 'Get high score of NAME [NAME] on [BOARD]',
					resetBoard: 'Reset board [BOARD]',
					getAllData: 'All leaderboard data',
					toggleDisplay: '[TOGGLE] leaderboard [BOARD]',
					achievements: 'Achievements',
					createAchievement: 'Create achievement ID [ID] NAME [NAME] TAG [TAG]',
					awardAchievement: 'Award achievement ID [ID] TAG [TAG] to PLAYER [PLAYER] (opt NAME [NAME]) and [DISPLAY] to player',
					isAchievementUnlocked: 'Is achievement ID [ID] in TAG [TAG] unlocked by PLAYER [PLAYER]',
					toggleAchievementsDisplay: '[TOGGLE] achievements TAG [TAG] PLAYER [PLAYER]',
					show: 'Show',
					hide: 'Hide',
					refresh: 'Refresh',
					close: 'Close',
					nameHeader: 'Name',
					scoreHeader: 'Score',
					noData: '(no data)',
					noAchievements: '(no achievements)',
					moreRecords: '... {n} more records',
					unlocked: 'Unlocked',
					locked: 'Locked',
					leaderboardTitle: 'Leaderboard: {board}',
					achievementsTitle: 'Achievements: {tag} (Player: {player})'
				},
				'fr': {
					extName: 'SuccÃ¨s et Classements',
					label0: 'Classement & SuccÃ¨s',
					label_version: 'V' + version,
					docLink: 'Voir la doc',
					leaderboard: 'Classement',
					createBoard: 'CrÃ©er classement [BOARD]',
					submitScore: 'Soumettre score NOM [NAME] SCORE [SCORE] Ã  [BOARD]',
					getTop: 'Obtenir top [N] de [BOARD]',
					getRank: 'Rang de NOM [NAME] sur [BOARD]',
					getHighScore: 'Meilleur score de NOM [NAME] sur [BOARD]',
					resetBoard: 'RÃ©initialiser [BOARD]',
					getAllData: 'Toutes les donnÃ©es',
					toggleDisplay: '[TOGGLE] classement [BOARD]',
					achievements: 'SuccÃ¨s',
					createAchievement: 'CrÃ©er succÃ¨s ID [ID] NOM [NAME] TAG [TAG]',
					awardAchievement: 'Attribuer succÃ¨s ID [ID] TAG [TAG] Ã  JOUEUR [PLAYER] (opt NOM [NAME]) et [DISPLAY] au joueur',
					isAchievementUnlocked: 'SuccÃ¨s ID [ID] TAG [TAG] dÃ©bloquÃ© par JOUEUR [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] succÃ¨s TAG [TAG] JOUEUR [PLAYER]',
					show: 'Afficher',
					hide: 'Masquer',
					refresh: 'RafraÃ®chir',
					close: 'Fermer',
					nameHeader: 'Nom',
					scoreHeader: 'Score',
					noData: '(aucune donnÃ©e)',
					noAchievements: '(aucun succÃ¨s)',
					moreRecords: '... {n} autres enregistrements',
					unlocked: 'DÃ©bloquÃ©',
					locked: 'VerrouillÃ©',
					leaderboardTitle: 'Classement : {board}',
					achievementsTitle: 'SuccÃ¨s : {tag} (Joueur : {player})'
				},
				'es': {
					extName: 'Logros y ClasificaciÃ³n',
					label_version: 'V' + version,
					docLink: 'Ver documentaciÃ³n',
					leaderboard: 'ClasificaciÃ³n',
					createBoard: 'Crear clasificaciÃ³n [BOARD]',
					submitScore: 'Enviar puntuaciÃ³n NOMBRE [NAME] PUNT [SCORE] a [BOARD]',
					getTop: 'Obtener top [N] de [BOARD]',
					getRank: 'Rango de NOMBRE [NAME] en [BOARD]',
					getHighScore: 'Mejor puntuaciÃ³n de NOMBRE [NAME] en [BOARD]',
					resetBoard: 'Reiniciar [BOARD]',
					getAllData: 'Todos los datos',
					toggleDisplay: '[TOGGLE] clasificaciÃ³n [BOARD]',
					achievements: 'Logros',
					createAchievement: 'Crear logro ID [ID] NOMBRE [NAME] TAG [TAG]',
					awardAchievement: 'Otorgar logro ID [ID] TAG [TAG] a JUGADOR [PLAYER] (opt NOMBRE [NAME]) y [DISPLAY] al jugador',
					isAchievementUnlocked: 'Â¿Logro ID [ID] TAG [TAG] desbloqueado por JUGADOR [PLAYER]?',
					toggleAchievementsDisplay: '[TOGGLE] logros TAG [TAG] JUGADOR [PLAYER]',
					show: 'Mostrar',
					hide: 'Ocultar',
					refresh: 'Actualizar',
					close: 'Cerrar',
					nameHeader: 'Nombre',
					scoreHeader: 'Puntos',
					noData: '(sin datos)',
					noAchievements: '(sin logros)',
					moreRecords: '... {n} registros mÃ¡s',
					unlocked: 'Desbloqueado',
					locked: 'Bloqueado',
					leaderboardTitle: 'ClasificaciÃ³n: {board}',
					achievementsTitle: 'Logros: {tag} (Usuario: {player})'
				},
				'ru': {
					extName: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²',
					label_version: 'V' + version,
					docLink: 'ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ',
					leaderboard: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²',
					createBoard: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ [BOARD]',
					submitScore: 'ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ñ‡ĞºĞ¸ Ğ˜ĞœĞ¯ [NAME] ĞĞ§ĞšĞ˜ [SCORE] Ğ² [BOARD]',
					getTop: 'ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ¿ [N] Ğ¸Ğ· [BOARD]',
					getRank: 'Ğ Ğ°Ğ½Ğ³ Ğ˜ĞœĞ¯ [NAME] Ğ² [BOARD]',
					getHighScore: 'Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ ÑÑ‡ĞµÑ‚ Ğ˜ĞœĞ¯ [NAME] Ğ² [BOARD]',
					resetBoard: 'Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ [BOARD]',
					getAllData: 'Ğ’ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ',
					toggleDisplay: '[TOGGLE] Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° [BOARD]',
					achievements: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ',
					createAchievement: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] Ğ˜ĞœĞ¯ [NAME] TAG [TAG]',
					awardAchievement: 'Ğ’Ñ€ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] TAG [TAG] Ğ¸Ğ³Ñ€Ğ¾ĞºÑƒ [PLAYER] (Ğ¸Ğ¼Ñ [NAME]) Ğ¸ [DISPLAY]',
					isAchievementUnlocked: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] Ğ² TAG [TAG] Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ¼ [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ TAG [TAG] Ğ˜Ğ“Ğ ĞĞš [PLAYER]',
					show: 'ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ',
					hide: 'Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ',
					refresh: 'ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ',
					close: 'Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ',
					nameHeader: 'Ğ˜Ğ¼Ñ',
					scoreHeader: 'ĞÑ‡ĞºĞ¸',
					noData: '(Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)',
					noAchievements: '(Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹)',
					moreRecords: '... ĞµÑ‰Ñ‘ {n} Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹',
					unlocked: 'Ğ Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾',
					locked: 'Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾',
					leaderboardTitle: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: {board}',
					achievementsTitle: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ: {tag} (Ğ˜Ğ³Ñ€Ğ¾Ğº: {player})'
				},
				'ar': {
					extName: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ÙˆÙ„ÙˆØ§Ø¦Ø­ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
					label_version: 'V' + version,
					docLink: 'Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚',
					leaderboard: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
					createBoard: 'Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© [BOARD]',
					submitScore: 'Ø¥Ø±Ø³Ø§Ù„ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§Ø³Ù… [NAME] Ø§Ù„Ù†Ù‚Ø§Ø· [SCORE] Ø¥Ù„Ù‰ [BOARD]',
					getTop: 'Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ù‰ [N] Ù…Ù† [BOARD]',
					getRank: 'ØªØ±ØªÙŠØ¨ Ø§Ù„Ø§Ø³Ù… [NAME] ÙÙŠ [BOARD]',
					getHighScore: 'Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø§Ø³Ù… [NAME] ÙÙŠ [BOARD]',
					resetBoard: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† [BOARD]',
					getAllData: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
					toggleDisplay: '[TOGGLE] Ù‚Ø§Ø¦Ù…Ø© [BOARD]',
					achievements: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª',
					createAchievement: 'Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ù†Ø¬Ø§Ø² ID [ID] Ø§Ù„Ø§Ø³Ù… [NAME] Ø§Ù„ÙˆØ³Ù… [TAG]',
					awardAchievement: 'Ù…Ù†Ø­ Ø¥Ù†Ø¬Ø§Ø² ID [ID] Ø§Ù„ÙˆØ³Ù… [TAG] Ù„Ù„Ø§Ø¹Ø¨ [PLAYER] (Ø§Ù„Ø§Ø³Ù… [NAME]) Ùˆ[DISPLAY]',
					isAchievementUnlocked: 'Ù‡Ù„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ID [ID] ÙÙŠ Ø§Ù„ÙˆØ³Ù… [TAG] ØªÙ… ÙØªØ­Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© [PLAYER]ØŸ',
					toggleAchievementsDisplay: '[TOGGLE] Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„ÙˆØ³Ù… [TAG] Ø§Ù„Ù„Ø§Ø¹Ø¨ [PLAYER]',
					show: 'Ø¹Ø±Ø¶',
					hide: 'Ø¥Ø®ÙØ§Ø¡',
					refresh: 'ØªØ­Ø¯ÙŠØ«',
					close: 'Ø¥ØºÙ„Ø§Ù‚',
					nameHeader: 'Ø§Ù„Ø§Ø³Ù…',
					scoreHeader: 'Ø§Ù„Ù†Ù‚Ø§Ø·',
					noData: '(Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª)',
					noAchievements: '(Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ù†Ø¬Ø§Ø²Ø§Øª)',
					moreRecords: '... {n} Ø³Ø¬Ù„Ø§Øª Ø£Ø®Ø±Ù‰',
					unlocked: 'ØªÙ… Ø§Ù„ÙØªØ­',
					locked: 'Ù…Ù‚ÙÙ„',
					leaderboardTitle: 'Ù‚Ø§Ø¦Ù…Ø©: {board}',
					achievementsTitle: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª: {tag} (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {player})'
				},
				'ja': {
					extName: 'å®Ÿç¸¾ã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°',
					label_version: 'V' + version,
					docLink: 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹',
					leaderboard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°',
					createBoard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä½œæˆ [BOARD]',
					submitScore: 'ã‚¹ã‚³ã‚¢ã‚’é€ä¿¡ åå‰ [NAME] ã‚¹ã‚³ã‚¢ [SCORE] ã¸ [BOARD]',
					getTop: '[BOARD] ã®ä¸Šä½ [N] ã‚’å–å¾—',
					getRank: '[BOARD] ã® åå‰ [NAME] ã®é †ä½',
					getHighScore: '[BOARD] ã® åå‰ [NAME] ã®æœ€é«˜ã‚¹ã‚³ã‚¢',
					resetBoard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ [BOARD]',
					getAllData: 'ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿',
					toggleDisplay: '[TOGGLE] ãƒ©ãƒ³ã‚­ãƒ³ã‚° [BOARD]',
					achievements: 'å®Ÿç¸¾',
					createAchievement: 'å®Ÿç¸¾ä½œæˆ ID [ID] åå‰ [NAME] ã‚¿ã‚° [TAG]',
					awardAchievement: 'å®Ÿç¸¾ ID [ID] ã‚¿ã‚° [TAG] ã‚’ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER] ã«ä»˜ä¸ (åå‰ [NAME]) ã¨[DISPLAY]',
					isAchievementUnlocked: 'å®Ÿç¸¾ ID [ID] ã‚¿ã‚° [TAG] ãŒ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER] ã«ã‚ˆã£ã¦è§£é™¤ã•ã‚Œã¦ã„ã‚‹ã‹',
					toggleAchievementsDisplay: '[TOGGLE] å®Ÿç¸¾ ã‚¿ã‚° [TAG] ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER]',
					show: 'è¡¨ç¤º',
					hide: 'éè¡¨ç¤º',
					refresh: 'æ›´æ–°',
					close: 'é–‰ã˜ã‚‹',
					nameHeader: 'åå‰',
					scoreHeader: 'ã‚¹ã‚³ã‚¢',
					noData: '(ãƒ‡ãƒ¼ã‚¿ãªã—)',
					noAchievements: '(å®Ÿç¸¾ãªã—)',
					moreRecords: '... ã‚ã¨ {n} ä»¶',
					unlocked: 'è§£é™¤æ¸ˆã¿',
					locked: 'ãƒ­ãƒƒã‚¯ä¸­',
					leaderboardTitle: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼š{board}',
					achievementsTitle: 'å®Ÿç¸¾ï¼š{tag}ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼š{player}ï¼‰'
				},
				'ko': {
					extName: 'ì—…ì  ë° ìˆœìœ„í‘œ',
					label_version: 'V' + version,
					docLink: 'ë¬¸ì„œ ë³´ê¸°',
					leaderboard: 'ìˆœìœ„í‘œ',
					createBoard: 'ìˆœìœ„í‘œ ìƒì„± [BOARD]',
					submitScore: 'ì ìˆ˜ ì œì¶œ ì´ë¦„ [NAME] ì ìˆ˜ [SCORE] ì— [BOARD]',
					getTop: '[BOARD] ì—ì„œ ìƒìœ„ [N] ê°€ì ¸ì˜¤ê¸°',
					getRank: '[BOARD] ì—ì„œ ì´ë¦„ [NAME] ë­í¬',
					getHighScore: '[BOARD] ì—ì„œ ì´ë¦„ [NAME] ìµœê³ ì ',
					resetBoard: 'ìˆœìœ„í‘œ ì´ˆê¸°í™” [BOARD]',
					getAllData: 'ëª¨ë“  ë°ì´í„°',
					toggleDisplay: '[TOGGLE] ìˆœìœ„í‘œ [BOARD]',
					achievements: 'ì—…ì ',
					createAchievement: 'ì—…ì  ìƒì„± ID [ID] ì´ë¦„ [NAME] íƒœê·¸ [TAG]',
					awardAchievement: 'ì—…ì  ID [ID] íƒœê·¸ [TAG] ë¥¼ í”Œë ˆì´ì–´ [PLAYER] ì—ê²Œ ìˆ˜ì—¬ (ì´ë¦„ [NAME]) ë° [DISPLAY]',
					isAchievementUnlocked: 'ì—…ì  ID [ID] íƒœê·¸ [TAG] ì´ í”Œë ˆì´ì–´ [PLAYER] ì— ì˜í•´ í•´ì œë˜ì—ˆëŠ”ê°€?',
					toggleAchievementsDisplay: '[TOGGLE] ì—…ì  íƒœê·¸ [TAG] í”Œë ˆì´ì–´ [PLAYER]',
					show: 'í‘œì‹œ',
					hide: 'ìˆ¨ê¸°ê¸°',
					refresh: 'ìƒˆë¡œê³ ì¹¨',
					close: 'ë‹«ê¸°',
					nameHeader: 'ì´ë¦„',
					scoreHeader: 'ì ìˆ˜',
					noData: '(ë°ì´í„° ì—†ìŒ)',
					noAchievements: '(ì—…ì  ì—†ìŒ)',
					moreRecords: '... {n} ê°œì˜ ì¶”ê°€ ê¸°ë¡',
					unlocked: 'í•´ì œë¨',
					locked: 'ì ê¹€',
					leaderboardTitle: 'ìˆœìœ„í‘œ: {board}',
					achievementsTitle: 'ì—…ì : {tag} (ì‚¬ìš©ì: {player})'
				},
				'pt': {
					extName: 'Conquistas e Rankings',
					label_version: 'V' + version,
					docLink: 'Ver documentaÃ§Ã£o',
					leaderboard: 'Ranking',
					createBoard: 'Criar ranking [BOARD]',
					submitScore: 'Enviar pontuaÃ§Ã£o NOME [NAME] PONT [SCORE] para [BOARD]',
					getTop: 'Obter top [N] de [BOARD]',
					getRank: 'PosiÃ§Ã£o de NOME [NAME] em [BOARD]',
					getHighScore: 'Maior pontuaÃ§Ã£o de NOME [NAME] em [BOARD]',
					resetBoard: 'Resetar [BOARD]',
					getAllData: 'Todos os dados',
					toggleDisplay: '[TOGGLE] ranking [BOARD]',
					achievements: 'Conquistas',
					createAchievement: 'Criar conquista ID [ID] NOME [NAME] TAG [TAG]',
					awardAchievement: 'Conceder conquista ID [ID] TAG [TAG] para JOGADOR [PLAYER] (nome [NAME]) e [DISPLAY] ao jogador',
					isAchievementUnlocked: 'Conquista ID [ID] TAG [TAG] desbloqueada por JOGADOR [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] conquistas TAG [TAG] JOGADOR [PLAYER]',
					show: 'Mostrar',
					hide: 'Esconder',
					refresh: 'Atualizar',
					close: 'Fechar',
					nameHeader: 'Nome',
					scoreHeader: 'Pontos',
					noData: '(sem dados)',
					noAchievements: '(sem conquistas)',
					moreRecords: '... {n} registros a mais',
					unlocked: 'Desbloqueado',
					locked: 'Bloqueado',
					leaderboardTitle: 'Ranking: {board}',
					achievementsTitle: 'Conquistas: {tag} (Jogador: {player})'
				},
				'it': {
					extName: 'Obiettivi e Classifiche',
					label_version: 'V' + version,
					docLink: 'Vedi documentazione',
					leaderboard: 'Classifica',
					createBoard: 'Crea classifica [BOARD]',
					submitScore: 'Invia punteggio NOME [NAME] PUNT [SCORE] a [BOARD]',
					getTop: 'Prendi top [N] da [BOARD]',
					getRank: 'Classifica di NOME [NAME] su [BOARD]',
					getHighScore: 'Miglior punteggio di NOME [NAME] su [BOARD]',
					resetBoard: 'Resetta [BOARD]',
					getAllData: 'Tutti i dati',
					toggleDisplay: '[TOGGLE] classifica [BOARD]',
					achievements: 'Obiettivi',
					createAchievement: 'Crea obiettivo ID [ID] NOME [NAME] TAG [TAG]',
					awardAchievement: 'Assegna obiettivo ID [ID] TAG [TAG] a GIOCATORE [PLAYER] (nome [NAME]) e [DISPLAY] al giocatore',
					isAchievementUnlocked: 'Obiettivo ID [ID] TAG [TAG] sbloccato da GIOCATORE [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] obiettivi TAG [TAG] GIOCATORE [PLAYER]',
					show: 'Mostra',
					hide: 'Nascondi',
					refresh: 'Aggiorna',
					close: 'Chiudi',
					nameHeader: 'Nome',
					scoreHeader: 'Punteggio',
					noData: '(nessun dato)',
					noAchievements: '(nessun obiettivo)',
					moreRecords: '... {n} record in piÃ¹',
					unlocked: 'Sbloccato',
					locked: 'Bloccato',
					leaderboardTitle: 'Classifica: {board}',
					achievementsTitle: 'Obiettivi: {tag} (Giocatore: {player})'
				}
			};
		}

		_detectLang() {
			try {
				const nav = (typeof navigator !== 'undefined' && navigator.language) ? navigator.language.toLowerCase() : 'en';
				if (nav.startsWith('zh')) return 'zh-cn';
				if (nav.startsWith('fr')) return 'fr';
				if (nav.startsWith('es')) return 'es';
				if (nav.startsWith('ru')) return 'ru';
				if (nav.startsWith('ar')) return 'ar';
				if (nav.startsWith('ja')) return 'ja';
				if (nav.startsWith('ko')) return 'ko';
				if (nav.startsWith('pt')) return 'pt';
				if (nav.startsWith('it')) return 'it';
				return 'en';
			} catch (e) {
				return 'en';
			}
		}

		_t(key, vars) {
			const dict = this._translations && this._translations[this._lang] ? this._translations[this._lang] : this._translations['en'];
			let s = (dict && dict[key]) ? dict[key] : (this._translations['en'][key] || key);
			if (vars && typeof vars === 'object') {
				Object.keys(vars).forEach(k => {
					s = s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(vars[k]));
				});
			}
			return s;
		}

		getInfo() {
			const B = (window.Scratch && window.Scratch.BlockType) ? window.Scratch.BlockType : { COMMAND: 'command', REPORTER: 'reporter' };
			const A = (window.Scratch && window.Scratch.ArgumentType) ? window.Scratch.ArgumentType : { STRING: 'string', NUMBER: 'number' };
			const BUTTON = (B && B.BUTTON) ? B.BUTTON : B.COMMAND;
            return {
				id: 'leaderboard_and_achievements',
				name: this._t('extName'),
				color1: '#3494fc',
				color2: '#3494fc',
				color3: '#3494fc',
				blocks: [
                    { opcode: 'label', blockType: B.LABEL, text: `â€”â€”â€” ${this._t('extName')} â€”â€”â€”` },
                    { opcode: 'label_version', blockType: B.LABEL, text: this._t('label_version')},
                    { opcode: 'docLink', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('docLink') },
					{ opcode: 'leaderboard_text', blockType: B.LABEL, text: ` ${this._t('leaderboard')}`},
					{ opcode: 'createBoard', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('createBoard'),
						arguments: { BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'submitScore', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('submitScore'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, SCORE: { type: A.NUMBER, defaultValue: 0 }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getTop', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getTop'),
						arguments: { N: { type: A.NUMBER, defaultValue: 10 }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getRank', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getRank'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getHighScore', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getHighScore'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'resetBoard', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('resetBoard'),
						arguments: { BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getAllData', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getAllData') },
					{ opcode: 'toggleDisplay', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('toggleDisplay'),
						arguments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'cloud_text', blockType: B.LABEL, text: ' äº‘å­˜å‚¨' },
					{ opcode: 'pushAllToCloud', blockType: B.COMMAND, text: 'æ¨é€å…¨éƒ¨åˆ°äº‘ç«¯' },
					{ opcode: 'pullAllFromCloud', blockType: B.COMMAND, text: 'ä»äº‘ç«¯æ‹‰å–å…¨éƒ¨' },
					{ opcode: 'setPort', blockType: B.COMMAND, text: 'è®¾ç½®ç«¯å£ [PORT]', arguments: { PORT: { type: A.STRING, defaultValue: 'default' } } },
					{ opcode: 'getPort', blockType: B.REPORTER, text: 'å½“å‰ç«¯å£' },
					{ opcode: 'setCloudAutoSync', blockType: B.COMMAND, text: 'è‡ªåŠ¨äº‘åŒæ­¥ [TOGGLE]',
						arguments: { TOGGLE: { type: A.STRING, menu: 'toggle' } } },
					{ opcode: 'achievement_text', blockType: B.LABEL, text: ` ${this._t('achievements')}`},
					{ opcode: 'createAchievement', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('createAchievement'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, NAME: { type: A.STRING, defaultValue: 'æˆå°±åç§°' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' } } },
					{ opcode: 'awardAchievement', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('awardAchievement'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' }, NAME: { type: A.STRING, defaultValue: '' }, DISPLAY: { type: A.STRING, menu: 'display' } } },
					{ opcode: 'isAchievementUnlocked', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('isAchievementUnlocked'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' } } },
					{ opcode: 'toggleAchievementsDisplay', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('toggleAchievementsDisplay'),
						arguments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' } } }
				],
				menus: {
                    toggle: [
                        { text: this._t('show'), value: 'open' },
                        { text: this._t('hide'), value: 'close' }
                    ],
 					display: [
 						{ text: this._t('show'), value: 'show' },
 						{ text: this._t('hide'), value: 'hide' }
 					]
                 }
 			};
 		}

		_storageKeyForPort() {
			return String(this.storageKey || 'achieve_and_leaderboard') + ':' + String(this._port || 'default');
		}

		_loadAll() {
			try {
				if (typeof localStorage !== 'undefined') {
					const key = this._storageKeyForPort();
					const raw = localStorage.getItem(key);
					if (raw) {
						try { return JSON.parse(raw); } catch (e) {}
					}
					const legacyRaw = localStorage.getItem(this.storageKey);
					if (legacyRaw) {
						try {
							const parsed = JSON.parse(legacyRaw);
							try { localStorage.setItem(key, JSON.stringify(parsed)); } catch (e) {}
							return parsed;
						} catch (e) {}
					}
				}
			} catch (e) {}
			return this._inMemoryStore[this._port] ? this._inMemoryStore[this._port] : {};
 		}
 
 		_saveAll(data) {
			try {
				const key = this._storageKeyForPort();
				if (typeof localStorage !== 'undefined') {
					localStorage.setItem(key, JSON.stringify(data));
				} else {
					this._inMemoryStore[this._port] = data;
				}
			} catch (e) {
				this._inMemoryStore[this._port] = data;
			}
			if (this._cloudProvider && this._cloudAutoSync && typeof this._cloudProvider.upload === 'function') {
				try {
					const payload = JSON.stringify(data);
					Promise.resolve(this._cloudProvider.upload(this._storageKeyForPort(), payload)).catch(() => {});
				} catch (e) {}
			}
 		}
 
 		registerCloudProvider(provider) {
 			if (!provider) return false;
 			this._cloudProvider = provider;
 			return true;
 		}
 
 		async _pushAllToCloud() {
			if (!this._cloudProvider || typeof this._cloudProvider.upload !== 'function') return false;
			const all = this._loadAll();
			try {
				await this._cloudProvider.upload(this._storageKeyForPort(), JSON.stringify(all));
				return true;
			} catch (e) {
				return false;
			}
 		}
 
 		async _pullAllFromCloud() {
			if (!this._cloudProvider || typeof this._cloudProvider.download !== 'function') return false;
			try {
				const raw = await this._cloudProvider.download(this._storageKeyForPort());
				if (!raw) return false;
				let parsed = {};
				try { parsed = JSON.parse(raw); } catch (e) { return false; }
				this._saveAll(parsed);
				return true;
			} catch (e) {
				return false;
			}
 		}
 
 		pushAllToCloud(args) {
 			if (typeof this._pushAllToCloud === 'function') this._pushAllToCloud().catch(() => {});
 		}
 
 		pullAllFromCloud(args) {
 			if (typeof this._pullAllFromCloud === 'function') this._pullAllFromCloud().catch(() => {});
 		}
 
 		setCloudAutoSync(args) {
 			const toggle = String((args && args.TOGGLE) || '').toLowerCase();
 			if (toggle === 'open' || toggle === 'show' || toggle === 'true' || toggle === '1') this.setCloudAutoSyncEnabled(true);
 			else if (toggle === 'close' || toggle === 'hide' || toggle === 'false' || toggle === '0') this.setCloudAutoSyncEnabled(false);
 		}
 
 		setCloudAutoSyncEnabled(enabled) {
 			this._cloudAutoSync = !!enabled;
 		}
 
 		_ensureBoard(data, board) {
 			if (!data[board]) data[board] = {};
 			return data[board];
 		}

        docLink() {
            const url = 'https://chess-brain.github.io/doc/achievements_and_leaderboards.html';
            if (typeof window === 'undefined') return;
            try {
                this._openUrl(url);
            } catch (e) {}
        }

		createBoard(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const all = this._loadAll();
			this._ensureBoard(all, board);
			this._saveAll(all);
		}

		submitScore(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const score = Number(args.SCORE) || 0;
			const all = this._loadAll();
			const b = this._ensureBoard(all, board);
			const prev = b[name];
			const now = Date.now();
			if (!prev || score > prev.score || (score === prev.score && now < prev.ts)) {
				b[name] = { score: score, ts: now };
			}
			this._saveAll(all);
		}

		getTop(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const n = Math.max(0, Math.floor(Number(args.N) || 0));
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(name => ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));
			arr.sort((a, c) => {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			const top = arr.slice(0, n).map((item, idx) => ({ rank: idx + 1, name: item.name, score: item.score }));
			try {
				return JSON.stringify(top);
			} catch (e) {
				return '[]';
			}
		}

		getRank(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(nm => ({ name: nm, score: Number(b[nm].score), ts: Number(b[nm].ts) }));
			arr.sort((a, c) => {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			for (let i = 0; i < arr.length; i++) {
				if (arr[i].name === name) return i + 1;
			}
			return 0;
		}

		getHighScore(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const all = this._loadAll();
			const b = all[board] || {};
			const entry = b[name];
			return entry ? Number(entry.score) : 0;
		}

		resetBoard(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const all = this._loadAll();
			if (all[board]) delete all[board];
			this._saveAll(all);
		}

		getAllData() {
			const all = this._loadAll();
			all.__achievements_meta = all.__achievements_meta || {};
			all.__achievements_unlocked = all.__achievements_unlocked || {};
			try {
				return JSON.stringify(all);
			} catch (e) {
				return '{}';
			}
		}

		toggleDisplay(args) {
			const toggle = String((args.TOGGLE || '')).toLowerCase();
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ').trim();
			if (toggle === 'open') {
				this._showOverlay(board);
				return;
			}
			if (toggle === 'close') {
				if (this._overlayElement && this._overlayMode === 'leaderboard') this._hideOverlay();
				return;
			}
			if (this._overlayElement && this._overlayMode === 'leaderboard' && this._overlayContext && this._overlayContext.board === board) {
				this._hideOverlay();
			} else {
				this._showOverlay(board);
			}
		}

		_ensureAchievementMeta(all) {
			if (!all.__achievements_meta) all.__achievements_meta = {};
			return all.__achievements_meta;
		}
		_ensureAchievementUnlocked(all) {
			if (!all.__achievements_unlocked) all.__achievements_unlocked = {};
			return all.__achievements_unlocked;
		}

		createAchievement(args) {
			const id = String(args.ID || '');
			const name = String(args.NAME || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			if (!id) return;
			const all = this._loadAll();
			const meta = this._ensureAchievementMeta(all);
			if (!meta[tag]) meta[tag] = {};
			meta[tag][id] = { name: name || id };
			this._saveAll(all);
		}

		awardAchievement(args) {
			const id = String(args.ID || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			const player = String(args.PLAYER || 'ç©å®¶');
			const name = String(args.NAME || '');
			if (!id) return;
			const all = this._loadAll();
			const meta = this._ensureAchievementMeta(all);
			if (!meta[tag]) meta[tag] = {};
			if (name) meta[tag][id] = { name: name };
			const unlocked = this._ensureAchievementUnlocked(all);
			if (!unlocked[player]) unlocked[player] = {};
			if (!unlocked[player][tag]) unlocked[player][tag] = {};
			unlocked[player][tag][id] = { ts: Date.now() };
			this._saveAll(all);
			const display = String((args && args.DISPLAY) || '').toLowerCase();
			if (display === 'show') {
				const displayName = (meta[tag] && meta[tag][id] && meta[tag][id].name) ? meta[tag][id].name : (name || id);
				this._showDynamicHint('ğŸ† ' + this._t('unlocked') + ': ' + displayName);
			}
		}

		isAchievementUnlocked(args) {
			const id = String(args.ID || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			const player = String(args.PLAYER || 'ç©å®¶');
			if (!id) return false;
			const all = this._loadAll();
			const unlocked = all.__achievements_unlocked || {};
			return !!(unlocked[player] && unlocked[player][tag] && unlocked[player][tag][id]);
		}

		_ensureStyles() {
			if (this._stylesInjected || typeof document === 'undefined') {
				if (typeof document !== 'undefined' && document.getElementById && document.getElementById('turbo-leaderboard-styles')) {
					this._stylesInjected = true;
				}
				return;
			}
			const css = `
				#turbo-leaderboard-overlay {
					position: fixed;
					right: 12px;
					top: 12px;
					max-height: 70vh;
					overflow: auto;
					z-index: 999999;
					background: rgba(255,255,255,0.5);
					color: #111;
					padding: 12px;
					border-radius: 12px;
					font-family: 'Helvetica Neue', Arial, sans-serif;
					font-size: 13px;
					min-width: 300px;
					box-shadow: 0 8px 24px rgba(0,0,0,0.12);
					backdrop-filter: blur(4px);
					border: 1px solid rgba(0,0,0,0.06);
				}
				#turbo-leaderboard-overlay .lb-title {
					display:flex;
					align-items:center;
					justify-content:space-between;
					gap:8px;
					margin-bottom:8px;
				}
				#turbo-leaderboard-overlay .lb-title .title-text {
					font-weight:700;
					font-size:14px;
					color: #222;
				}
				#turbo-leaderboard-overlay .lb-controls button {
					background: rgba(0,0,0,0.04);
					border: 1px solid rgba(0,0,0,0.06);
					color: #111;
					padding:4px 8px;
					border-radius:6px;
					cursor:pointer;
					font-size:12px;
				}
				#turbo-leaderboard-overlay table.lb-table {
					width:100%;
					border-collapse:collapse;
					table-layout:fixed;
				}
				#turbo-leaderboard-overlay table.lb-table th,
				#turbo-leaderboard-overlay table.lb-table td {
					padding:6px 8px;
					overflow:hidden;
					text-overflow:ellipsis;
					white-space:nowrap;
					color: #111;
				}
				#turbo-leaderboard-overlay table.lb-table th.rank,
				#turbo-leaderboard-overlay table.lb-table td.rank {
					width:40px;
					text-align:left;
				}
				#turbo-leaderboard-overlay table.lb-table td.name {
					text-align:left;
				}
				#turbo-leaderboard-overlay table.lb-table td.score {
					width:70px;
					text-align:right;
					font-weight:600;
				}
				#turbo-leaderboard-overlay .lb-row:nth-child(odd){
					background: rgba(0,0,0,0.02);
				}
				#turbo-leaderboard-overlay .badge {
					display:inline-block;
					min-width:24px;
					padding:2px 6px;
					border-radius:12px;
					font-weight:700;
					font-size:12px;
					text-align:center;
					margin-right:6px;
				}
				#turbo-leaderboard-overlay .badge.gold{ background: linear-gradient(90deg,#ffd700,#ffdd66); color:#1b1b1b; }
				#turbo-leaderboard-overlay .badge.silver{ background: linear-gradient(90deg,#e6e6e6,#cfcfcf); color:#1b1b1b; }
				#turbo-leaderboard-overlay .badge.bronze{ background: linear-gradient(90deg,#cd7f32,#d99b6a); color:#fff; }
				#turbo-leaderboard-overlay .name-wrap { max-width: 140px; display:inline-block; vertical-align:middle; }
				#turbo-leaderboard-overlay .achv-unlocked { color: #2e7d32; font-weight:700; }
				#turbo-leaderboard-overlay .achv-locked { color: #7b7b7b; }
			`;
			const style = document.createElement('style');
			style.id = 'turbo-leaderboard-styles';
			style.textContent = css;
			document.head.appendChild(style);
			this._stylesInjected = true;
		}

		_createOverlay() {
			this._ensureStyles();
			const el = document.createElement('div');
			el.id = 'turbo-leaderboard-overlay';
			el.style.display = 'none';

			const titleBar = document.createElement('div');
			titleBar.className = 'lb-title';
			const titleText = document.createElement('div');
			titleText.className = 'title-text';
			titleText.textContent = '';
			titleBar.appendChild(titleText);

			const controls = document.createElement('div');
			controls.className = 'lb-controls';
			const refreshBtn = document.createElement('button');
			refreshBtn.textContent = 'ğŸ† ' + this._t('refresh');
			refreshBtn.onclick = () => {
				if (this._overlayMode === 'leaderboard' && this._overlayContext) this._showOverlay(this._overlayContext.board);
				else if (this._overlayMode === 'achievements' && this._overlayContext) this._showAchievements(this._overlayContext.tag, this._overlayContext.player);
			};
			const closeBtn = document.createElement('button');
			closeBtn.textContent = 'ğŸ† ' + this._t('close');
			closeBtn.onclick = () => this._hideOverlay();
			controls.appendChild(refreshBtn);
			controls.appendChild(closeBtn);
			titleBar.appendChild(controls);
			el.appendChild(titleBar);

			const table = document.createElement('table');
			table.className = 'lb-table';
			const thead = document.createElement('thead');
			const htr = document.createElement('tr');
			const thRank = document.createElement('th'); thRank.className = 'rank'; thRank.textContent = '#';
			const thName = document.createElement('th'); thName.textContent = 'ğŸ† ' + this._t('nameHeader');
			const thRight = document.createElement('th'); thRight.className = 'score'; thRight.textContent = '';
			htr.appendChild(thRank); htr.appendChild(thName); htr.appendChild(thRight);
			thead.appendChild(htr);
			table.appendChild(thead);
			const tbody = document.createElement('tbody');
			tbody.className = 'lb-list';
			table.appendChild(tbody);
			el.appendChild(table);
			el._titleText = titleText;
			el._theadRight = thRight;
			el._tbody = tbody;
			return el;
		}

		_showOverlay(board) {
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(name => ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));
			arr.sort((a, c) => {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			if (!this._overlayElement) {
				this._overlayElement = this._createOverlay();
				document.body.appendChild(this._overlayElement);
			}
			this._overlayMode = 'leaderboard';
			this._overlayContext = { board };
			this._overlayElement._titleText.textContent = 'ğŸ† ' + this._t('leaderboardTitle', { board });
			this._overlayElement._theadRight.textContent = 'ğŸ† ' + this._t('scoreHeader');
			const tbody = this._overlayElement._tbody;
			tbody.innerHTML = '';
			if (arr.length === 0) {
				const tr = document.createElement('tr');
				const td = document.createElement('td');
				td.colSpan = 3;
				td.style.opacity = '0.85';
				td.textContent = 'ğŸ† ' + this._t('noData');
				tr.appendChild(td);
				tbody.appendChild(tr);
			} else {
				const max = Math.min(50, arr.length);
				for (let i = 0; i < max; i++) {
					const it = arr[i];
					const tr = document.createElement('tr');
					tr.className = 'lb-row';
					const tdRank = document.createElement('td'); tdRank.className = 'rank';
					const badge = document.createElement('span'); badge.className = 'badge';
					if (i === 0) badge.classList.add('gold'); else if (i === 1) badge.classList.add('silver'); else if (i === 2) badge.classList.add('bronze');
					badge.textContent = (i + 1);
					tdRank.appendChild(badge);
					tr.appendChild(tdRank);
					const tdName = document.createElement('td'); tdName.className = 'name';
					const nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = it.name; nameWrap.textContent = it.name;
					tdName.appendChild(nameWrap);
					tr.appendChild(tdName);
					const tdScore = document.createElement('td'); tdScore.className = 'score'; tdScore.textContent = String(it.score);
					tr.appendChild(tdScore);
					tbody.appendChild(tr);
				}
				if (arr.length > max) {
					const tr = document.createElement('tr');
					const td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.8';
					td.textContent = 'ğŸ† ' + this._t('moreRecords', { n: arr.length - max });
					tr.appendChild(td);
					tbody.appendChild(tr);
				}
			}
			this._overlayElement.style.display = 'block';
		}
		
		_showAchievements(tag, player) {
			const all = this._loadAll();
			const meta = (all.__achievements_meta && all.__achievements_meta[tag]) ? all.__achievements_meta[tag] : {};
			const unlockedForPlayer = (all.__achievements_unlocked && all.__achievements_unlocked[player] && all.__achievements_unlocked[player][tag]) ? all.__achievements_unlocked[player][tag] : {};
			if (!this._overlayElement) {
				this._overlayElement = this._createOverlay();
				document.body.appendChild(this._overlayElement);
			}
			this._overlayMode = 'achievements';
			this._overlayContext = { tag, player };
			this._overlayElement._titleText.textContent = 'ğŸ† ' + this._t('achievementsTitle', { tag, player });
			this._overlayElement._theadRight.textContent = '';
			const tbody = this._overlayElement._tbody;
			tbody.innerHTML = '';
			const ids = Object.keys(meta);
			if (ids.length === 0) {
				const tr = document.createElement('tr');
				const td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.85'; td.textContent = 'ğŸ† ' + this._t('noAchievements');
				tr.appendChild(td); tbody.appendChild(tr);
			} else {
				for (let i = 0; i < ids.length; i++) {
					const id = ids[i];
					const m = meta[id];
					const tr = document.createElement('tr'); tr.className = 'lb-row';
					const tdRank = document.createElement('td'); tdRank.className = 'rank'; tdRank.textContent = (i + 1) + '.';
					tr.appendChild(tdRank);
					const tdName = document.createElement('td'); tdName.className = 'name';
					const nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = `${m.name} (${id})`; nameWrap.textContent = m.name;
					tdName.appendChild(nameWrap); tr.appendChild(tdName);
					const tdState = document.createElement('td'); tdState.className = 'score';
					if (unlockedForPlayer && unlockedForPlayer[id]) {
						tdState.innerHTML = `<span class='achv-unlocked'>${'ğŸ† ' + this._t('unlocked')}</span>`;
					} else {
						tdState.innerHTML = `<span class='achv-locked'>${'ğŸ† ' + this._t('locked')}</span>`;
					}
					tr.appendChild(tdState);
					tbody.appendChild(tr);
				}
			}
			this._overlayElement.style.display = 'block';
		}

		_hideOverlay() {
			if (this._overlayElement) {
				this._overlayElement.style.display = 'none';
				this._overlayMode = null;
				this._overlayContext = null;
			}
		}
		_hideDocOverlay() {
			try {
				const el = (typeof document !== 'undefined') ? document.getElementById('turbo-doc-overlay') : null;
				if (el && el.parentNode) el.parentNode.removeChild(el);
			} catch (e) {}
		}
		_openUrl(url) {
			if (typeof window === 'undefined') return;
			try {
				let opened = null;
				try { opened = window.open(url, '_blank', 'noopener'); } catch (e) { opened = null; }
				if (opened) { try { opened.opener = null; opened.focus && opened.focus(); } catch (e) {} return; }
				try {
					if (window.top && window.top !== window) {
						let to = null;
						try { to = window.top.open(url, '_blank', 'noopener'); } catch (e) { to = null; }
						if (to) { try { to.opener = null; to.focus && to.focus(); } catch (e) {} return; }
					}
				} catch (e) {}
				try {
					if (typeof document !== 'undefined') {
						const a = document.createElement('a');
						a.href = url;
						a.target = '_blank';
						a.rel = 'noopener noreferrer';
						a.style.display = 'none';
						document.body.appendChild(a);
						try {
							const evt = new MouseEvent('click', { bubbles: true, cancelable: true, view: window });
							a.dispatchEvent(evt);
						} catch (e) {
							try { a.click(); } catch (e2) {}
						}
						document.body.removeChild(a);
						return;
					}
				} catch (e) {}
				try { window.location.assign(url); } catch (e) {}
			} catch (e) {}
		}
		_showDynamicHint(msg) {
			if (typeof document === 'undefined') return;
			try {
				if (!document.getElementById('turbo-achv-hint-styles')) {
					const s = document.createElement('style');
					s.id = 'turbo-achv-hint-styles';
					s.textContent = '.turbo-achv-hint{position:fixed;left:50%;transform:translateX(-50%) translateY(-8px);top:12px;background:rgba(0,0,0,0.78);color:#fff;padding:8px 12px;border-radius:10px;font-family:'Helvetica Neue',Arial,sans-serif;font-size:13px;z-index:1000000;opacity:0;transition:opacity 0.28s ease,transform 0.28s ease;pointer-events:none;box-shadow:0 6px 18px rgba(0,0,0,0.2)}.turbo-achv-hint.show{opacity:1;transform:translateX(-50%) translateY(0)}';
					document.head.appendChild(s);
				}
				let el = document.getElementById('turbo-achv-hint');
				if (!el) {
					el = document.createElement('div');
					el.id = 'turbo-achv-hint';
					el.className = 'turbo-achv-hint';
					document.body.appendChild(el);
				}
				el.textContent = String(msg || '');
				void el.offsetWidth;
				el.classList.add('show');
				if (el._timeout) clearTimeout(el._timeout);
				el._timeout = setTimeout(function () {
					el.classList.remove('show');
				}, 3000);
			} catch (e) {}
		}
		toggleAchievementsDisplay(args) {
			const toggle = String((args.TOGGLE || '')).toLowerCase();
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾').trim();
			const player = String(args.PLAYER || 'ç©å®¶').trim();
			if (toggle === 'open') {
				this._showAchievements(tag, player);
				return;
			}
			if (toggle === 'close') {
				if (this._overlayElement && this._overlayMode === 'achievements') this._hideOverlay();
				return;
			}
			if (this._overlayElement && this._overlayMode === 'achievements' && this._overlayContext && this._overlayContext.tag === tag && this._overlayContext.player === player) {
				this._hideOverlay();
			} else {
				this._showAchievements(tag, player);
			}
		}
	}

	if (window && window.Scratch && window.Scratch.extensions && window.Scratch.extensions.register) {
		window.Scratch.extensions.register(new Leaderboard());
	} else if (typeof window !== 'undefined') {
		window.LeaderboardExtension = new Leaderboard();
	} else if (typeof module !== 'undefined' && module.exports) {
		module.exports = Leaderboard;
	}
})();


```ã€‚">
<meta property="og:title" content="è±¡æ£‹è„‘çš„æˆå°±ä¸æ’è¡Œæ¦œ">
<meta property="og:description" content="# è±¡æ£‹è„‘çš„æˆå°±ä¸æ’è¡Œæ¦œ
## è¯´æ˜ï¼š
è¿™æ˜¯ä¸€ä¸ªå¯ä»¥å®ç°æˆå°±ä¸æ’è¡Œæ¦œçš„æ‰©å±•
æˆ‘ä»¬çš„å£å·ï¼šå¹²å®Gandiçš„ç‰¹æœ‰åŠŸèƒ½ï¼ï¼ˆCCW: bushiï¼‰
## åŠ è½½æ–¹å¼ï¼š
### TurboWarp / 02Engine / Mistium / Penguin mod: ç›®å‰æ”¯æŒ
ã€æ‰©å±•ã€‘-> è‡ªå®šä¹‰æ‰©å±• -> æ–‡æœ¬ -> ç²˜è´´å†…å®¹
### Gandi IDE : æš‚ä¸æ”¯æŒ
## ä»£ç 
éœ€å¤åˆ¶å†…å®¹å¦‚ä¸‹ï¼š
```js
(function () {
	class Leaderboard {
		constructor(runtime) {
			this.runtime = runtime;
			this.storageKey = 'achieve_and_leaderboard';
			this._port = 'default';
			this._inMemoryStore = {};
 			this._cloudProvider = null;
 			this._cloudAutoSync = false;
			this._overlayElement = null;
			this._overlayMode = null;
			this._overlayContext = null;
			this._stylesInjected = false;
			this._lang = this._detectLang();
			const vers_num = '1.2.0';
			const build_type = 1;
			const build_version = '001';
			const version = vers_num + ['-alpha-', '-beta-', '-release-'][build_type] + build_version;
			this._translations = {
				'zh-cn': {
					extName: 'æˆå°±ä¸æ’è¡Œæ¦œ',
					label_version: 'V' + version,
					docLink: 'æŸ¥çœ‹æ–‡æ¡£',
					leaderboard: 'æ’è¡Œæ¦œ',
					createBoard: 'åˆ›å»ºæ’è¡Œæ¦œ [BOARD]',
					submitScore: 'æäº¤åˆ†æ•° åç§° [NAME] åˆ†æ•° [SCORE] åˆ° [BOARD]',
					getTop: 'è·å–å‰ [N] å ä» [BOARD]',
					getRank: 'æŸ¥è¯¢ åç§° [NAME] åœ¨ [BOARD] çš„åæ¬¡',
					getHighScore: 'æŸ¥è¯¢ åç§° [NAME] åœ¨ [BOARD] çš„æœ€é«˜åˆ†',
					resetBoard: 'é‡ç½®æ’è¡Œæ¦œ [BOARD]',
					getAllData: 'æ•´ä¸ªæ’è¡Œæ¦œæ•°æ®',
					toggleDisplay: '[TOGGLE] æ’è¡Œæ¦œ [BOARD]',
					achievements: 'æˆå°±ç³»ç»Ÿ',
					createAchievement: 'åˆ›å»ºæˆå°± ID [ID] åç§° [NAME] æ ‡ç­¾ [TAG]',
					awardAchievement: 'é¢å‘æˆå°± ID [ID] æ ‡ç­¾ [TAG] ç»™ ç”¨æˆ· [PLAYER] ï¼ˆå¯é€‰åç§° [NAME]ï¼‰ å¹¶ [DISPLAY] ç»™ç”¨æˆ·',
					isAchievementUnlocked: 'æˆå°± ID [ID] åœ¨ æ ‡ç­¾ [TAG] æ˜¯å¦è¢« ç”¨æˆ· [PLAYER] è§£é”',
					toggleAchievementsDisplay: '[TOGGLE] æˆå°± æ ‡ç­¾ [TAG] ç”¨æˆ· [PLAYER]',
					show: 'æ˜¾ç¤º',
					hide: 'éšè—',
					refresh: 'åˆ·æ–°',
					close: 'å…³é—­',
					nameHeader: 'åç§°',
					scoreHeader: 'åˆ†æ•°',
					noData: '(æ— æ•°æ®)',
					noAchievements: '(æ— æˆå°±)',
					moreRecords: '... è¿˜æœ‰ {n} æ¡è®°å½•',
					unlocked: 'å·²è§£é”',
					locked: 'æœªè§£é”',
					leaderboardTitle: 'æ’è¡Œæ¦œï¼š{board}',
					achievementsTitle: 'æˆå°±ï¼š{tag}ï¼ˆç”¨æˆ·ï¼š{player}ï¼‰'
				},
				'en': {
					extName: 'Achievements & Leaderboards',
					label_version: 'V' + version,
					docLink: 'View Docs',
					leaderboard: 'Leaderboard',
					createBoard: 'Create board [BOARD]',
					submitScore: 'Submit score NAME [NAME] SCORE [SCORE] to [BOARD]',
					getTop: 'Get top [N] from [BOARD]',
					getRank: 'Get rank of NAME [NAME] on [BOARD]',
					getHighScore: 'Get high score of NAME [NAME] on [BOARD]',
					resetBoard: 'Reset board [BOARD]',
					getAllData: 'All leaderboard data',
					toggleDisplay: '[TOGGLE] leaderboard [BOARD]',
					achievements: 'Achievements',
					createAchievement: 'Create achievement ID [ID] NAME [NAME] TAG [TAG]',
					awardAchievement: 'Award achievement ID [ID] TAG [TAG] to PLAYER [PLAYER] (opt NAME [NAME]) and [DISPLAY] to player',
					isAchievementUnlocked: 'Is achievement ID [ID] in TAG [TAG] unlocked by PLAYER [PLAYER]',
					toggleAchievementsDisplay: '[TOGGLE] achievements TAG [TAG] PLAYER [PLAYER]',
					show: 'Show',
					hide: 'Hide',
					refresh: 'Refresh',
					close: 'Close',
					nameHeader: 'Name',
					scoreHeader: 'Score',
					noData: '(no data)',
					noAchievements: '(no achievements)',
					moreRecords: '... {n} more records',
					unlocked: 'Unlocked',
					locked: 'Locked',
					leaderboardTitle: 'Leaderboard: {board}',
					achievementsTitle: 'Achievements: {tag} (Player: {player})'
				},
				'fr': {
					extName: 'SuccÃ¨s et Classements',
					label0: 'Classement & SuccÃ¨s',
					label_version: 'V' + version,
					docLink: 'Voir la doc',
					leaderboard: 'Classement',
					createBoard: 'CrÃ©er classement [BOARD]',
					submitScore: 'Soumettre score NOM [NAME] SCORE [SCORE] Ã  [BOARD]',
					getTop: 'Obtenir top [N] de [BOARD]',
					getRank: 'Rang de NOM [NAME] sur [BOARD]',
					getHighScore: 'Meilleur score de NOM [NAME] sur [BOARD]',
					resetBoard: 'RÃ©initialiser [BOARD]',
					getAllData: 'Toutes les donnÃ©es',
					toggleDisplay: '[TOGGLE] classement [BOARD]',
					achievements: 'SuccÃ¨s',
					createAchievement: 'CrÃ©er succÃ¨s ID [ID] NOM [NAME] TAG [TAG]',
					awardAchievement: 'Attribuer succÃ¨s ID [ID] TAG [TAG] Ã  JOUEUR [PLAYER] (opt NOM [NAME]) et [DISPLAY] au joueur',
					isAchievementUnlocked: 'SuccÃ¨s ID [ID] TAG [TAG] dÃ©bloquÃ© par JOUEUR [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] succÃ¨s TAG [TAG] JOUEUR [PLAYER]',
					show: 'Afficher',
					hide: 'Masquer',
					refresh: 'RafraÃ®chir',
					close: 'Fermer',
					nameHeader: 'Nom',
					scoreHeader: 'Score',
					noData: '(aucune donnÃ©e)',
					noAchievements: '(aucun succÃ¨s)',
					moreRecords: '... {n} autres enregistrements',
					unlocked: 'DÃ©bloquÃ©',
					locked: 'VerrouillÃ©',
					leaderboardTitle: 'Classement : {board}',
					achievementsTitle: 'SuccÃ¨s : {tag} (Joueur : {player})'
				},
				'es': {
					extName: 'Logros y ClasificaciÃ³n',
					label_version: 'V' + version,
					docLink: 'Ver documentaciÃ³n',
					leaderboard: 'ClasificaciÃ³n',
					createBoard: 'Crear clasificaciÃ³n [BOARD]',
					submitScore: 'Enviar puntuaciÃ³n NOMBRE [NAME] PUNT [SCORE] a [BOARD]',
					getTop: 'Obtener top [N] de [BOARD]',
					getRank: 'Rango de NOMBRE [NAME] en [BOARD]',
					getHighScore: 'Mejor puntuaciÃ³n de NOMBRE [NAME] en [BOARD]',
					resetBoard: 'Reiniciar [BOARD]',
					getAllData: 'Todos los datos',
					toggleDisplay: '[TOGGLE] clasificaciÃ³n [BOARD]',
					achievements: 'Logros',
					createAchievement: 'Crear logro ID [ID] NOMBRE [NAME] TAG [TAG]',
					awardAchievement: 'Otorgar logro ID [ID] TAG [TAG] a JUGADOR [PLAYER] (opt NOMBRE [NAME]) y [DISPLAY] al jugador',
					isAchievementUnlocked: 'Â¿Logro ID [ID] TAG [TAG] desbloqueado por JUGADOR [PLAYER]?',
					toggleAchievementsDisplay: '[TOGGLE] logros TAG [TAG] JUGADOR [PLAYER]',
					show: 'Mostrar',
					hide: 'Ocultar',
					refresh: 'Actualizar',
					close: 'Cerrar',
					nameHeader: 'Nombre',
					scoreHeader: 'Puntos',
					noData: '(sin datos)',
					noAchievements: '(sin logros)',
					moreRecords: '... {n} registros mÃ¡s',
					unlocked: 'Desbloqueado',
					locked: 'Bloqueado',
					leaderboardTitle: 'ClasificaciÃ³n: {board}',
					achievementsTitle: 'Logros: {tag} (Usuario: {player})'
				},
				'ru': {
					extName: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²',
					label_version: 'V' + version,
					docLink: 'ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ',
					leaderboard: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²',
					createBoard: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ [BOARD]',
					submitScore: 'ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ñ‡ĞºĞ¸ Ğ˜ĞœĞ¯ [NAME] ĞĞ§ĞšĞ˜ [SCORE] Ğ² [BOARD]',
					getTop: 'ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ¿ [N] Ğ¸Ğ· [BOARD]',
					getRank: 'Ğ Ğ°Ğ½Ğ³ Ğ˜ĞœĞ¯ [NAME] Ğ² [BOARD]',
					getHighScore: 'Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ ÑÑ‡ĞµÑ‚ Ğ˜ĞœĞ¯ [NAME] Ğ² [BOARD]',
					resetBoard: 'Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ [BOARD]',
					getAllData: 'Ğ’ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ',
					toggleDisplay: '[TOGGLE] Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° [BOARD]',
					achievements: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ',
					createAchievement: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] Ğ˜ĞœĞ¯ [NAME] TAG [TAG]',
					awardAchievement: 'Ğ’Ñ€ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] TAG [TAG] Ğ¸Ğ³Ñ€Ğ¾ĞºÑƒ [PLAYER] (Ğ¸Ğ¼Ñ [NAME]) Ğ¸ [DISPLAY]',
					isAchievementUnlocked: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] Ğ² TAG [TAG] Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ¼ [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ TAG [TAG] Ğ˜Ğ“Ğ ĞĞš [PLAYER]',
					show: 'ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ',
					hide: 'Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ',
					refresh: 'ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ',
					close: 'Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ',
					nameHeader: 'Ğ˜Ğ¼Ñ',
					scoreHeader: 'ĞÑ‡ĞºĞ¸',
					noData: '(Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)',
					noAchievements: '(Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹)',
					moreRecords: '... ĞµÑ‰Ñ‘ {n} Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹',
					unlocked: 'Ğ Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾',
					locked: 'Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾',
					leaderboardTitle: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: {board}',
					achievementsTitle: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ: {tag} (Ğ˜Ğ³Ñ€Ğ¾Ğº: {player})'
				},
				'ar': {
					extName: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ÙˆÙ„ÙˆØ§Ø¦Ø­ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
					label_version: 'V' + version,
					docLink: 'Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚',
					leaderboard: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
					createBoard: 'Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© [BOARD]',
					submitScore: 'Ø¥Ø±Ø³Ø§Ù„ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§Ø³Ù… [NAME] Ø§Ù„Ù†Ù‚Ø§Ø· [SCORE] Ø¥Ù„Ù‰ [BOARD]',
					getTop: 'Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ù‰ [N] Ù…Ù† [BOARD]',
					getRank: 'ØªØ±ØªÙŠØ¨ Ø§Ù„Ø§Ø³Ù… [NAME] ÙÙŠ [BOARD]',
					getHighScore: 'Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø§Ø³Ù… [NAME] ÙÙŠ [BOARD]',
					resetBoard: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† [BOARD]',
					getAllData: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
					toggleDisplay: '[TOGGLE] Ù‚Ø§Ø¦Ù…Ø© [BOARD]',
					achievements: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª',
					createAchievement: 'Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ù†Ø¬Ø§Ø² ID [ID] Ø§Ù„Ø§Ø³Ù… [NAME] Ø§Ù„ÙˆØ³Ù… [TAG]',
					awardAchievement: 'Ù…Ù†Ø­ Ø¥Ù†Ø¬Ø§Ø² ID [ID] Ø§Ù„ÙˆØ³Ù… [TAG] Ù„Ù„Ø§Ø¹Ø¨ [PLAYER] (Ø§Ù„Ø§Ø³Ù… [NAME]) Ùˆ[DISPLAY]',
					isAchievementUnlocked: 'Ù‡Ù„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ID [ID] ÙÙŠ Ø§Ù„ÙˆØ³Ù… [TAG] ØªÙ… ÙØªØ­Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© [PLAYER]ØŸ',
					toggleAchievementsDisplay: '[TOGGLE] Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„ÙˆØ³Ù… [TAG] Ø§Ù„Ù„Ø§Ø¹Ø¨ [PLAYER]',
					show: 'Ø¹Ø±Ø¶',
					hide: 'Ø¥Ø®ÙØ§Ø¡',
					refresh: 'ØªØ­Ø¯ÙŠØ«',
					close: 'Ø¥ØºÙ„Ø§Ù‚',
					nameHeader: 'Ø§Ù„Ø§Ø³Ù…',
					scoreHeader: 'Ø§Ù„Ù†Ù‚Ø§Ø·',
					noData: '(Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª)',
					noAchievements: '(Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ù†Ø¬Ø§Ø²Ø§Øª)',
					moreRecords: '... {n} Ø³Ø¬Ù„Ø§Øª Ø£Ø®Ø±Ù‰',
					unlocked: 'ØªÙ… Ø§Ù„ÙØªØ­',
					locked: 'Ù…Ù‚ÙÙ„',
					leaderboardTitle: 'Ù‚Ø§Ø¦Ù…Ø©: {board}',
					achievementsTitle: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª: {tag} (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {player})'
				},
				'ja': {
					extName: 'å®Ÿç¸¾ã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°',
					label_version: 'V' + version,
					docLink: 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹',
					leaderboard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°',
					createBoard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä½œæˆ [BOARD]',
					submitScore: 'ã‚¹ã‚³ã‚¢ã‚’é€ä¿¡ åå‰ [NAME] ã‚¹ã‚³ã‚¢ [SCORE] ã¸ [BOARD]',
					getTop: '[BOARD] ã®ä¸Šä½ [N] ã‚’å–å¾—',
					getRank: '[BOARD] ã® åå‰ [NAME] ã®é †ä½',
					getHighScore: '[BOARD] ã® åå‰ [NAME] ã®æœ€é«˜ã‚¹ã‚³ã‚¢',
					resetBoard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ [BOARD]',
					getAllData: 'ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿',
					toggleDisplay: '[TOGGLE] ãƒ©ãƒ³ã‚­ãƒ³ã‚° [BOARD]',
					achievements: 'å®Ÿç¸¾',
					createAchievement: 'å®Ÿç¸¾ä½œæˆ ID [ID] åå‰ [NAME] ã‚¿ã‚° [TAG]',
					awardAchievement: 'å®Ÿç¸¾ ID [ID] ã‚¿ã‚° [TAG] ã‚’ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER] ã«ä»˜ä¸ (åå‰ [NAME]) ã¨[DISPLAY]',
					isAchievementUnlocked: 'å®Ÿç¸¾ ID [ID] ã‚¿ã‚° [TAG] ãŒ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER] ã«ã‚ˆã£ã¦è§£é™¤ã•ã‚Œã¦ã„ã‚‹ã‹',
					toggleAchievementsDisplay: '[TOGGLE] å®Ÿç¸¾ ã‚¿ã‚° [TAG] ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER]',
					show: 'è¡¨ç¤º',
					hide: 'éè¡¨ç¤º',
					refresh: 'æ›´æ–°',
					close: 'é–‰ã˜ã‚‹',
					nameHeader: 'åå‰',
					scoreHeader: 'ã‚¹ã‚³ã‚¢',
					noData: '(ãƒ‡ãƒ¼ã‚¿ãªã—)',
					noAchievements: '(å®Ÿç¸¾ãªã—)',
					moreRecords: '... ã‚ã¨ {n} ä»¶',
					unlocked: 'è§£é™¤æ¸ˆã¿',
					locked: 'ãƒ­ãƒƒã‚¯ä¸­',
					leaderboardTitle: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼š{board}',
					achievementsTitle: 'å®Ÿç¸¾ï¼š{tag}ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼š{player}ï¼‰'
				},
				'ko': {
					extName: 'ì—…ì  ë° ìˆœìœ„í‘œ',
					label_version: 'V' + version,
					docLink: 'ë¬¸ì„œ ë³´ê¸°',
					leaderboard: 'ìˆœìœ„í‘œ',
					createBoard: 'ìˆœìœ„í‘œ ìƒì„± [BOARD]',
					submitScore: 'ì ìˆ˜ ì œì¶œ ì´ë¦„ [NAME] ì ìˆ˜ [SCORE] ì— [BOARD]',
					getTop: '[BOARD] ì—ì„œ ìƒìœ„ [N] ê°€ì ¸ì˜¤ê¸°',
					getRank: '[BOARD] ì—ì„œ ì´ë¦„ [NAME] ë­í¬',
					getHighScore: '[BOARD] ì—ì„œ ì´ë¦„ [NAME] ìµœê³ ì ',
					resetBoard: 'ìˆœìœ„í‘œ ì´ˆê¸°í™” [BOARD]',
					getAllData: 'ëª¨ë“  ë°ì´í„°',
					toggleDisplay: '[TOGGLE] ìˆœìœ„í‘œ [BOARD]',
					achievements: 'ì—…ì ',
					createAchievement: 'ì—…ì  ìƒì„± ID [ID] ì´ë¦„ [NAME] íƒœê·¸ [TAG]',
					awardAchievement: 'ì—…ì  ID [ID] íƒœê·¸ [TAG] ë¥¼ í”Œë ˆì´ì–´ [PLAYER] ì—ê²Œ ìˆ˜ì—¬ (ì´ë¦„ [NAME]) ë° [DISPLAY]',
					isAchievementUnlocked: 'ì—…ì  ID [ID] íƒœê·¸ [TAG] ì´ í”Œë ˆì´ì–´ [PLAYER] ì— ì˜í•´ í•´ì œë˜ì—ˆëŠ”ê°€?',
					toggleAchievementsDisplay: '[TOGGLE] ì—…ì  íƒœê·¸ [TAG] í”Œë ˆì´ì–´ [PLAYER]',
					show: 'í‘œì‹œ',
					hide: 'ìˆ¨ê¸°ê¸°',
					refresh: 'ìƒˆë¡œê³ ì¹¨',
					close: 'ë‹«ê¸°',
					nameHeader: 'ì´ë¦„',
					scoreHeader: 'ì ìˆ˜',
					noData: '(ë°ì´í„° ì—†ìŒ)',
					noAchievements: '(ì—…ì  ì—†ìŒ)',
					moreRecords: '... {n} ê°œì˜ ì¶”ê°€ ê¸°ë¡',
					unlocked: 'í•´ì œë¨',
					locked: 'ì ê¹€',
					leaderboardTitle: 'ìˆœìœ„í‘œ: {board}',
					achievementsTitle: 'ì—…ì : {tag} (ì‚¬ìš©ì: {player})'
				},
				'pt': {
					extName: 'Conquistas e Rankings',
					label_version: 'V' + version,
					docLink: 'Ver documentaÃ§Ã£o',
					leaderboard: 'Ranking',
					createBoard: 'Criar ranking [BOARD]',
					submitScore: 'Enviar pontuaÃ§Ã£o NOME [NAME] PONT [SCORE] para [BOARD]',
					getTop: 'Obter top [N] de [BOARD]',
					getRank: 'PosiÃ§Ã£o de NOME [NAME] em [BOARD]',
					getHighScore: 'Maior pontuaÃ§Ã£o de NOME [NAME] em [BOARD]',
					resetBoard: 'Resetar [BOARD]',
					getAllData: 'Todos os dados',
					toggleDisplay: '[TOGGLE] ranking [BOARD]',
					achievements: 'Conquistas',
					createAchievement: 'Criar conquista ID [ID] NOME [NAME] TAG [TAG]',
					awardAchievement: 'Conceder conquista ID [ID] TAG [TAG] para JOGADOR [PLAYER] (nome [NAME]) e [DISPLAY] ao jogador',
					isAchievementUnlocked: 'Conquista ID [ID] TAG [TAG] desbloqueada por JOGADOR [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] conquistas TAG [TAG] JOGADOR [PLAYER]',
					show: 'Mostrar',
					hide: 'Esconder',
					refresh: 'Atualizar',
					close: 'Fechar',
					nameHeader: 'Nome',
					scoreHeader: 'Pontos',
					noData: '(sem dados)',
					noAchievements: '(sem conquistas)',
					moreRecords: '... {n} registros a mais',
					unlocked: 'Desbloqueado',
					locked: 'Bloqueado',
					leaderboardTitle: 'Ranking: {board}',
					achievementsTitle: 'Conquistas: {tag} (Jogador: {player})'
				},
				'it': {
					extName: 'Obiettivi e Classifiche',
					label_version: 'V' + version,
					docLink: 'Vedi documentazione',
					leaderboard: 'Classifica',
					createBoard: 'Crea classifica [BOARD]',
					submitScore: 'Invia punteggio NOME [NAME] PUNT [SCORE] a [BOARD]',
					getTop: 'Prendi top [N] da [BOARD]',
					getRank: 'Classifica di NOME [NAME] su [BOARD]',
					getHighScore: 'Miglior punteggio di NOME [NAME] su [BOARD]',
					resetBoard: 'Resetta [BOARD]',
					getAllData: 'Tutti i dati',
					toggleDisplay: '[TOGGLE] classifica [BOARD]',
					achievements: 'Obiettivi',
					createAchievement: 'Crea obiettivo ID [ID] NOME [NAME] TAG [TAG]',
					awardAchievement: 'Assegna obiettivo ID [ID] TAG [TAG] a GIOCATORE [PLAYER] (nome [NAME]) e [DISPLAY] al giocatore',
					isAchievementUnlocked: 'Obiettivo ID [ID] TAG [TAG] sbloccato da GIOCATORE [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] obiettivi TAG [TAG] GIOCATORE [PLAYER]',
					show: 'Mostra',
					hide: 'Nascondi',
					refresh: 'Aggiorna',
					close: 'Chiudi',
					nameHeader: 'Nome',
					scoreHeader: 'Punteggio',
					noData: '(nessun dato)',
					noAchievements: '(nessun obiettivo)',
					moreRecords: '... {n} record in piÃ¹',
					unlocked: 'Sbloccato',
					locked: 'Bloccato',
					leaderboardTitle: 'Classifica: {board}',
					achievementsTitle: 'Obiettivi: {tag} (Giocatore: {player})'
				}
			};
		}

		_detectLang() {
			try {
				const nav = (typeof navigator !== 'undefined' && navigator.language) ? navigator.language.toLowerCase() : 'en';
				if (nav.startsWith('zh')) return 'zh-cn';
				if (nav.startsWith('fr')) return 'fr';
				if (nav.startsWith('es')) return 'es';
				if (nav.startsWith('ru')) return 'ru';
				if (nav.startsWith('ar')) return 'ar';
				if (nav.startsWith('ja')) return 'ja';
				if (nav.startsWith('ko')) return 'ko';
				if (nav.startsWith('pt')) return 'pt';
				if (nav.startsWith('it')) return 'it';
				return 'en';
			} catch (e) {
				return 'en';
			}
		}

		_t(key, vars) {
			const dict = this._translations && this._translations[this._lang] ? this._translations[this._lang] : this._translations['en'];
			let s = (dict && dict[key]) ? dict[key] : (this._translations['en'][key] || key);
			if (vars && typeof vars === 'object') {
				Object.keys(vars).forEach(k => {
					s = s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(vars[k]));
				});
			}
			return s;
		}

		getInfo() {
			const B = (window.Scratch && window.Scratch.BlockType) ? window.Scratch.BlockType : { COMMAND: 'command', REPORTER: 'reporter' };
			const A = (window.Scratch && window.Scratch.ArgumentType) ? window.Scratch.ArgumentType : { STRING: 'string', NUMBER: 'number' };
			const BUTTON = (B && B.BUTTON) ? B.BUTTON : B.COMMAND;
            return {
				id: 'leaderboard_and_achievements',
				name: this._t('extName'),
				color1: '#3494fc',
				color2: '#3494fc',
				color3: '#3494fc',
				blocks: [
                    { opcode: 'label', blockType: B.LABEL, text: `â€”â€”â€” ${this._t('extName')} â€”â€”â€”` },
                    { opcode: 'label_version', blockType: B.LABEL, text: this._t('label_version')},
                    { opcode: 'docLink', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('docLink') },
					{ opcode: 'leaderboard_text', blockType: B.LABEL, text: ` ${this._t('leaderboard')}`},
					{ opcode: 'createBoard', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('createBoard'),
						arguments: { BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'submitScore', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('submitScore'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, SCORE: { type: A.NUMBER, defaultValue: 0 }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getTop', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getTop'),
						arguments: { N: { type: A.NUMBER, defaultValue: 10 }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getRank', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getRank'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getHighScore', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getHighScore'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'resetBoard', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('resetBoard'),
						arguments: { BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getAllData', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getAllData') },
					{ opcode: 'toggleDisplay', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('toggleDisplay'),
						arguments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'cloud_text', blockType: B.LABEL, text: ' äº‘å­˜å‚¨' },
					{ opcode: 'pushAllToCloud', blockType: B.COMMAND, text: 'æ¨é€å…¨éƒ¨åˆ°äº‘ç«¯' },
					{ opcode: 'pullAllFromCloud', blockType: B.COMMAND, text: 'ä»äº‘ç«¯æ‹‰å–å…¨éƒ¨' },
					{ opcode: 'setPort', blockType: B.COMMAND, text: 'è®¾ç½®ç«¯å£ [PORT]', arguments: { PORT: { type: A.STRING, defaultValue: 'default' } } },
					{ opcode: 'getPort', blockType: B.REPORTER, text: 'å½“å‰ç«¯å£' },
					{ opcode: 'setCloudAutoSync', blockType: B.COMMAND, text: 'è‡ªåŠ¨äº‘åŒæ­¥ [TOGGLE]',
						arguments: { TOGGLE: { type: A.STRING, menu: 'toggle' } } },
					{ opcode: 'achievement_text', blockType: B.LABEL, text: ` ${this._t('achievements')}`},
					{ opcode: 'createAchievement', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('createAchievement'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, NAME: { type: A.STRING, defaultValue: 'æˆå°±åç§°' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' } } },
					{ opcode: 'awardAchievement', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('awardAchievement'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' }, NAME: { type: A.STRING, defaultValue: '' }, DISPLAY: { type: A.STRING, menu: 'display' } } },
					{ opcode: 'isAchievementUnlocked', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('isAchievementUnlocked'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' } } },
					{ opcode: 'toggleAchievementsDisplay', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('toggleAchievementsDisplay'),
						arguments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' } } }
				],
				menus: {
                    toggle: [
                        { text: this._t('show'), value: 'open' },
                        { text: this._t('hide'), value: 'close' }
                    ],
 					display: [
 						{ text: this._t('show'), value: 'show' },
 						{ text: this._t('hide'), value: 'hide' }
 					]
                 }
 			};
 		}

		_storageKeyForPort() {
			return String(this.storageKey || 'achieve_and_leaderboard') + ':' + String(this._port || 'default');
		}

		_loadAll() {
			try {
				if (typeof localStorage !== 'undefined') {
					const key = this._storageKeyForPort();
					const raw = localStorage.getItem(key);
					if (raw) {
						try { return JSON.parse(raw); } catch (e) {}
					}
					const legacyRaw = localStorage.getItem(this.storageKey);
					if (legacyRaw) {
						try {
							const parsed = JSON.parse(legacyRaw);
							try { localStorage.setItem(key, JSON.stringify(parsed)); } catch (e) {}
							return parsed;
						} catch (e) {}
					}
				}
			} catch (e) {}
			return this._inMemoryStore[this._port] ? this._inMemoryStore[this._port] : {};
 		}
 
 		_saveAll(data) {
			try {
				const key = this._storageKeyForPort();
				if (typeof localStorage !== 'undefined') {
					localStorage.setItem(key, JSON.stringify(data));
				} else {
					this._inMemoryStore[this._port] = data;
				}
			} catch (e) {
				this._inMemoryStore[this._port] = data;
			}
			if (this._cloudProvider && this._cloudAutoSync && typeof this._cloudProvider.upload === 'function') {
				try {
					const payload = JSON.stringify(data);
					Promise.resolve(this._cloudProvider.upload(this._storageKeyForPort(), payload)).catch(() => {});
				} catch (e) {}
			}
 		}
 
 		registerCloudProvider(provider) {
 			if (!provider) return false;
 			this._cloudProvider = provider;
 			return true;
 		}
 
 		async _pushAllToCloud() {
			if (!this._cloudProvider || typeof this._cloudProvider.upload !== 'function') return false;
			const all = this._loadAll();
			try {
				await this._cloudProvider.upload(this._storageKeyForPort(), JSON.stringify(all));
				return true;
			} catch (e) {
				return false;
			}
 		}
 
 		async _pullAllFromCloud() {
			if (!this._cloudProvider || typeof this._cloudProvider.download !== 'function') return false;
			try {
				const raw = await this._cloudProvider.download(this._storageKeyForPort());
				if (!raw) return false;
				let parsed = {};
				try { parsed = JSON.parse(raw); } catch (e) { return false; }
				this._saveAll(parsed);
				return true;
			} catch (e) {
				return false;
			}
 		}
 
 		pushAllToCloud(args) {
 			if (typeof this._pushAllToCloud === 'function') this._pushAllToCloud().catch(() => {});
 		}
 
 		pullAllFromCloud(args) {
 			if (typeof this._pullAllFromCloud === 'function') this._pullAllFromCloud().catch(() => {});
 		}
 
 		setCloudAutoSync(args) {
 			const toggle = String((args && args.TOGGLE) || '').toLowerCase();
 			if (toggle === 'open' || toggle === 'show' || toggle === 'true' || toggle === '1') this.setCloudAutoSyncEnabled(true);
 			else if (toggle === 'close' || toggle === 'hide' || toggle === 'false' || toggle === '0') this.setCloudAutoSyncEnabled(false);
 		}
 
 		setCloudAutoSyncEnabled(enabled) {
 			this._cloudAutoSync = !!enabled;
 		}
 
 		_ensureBoard(data, board) {
 			if (!data[board]) data[board] = {};
 			return data[board];
 		}

        docLink() {
            const url = 'https://chess-brain.github.io/doc/achievements_and_leaderboards.html';
            if (typeof window === 'undefined') return;
            try {
                this._openUrl(url);
            } catch (e) {}
        }

		createBoard(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const all = this._loadAll();
			this._ensureBoard(all, board);
			this._saveAll(all);
		}

		submitScore(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const score = Number(args.SCORE) || 0;
			const all = this._loadAll();
			const b = this._ensureBoard(all, board);
			const prev = b[name];
			const now = Date.now();
			if (!prev || score > prev.score || (score === prev.score && now < prev.ts)) {
				b[name] = { score: score, ts: now };
			}
			this._saveAll(all);
		}

		getTop(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const n = Math.max(0, Math.floor(Number(args.N) || 0));
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(name => ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));
			arr.sort((a, c) => {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			const top = arr.slice(0, n).map((item, idx) => ({ rank: idx + 1, name: item.name, score: item.score }));
			try {
				return JSON.stringify(top);
			} catch (e) {
				return '[]';
			}
		}

		getRank(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(nm => ({ name: nm, score: Number(b[nm].score), ts: Number(b[nm].ts) }));
			arr.sort((a, c) => {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			for (let i = 0; i < arr.length; i++) {
				if (arr[i].name === name) return i + 1;
			}
			return 0;
		}

		getHighScore(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const all = this._loadAll();
			const b = all[board] || {};
			const entry = b[name];
			return entry ? Number(entry.score) : 0;
		}

		resetBoard(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const all = this._loadAll();
			if (all[board]) delete all[board];
			this._saveAll(all);
		}

		getAllData() {
			const all = this._loadAll();
			all.__achievements_meta = all.__achievements_meta || {};
			all.__achievements_unlocked = all.__achievements_unlocked || {};
			try {
				return JSON.stringify(all);
			} catch (e) {
				return '{}';
			}
		}

		toggleDisplay(args) {
			const toggle = String((args.TOGGLE || '')).toLowerCase();
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ').trim();
			if (toggle === 'open') {
				this._showOverlay(board);
				return;
			}
			if (toggle === 'close') {
				if (this._overlayElement && this._overlayMode === 'leaderboard') this._hideOverlay();
				return;
			}
			if (this._overlayElement && this._overlayMode === 'leaderboard' && this._overlayContext && this._overlayContext.board === board) {
				this._hideOverlay();
			} else {
				this._showOverlay(board);
			}
		}

		_ensureAchievementMeta(all) {
			if (!all.__achievements_meta) all.__achievements_meta = {};
			return all.__achievements_meta;
		}
		_ensureAchievementUnlocked(all) {
			if (!all.__achievements_unlocked) all.__achievements_unlocked = {};
			return all.__achievements_unlocked;
		}

		createAchievement(args) {
			const id = String(args.ID || '');
			const name = String(args.NAME || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			if (!id) return;
			const all = this._loadAll();
			const meta = this._ensureAchievementMeta(all);
			if (!meta[tag]) meta[tag] = {};
			meta[tag][id] = { name: name || id };
			this._saveAll(all);
		}

		awardAchievement(args) {
			const id = String(args.ID || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			const player = String(args.PLAYER || 'ç©å®¶');
			const name = String(args.NAME || '');
			if (!id) return;
			const all = this._loadAll();
			const meta = this._ensureAchievementMeta(all);
			if (!meta[tag]) meta[tag] = {};
			if (name) meta[tag][id] = { name: name };
			const unlocked = this._ensureAchievementUnlocked(all);
			if (!unlocked[player]) unlocked[player] = {};
			if (!unlocked[player][tag]) unlocked[player][tag] = {};
			unlocked[player][tag][id] = { ts: Date.now() };
			this._saveAll(all);
			const display = String((args && args.DISPLAY) || '').toLowerCase();
			if (display === 'show') {
				const displayName = (meta[tag] && meta[tag][id] && meta[tag][id].name) ? meta[tag][id].name : (name || id);
				this._showDynamicHint('ğŸ† ' + this._t('unlocked') + ': ' + displayName);
			}
		}

		isAchievementUnlocked(args) {
			const id = String(args.ID || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			const player = String(args.PLAYER || 'ç©å®¶');
			if (!id) return false;
			const all = this._loadAll();
			const unlocked = all.__achievements_unlocked || {};
			return !!(unlocked[player] && unlocked[player][tag] && unlocked[player][tag][id]);
		}

		_ensureStyles() {
			if (this._stylesInjected || typeof document === 'undefined') {
				if (typeof document !== 'undefined' && document.getElementById && document.getElementById('turbo-leaderboard-styles')) {
					this._stylesInjected = true;
				}
				return;
			}
			const css = `
				#turbo-leaderboard-overlay {
					position: fixed;
					right: 12px;
					top: 12px;
					max-height: 70vh;
					overflow: auto;
					z-index: 999999;
					background: rgba(255,255,255,0.5);
					color: #111;
					padding: 12px;
					border-radius: 12px;
					font-family: 'Helvetica Neue', Arial, sans-serif;
					font-size: 13px;
					min-width: 300px;
					box-shadow: 0 8px 24px rgba(0,0,0,0.12);
					backdrop-filter: blur(4px);
					border: 1px solid rgba(0,0,0,0.06);
				}
				#turbo-leaderboard-overlay .lb-title {
					display:flex;
					align-items:center;
					justify-content:space-between;
					gap:8px;
					margin-bottom:8px;
				}
				#turbo-leaderboard-overlay .lb-title .title-text {
					font-weight:700;
					font-size:14px;
					color: #222;
				}
				#turbo-leaderboard-overlay .lb-controls button {
					background: rgba(0,0,0,0.04);
					border: 1px solid rgba(0,0,0,0.06);
					color: #111;
					padding:4px 8px;
					border-radius:6px;
					cursor:pointer;
					font-size:12px;
				}
				#turbo-leaderboard-overlay table.lb-table {
					width:100%;
					border-collapse:collapse;
					table-layout:fixed;
				}
				#turbo-leaderboard-overlay table.lb-table th,
				#turbo-leaderboard-overlay table.lb-table td {
					padding:6px 8px;
					overflow:hidden;
					text-overflow:ellipsis;
					white-space:nowrap;
					color: #111;
				}
				#turbo-leaderboard-overlay table.lb-table th.rank,
				#turbo-leaderboard-overlay table.lb-table td.rank {
					width:40px;
					text-align:left;
				}
				#turbo-leaderboard-overlay table.lb-table td.name {
					text-align:left;
				}
				#turbo-leaderboard-overlay table.lb-table td.score {
					width:70px;
					text-align:right;
					font-weight:600;
				}
				#turbo-leaderboard-overlay .lb-row:nth-child(odd){
					background: rgba(0,0,0,0.02);
				}
				#turbo-leaderboard-overlay .badge {
					display:inline-block;
					min-width:24px;
					padding:2px 6px;
					border-radius:12px;
					font-weight:700;
					font-size:12px;
					text-align:center;
					margin-right:6px;
				}
				#turbo-leaderboard-overlay .badge.gold{ background: linear-gradient(90deg,#ffd700,#ffdd66); color:#1b1b1b; }
				#turbo-leaderboard-overlay .badge.silver{ background: linear-gradient(90deg,#e6e6e6,#cfcfcf); color:#1b1b1b; }
				#turbo-leaderboard-overlay .badge.bronze{ background: linear-gradient(90deg,#cd7f32,#d99b6a); color:#fff; }
				#turbo-leaderboard-overlay .name-wrap { max-width: 140px; display:inline-block; vertical-align:middle; }
				#turbo-leaderboard-overlay .achv-unlocked { color: #2e7d32; font-weight:700; }
				#turbo-leaderboard-overlay .achv-locked { color: #7b7b7b; }
			`;
			const style = document.createElement('style');
			style.id = 'turbo-leaderboard-styles';
			style.textContent = css;
			document.head.appendChild(style);
			this._stylesInjected = true;
		}

		_createOverlay() {
			this._ensureStyles();
			const el = document.createElement('div');
			el.id = 'turbo-leaderboard-overlay';
			el.style.display = 'none';

			const titleBar = document.createElement('div');
			titleBar.className = 'lb-title';
			const titleText = document.createElement('div');
			titleText.className = 'title-text';
			titleText.textContent = '';
			titleBar.appendChild(titleText);

			const controls = document.createElement('div');
			controls.className = 'lb-controls';
			const refreshBtn = document.createElement('button');
			refreshBtn.textContent = 'ğŸ† ' + this._t('refresh');
			refreshBtn.onclick = () => {
				if (this._overlayMode === 'leaderboard' && this._overlayContext) this._showOverlay(this._overlayContext.board);
				else if (this._overlayMode === 'achievements' && this._overlayContext) this._showAchievements(this._overlayContext.tag, this._overlayContext.player);
			};
			const closeBtn = document.createElement('button');
			closeBtn.textContent = 'ğŸ† ' + this._t('close');
			closeBtn.onclick = () => this._hideOverlay();
			controls.appendChild(refreshBtn);
			controls.appendChild(closeBtn);
			titleBar.appendChild(controls);
			el.appendChild(titleBar);

			const table = document.createElement('table');
			table.className = 'lb-table';
			const thead = document.createElement('thead');
			const htr = document.createElement('tr');
			const thRank = document.createElement('th'); thRank.className = 'rank'; thRank.textContent = '#';
			const thName = document.createElement('th'); thName.textContent = 'ğŸ† ' + this._t('nameHeader');
			const thRight = document.createElement('th'); thRight.className = 'score'; thRight.textContent = '';
			htr.appendChild(thRank); htr.appendChild(thName); htr.appendChild(thRight);
			thead.appendChild(htr);
			table.appendChild(thead);
			const tbody = document.createElement('tbody');
			tbody.className = 'lb-list';
			table.appendChild(tbody);
			el.appendChild(table);
			el._titleText = titleText;
			el._theadRight = thRight;
			el._tbody = tbody;
			return el;
		}

		_showOverlay(board) {
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(name => ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));
			arr.sort((a, c) => {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			if (!this._overlayElement) {
				this._overlayElement = this._createOverlay();
				document.body.appendChild(this._overlayElement);
			}
			this._overlayMode = 'leaderboard';
			this._overlayContext = { board };
			this._overlayElement._titleText.textContent = 'ğŸ† ' + this._t('leaderboardTitle', { board });
			this._overlayElement._theadRight.textContent = 'ğŸ† ' + this._t('scoreHeader');
			const tbody = this._overlayElement._tbody;
			tbody.innerHTML = '';
			if (arr.length === 0) {
				const tr = document.createElement('tr');
				const td = document.createElement('td');
				td.colSpan = 3;
				td.style.opacity = '0.85';
				td.textContent = 'ğŸ† ' + this._t('noData');
				tr.appendChild(td);
				tbody.appendChild(tr);
			} else {
				const max = Math.min(50, arr.length);
				for (let i = 0; i < max; i++) {
					const it = arr[i];
					const tr = document.createElement('tr');
					tr.className = 'lb-row';
					const tdRank = document.createElement('td'); tdRank.className = 'rank';
					const badge = document.createElement('span'); badge.className = 'badge';
					if (i === 0) badge.classList.add('gold'); else if (i === 1) badge.classList.add('silver'); else if (i === 2) badge.classList.add('bronze');
					badge.textContent = (i + 1);
					tdRank.appendChild(badge);
					tr.appendChild(tdRank);
					const tdName = document.createElement('td'); tdName.className = 'name';
					const nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = it.name; nameWrap.textContent = it.name;
					tdName.appendChild(nameWrap);
					tr.appendChild(tdName);
					const tdScore = document.createElement('td'); tdScore.className = 'score'; tdScore.textContent = String(it.score);
					tr.appendChild(tdScore);
					tbody.appendChild(tr);
				}
				if (arr.length > max) {
					const tr = document.createElement('tr');
					const td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.8';
					td.textContent = 'ğŸ† ' + this._t('moreRecords', { n: arr.length - max });
					tr.appendChild(td);
					tbody.appendChild(tr);
				}
			}
			this._overlayElement.style.display = 'block';
		}
		
		_showAchievements(tag, player) {
			const all = this._loadAll();
			const meta = (all.__achievements_meta && all.__achievements_meta[tag]) ? all.__achievements_meta[tag] : {};
			const unlockedForPlayer = (all.__achievements_unlocked && all.__achievements_unlocked[player] && all.__achievements_unlocked[player][tag]) ? all.__achievements_unlocked[player][tag] : {};
			if (!this._overlayElement) {
				this._overlayElement = this._createOverlay();
				document.body.appendChild(this._overlayElement);
			}
			this._overlayMode = 'achievements';
			this._overlayContext = { tag, player };
			this._overlayElement._titleText.textContent = 'ğŸ† ' + this._t('achievementsTitle', { tag, player });
			this._overlayElement._theadRight.textContent = '';
			const tbody = this._overlayElement._tbody;
			tbody.innerHTML = '';
			const ids = Object.keys(meta);
			if (ids.length === 0) {
				const tr = document.createElement('tr');
				const td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.85'; td.textContent = 'ğŸ† ' + this._t('noAchievements');
				tr.appendChild(td); tbody.appendChild(tr);
			} else {
				for (let i = 0; i < ids.length; i++) {
					const id = ids[i];
					const m = meta[id];
					const tr = document.createElement('tr'); tr.className = 'lb-row';
					const tdRank = document.createElement('td'); tdRank.className = 'rank'; tdRank.textContent = (i + 1) + '.';
					tr.appendChild(tdRank);
					const tdName = document.createElement('td'); tdName.className = 'name';
					const nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = `${m.name} (${id})`; nameWrap.textContent = m.name;
					tdName.appendChild(nameWrap); tr.appendChild(tdName);
					const tdState = document.createElement('td'); tdState.className = 'score';
					if (unlockedForPlayer && unlockedForPlayer[id]) {
						tdState.innerHTML = `<span class='achv-unlocked'>${'ğŸ† ' + this._t('unlocked')}</span>`;
					} else {
						tdState.innerHTML = `<span class='achv-locked'>${'ğŸ† ' + this._t('locked')}</span>`;
					}
					tr.appendChild(tdState);
					tbody.appendChild(tr);
				}
			}
			this._overlayElement.style.display = 'block';
		}

		_hideOverlay() {
			if (this._overlayElement) {
				this._overlayElement.style.display = 'none';
				this._overlayMode = null;
				this._overlayContext = null;
			}
		}
		_hideDocOverlay() {
			try {
				const el = (typeof document !== 'undefined') ? document.getElementById('turbo-doc-overlay') : null;
				if (el && el.parentNode) el.parentNode.removeChild(el);
			} catch (e) {}
		}
		_openUrl(url) {
			if (typeof window === 'undefined') return;
			try {
				let opened = null;
				try { opened = window.open(url, '_blank', 'noopener'); } catch (e) { opened = null; }
				if (opened) { try { opened.opener = null; opened.focus && opened.focus(); } catch (e) {} return; }
				try {
					if (window.top && window.top !== window) {
						let to = null;
						try { to = window.top.open(url, '_blank', 'noopener'); } catch (e) { to = null; }
						if (to) { try { to.opener = null; to.focus && to.focus(); } catch (e) {} return; }
					}
				} catch (e) {}
				try {
					if (typeof document !== 'undefined') {
						const a = document.createElement('a');
						a.href = url;
						a.target = '_blank';
						a.rel = 'noopener noreferrer';
						a.style.display = 'none';
						document.body.appendChild(a);
						try {
							const evt = new MouseEvent('click', { bubbles: true, cancelable: true, view: window });
							a.dispatchEvent(evt);
						} catch (e) {
							try { a.click(); } catch (e2) {}
						}
						document.body.removeChild(a);
						return;
					}
				} catch (e) {}
				try { window.location.assign(url); } catch (e) {}
			} catch (e) {}
		}
		_showDynamicHint(msg) {
			if (typeof document === 'undefined') return;
			try {
				if (!document.getElementById('turbo-achv-hint-styles')) {
					const s = document.createElement('style');
					s.id = 'turbo-achv-hint-styles';
					s.textContent = '.turbo-achv-hint{position:fixed;left:50%;transform:translateX(-50%) translateY(-8px);top:12px;background:rgba(0,0,0,0.78);color:#fff;padding:8px 12px;border-radius:10px;font-family:'Helvetica Neue',Arial,sans-serif;font-size:13px;z-index:1000000;opacity:0;transition:opacity 0.28s ease,transform 0.28s ease;pointer-events:none;box-shadow:0 6px 18px rgba(0,0,0,0.2)}.turbo-achv-hint.show{opacity:1;transform:translateX(-50%) translateY(0)}';
					document.head.appendChild(s);
				}
				let el = document.getElementById('turbo-achv-hint');
				if (!el) {
					el = document.createElement('div');
					el.id = 'turbo-achv-hint';
					el.className = 'turbo-achv-hint';
					document.body.appendChild(el);
				}
				el.textContent = String(msg || '');
				void el.offsetWidth;
				el.classList.add('show');
				if (el._timeout) clearTimeout(el._timeout);
				el._timeout = setTimeout(function () {
					el.classList.remove('show');
				}, 3000);
			} catch (e) {}
		}
		toggleAchievementsDisplay(args) {
			const toggle = String((args.TOGGLE || '')).toLowerCase();
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾').trim();
			const player = String(args.PLAYER || 'ç©å®¶').trim();
			if (toggle === 'open') {
				this._showAchievements(tag, player);
				return;
			}
			if (toggle === 'close') {
				if (this._overlayElement && this._overlayMode === 'achievements') this._hideOverlay();
				return;
			}
			if (this._overlayElement && this._overlayMode === 'achievements' && this._overlayContext && this._overlayContext.tag === tag && this._overlayContext.player === player) {
				this._hideOverlay();
			} else {
				this._showAchievements(tag, player);
			}
		}
	}

	if (window && window.Scratch && window.Scratch.extensions && window.Scratch.extensions.register) {
		window.Scratch.extensions.register(new Leaderboard());
	} else if (typeof window !== 'undefined') {
		window.LeaderboardExtension = new Leaderboard();
	} else if (typeof module !== 'undefined' && module.exports) {
		module.exports = Leaderboard;
	}
})();


```ã€‚">
<meta property="og:type" content="article">
<meta property="og:url" content="https://chess-brain.github.io/code/post/xiang-qi-nao-de-cheng-jiu-yu-pai-xing-bang.html">
<meta property="og:image" content="https://chess-brain.github.io/king.png">
<title>è±¡æ£‹è„‘çš„æˆå°±ä¸æ’è¡Œæ¦œ</title>



</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}

</style>




<body>
    <div id="header">
<h1 class="postTitle">è±¡æ£‹è„‘çš„æˆå°±ä¸æ’è¡Œæ¦œ</h1>
<div class="title-right">
    <a href="https://chess-brain.github.io/code" id="buttonHome" class="btn btn-invisible circle" title="é¦–é¡µ">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/chess-brain/code/issues/1" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="åˆ‡æ¢ä¸»é¢˜">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>è±¡æ£‹è„‘çš„æˆå°±ä¸æ’è¡Œæ¦œ</h1>
<h2>è¯´æ˜ï¼š</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå¯ä»¥å®ç°æˆå°±ä¸æ’è¡Œæ¦œçš„æ‰©å±•<br>
æˆ‘ä»¬çš„å£å·ï¼šå¹²å®Gandiçš„ç‰¹æœ‰åŠŸèƒ½ï¼ï¼ˆCCW: bushiï¼‰</p>
<h2>åŠ è½½æ–¹å¼ï¼š</h2>
<h3>TurboWarp / 02Engine / Mistium / Penguin mod: ç›®å‰æ”¯æŒ</h3>
<p>ã€æ‰©å±•ã€‘-&gt; è‡ªå®šä¹‰æ‰©å±• -&gt; æ–‡æœ¬ -&gt; ç²˜è´´å†…å®¹</p>
<h3>Gandi IDE : æš‚ä¸æ”¯æŒ</h3>
<h2>ä»£ç </h2>
<p>éœ€å¤åˆ¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre lang="js" class="notranslate"><code class="notranslate">(function () {
	class Leaderboard {
		constructor(runtime) {
			this.runtime = runtime;
			this.storageKey = 'achieve_and_leaderboard';
			this._port = 'default';
			this._inMemoryStore = {};
 			this._cloudProvider = null;
 			this._cloudAutoSync = false;
			this._overlayElement = null;
			this._overlayMode = null;
			this._overlayContext = null;
			this._stylesInjected = false;
			this._lang = this._detectLang();
			const vers_num = '1.2.0';
			const build_type = 1;
			const build_version = '001';
			const version = vers_num + ['-alpha-', '-beta-', '-release-'][build_type] + build_version;
			this._translations = {
				'zh-cn': {
					extName: 'æˆå°±ä¸æ’è¡Œæ¦œ',
					label_version: 'V' + version,
					docLink: 'æŸ¥çœ‹æ–‡æ¡£',
					leaderboard: 'æ’è¡Œæ¦œ',
					createBoard: 'åˆ›å»ºæ’è¡Œæ¦œ [BOARD]',
					submitScore: 'æäº¤åˆ†æ•° åç§° [NAME] åˆ†æ•° [SCORE] åˆ° [BOARD]',
					getTop: 'è·å–å‰ [N] å ä» [BOARD]',
					getRank: 'æŸ¥è¯¢ åç§° [NAME] åœ¨ [BOARD] çš„åæ¬¡',
					getHighScore: 'æŸ¥è¯¢ åç§° [NAME] åœ¨ [BOARD] çš„æœ€é«˜åˆ†',
					resetBoard: 'é‡ç½®æ’è¡Œæ¦œ [BOARD]',
					getAllData: 'æ•´ä¸ªæ’è¡Œæ¦œæ•°æ®',
					toggleDisplay: '[TOGGLE] æ’è¡Œæ¦œ [BOARD]',
					achievements: 'æˆå°±ç³»ç»Ÿ',
					createAchievement: 'åˆ›å»ºæˆå°± ID [ID] åç§° [NAME] æ ‡ç­¾ [TAG]',
					awardAchievement: 'é¢å‘æˆå°± ID [ID] æ ‡ç­¾ [TAG] ç»™ ç”¨æˆ· [PLAYER] ï¼ˆå¯é€‰åç§° [NAME]ï¼‰ å¹¶ [DISPLAY] ç»™ç”¨æˆ·',
					isAchievementUnlocked: 'æˆå°± ID [ID] åœ¨ æ ‡ç­¾ [TAG] æ˜¯å¦è¢« ç”¨æˆ· [PLAYER] è§£é”',
					toggleAchievementsDisplay: '[TOGGLE] æˆå°± æ ‡ç­¾ [TAG] ç”¨æˆ· [PLAYER]',
					show: 'æ˜¾ç¤º',
					hide: 'éšè—',
					refresh: 'åˆ·æ–°',
					close: 'å…³é—­',
					nameHeader: 'åç§°',
					scoreHeader: 'åˆ†æ•°',
					noData: '(æ— æ•°æ®)',
					noAchievements: '(æ— æˆå°±)',
					moreRecords: '... è¿˜æœ‰ {n} æ¡è®°å½•',
					unlocked: 'å·²è§£é”',
					locked: 'æœªè§£é”',
					leaderboardTitle: 'æ’è¡Œæ¦œï¼š{board}',
					achievementsTitle: 'æˆå°±ï¼š{tag}ï¼ˆç”¨æˆ·ï¼š{player}ï¼‰'
				},
				'en': {
					extName: 'Achievements &amp; Leaderboards',
					label_version: 'V' + version,
					docLink: 'View Docs',
					leaderboard: 'Leaderboard',
					createBoard: 'Create board [BOARD]',
					submitScore: 'Submit score NAME [NAME] SCORE [SCORE] to [BOARD]',
					getTop: 'Get top [N] from [BOARD]',
					getRank: 'Get rank of NAME [NAME] on [BOARD]',
					getHighScore: 'Get high score of NAME [NAME] on [BOARD]',
					resetBoard: 'Reset board [BOARD]',
					getAllData: 'All leaderboard data',
					toggleDisplay: '[TOGGLE] leaderboard [BOARD]',
					achievements: 'Achievements',
					createAchievement: 'Create achievement ID [ID] NAME [NAME] TAG [TAG]',
					awardAchievement: 'Award achievement ID [ID] TAG [TAG] to PLAYER [PLAYER] (opt NAME [NAME]) and [DISPLAY] to player',
					isAchievementUnlocked: 'Is achievement ID [ID] in TAG [TAG] unlocked by PLAYER [PLAYER]',
					toggleAchievementsDisplay: '[TOGGLE] achievements TAG [TAG] PLAYER [PLAYER]',
					show: 'Show',
					hide: 'Hide',
					refresh: 'Refresh',
					close: 'Close',
					nameHeader: 'Name',
					scoreHeader: 'Score',
					noData: '(no data)',
					noAchievements: '(no achievements)',
					moreRecords: '... {n} more records',
					unlocked: 'Unlocked',
					locked: 'Locked',
					leaderboardTitle: 'Leaderboard: {board}',
					achievementsTitle: 'Achievements: {tag} (Player: {player})'
				},
				'fr': {
					extName: 'SuccÃ¨s et Classements',
					label0: 'Classement &amp; SuccÃ¨s',
					label_version: 'V' + version,
					docLink: 'Voir la doc',
					leaderboard: 'Classement',
					createBoard: 'CrÃ©er classement [BOARD]',
					submitScore: 'Soumettre score NOM [NAME] SCORE [SCORE] Ã  [BOARD]',
					getTop: 'Obtenir top [N] de [BOARD]',
					getRank: 'Rang de NOM [NAME] sur [BOARD]',
					getHighScore: 'Meilleur score de NOM [NAME] sur [BOARD]',
					resetBoard: 'RÃ©initialiser [BOARD]',
					getAllData: 'Toutes les donnÃ©es',
					toggleDisplay: '[TOGGLE] classement [BOARD]',
					achievements: 'SuccÃ¨s',
					createAchievement: 'CrÃ©er succÃ¨s ID [ID] NOM [NAME] TAG [TAG]',
					awardAchievement: 'Attribuer succÃ¨s ID [ID] TAG [TAG] Ã  JOUEUR [PLAYER] (opt NOM [NAME]) et [DISPLAY] au joueur',
					isAchievementUnlocked: 'SuccÃ¨s ID [ID] TAG [TAG] dÃ©bloquÃ© par JOUEUR [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] succÃ¨s TAG [TAG] JOUEUR [PLAYER]',
					show: 'Afficher',
					hide: 'Masquer',
					refresh: 'RafraÃ®chir',
					close: 'Fermer',
					nameHeader: 'Nom',
					scoreHeader: 'Score',
					noData: '(aucune donnÃ©e)',
					noAchievements: '(aucun succÃ¨s)',
					moreRecords: '... {n} autres enregistrements',
					unlocked: 'DÃ©bloquÃ©',
					locked: 'VerrouillÃ©',
					leaderboardTitle: 'Classement : {board}',
					achievementsTitle: 'SuccÃ¨s : {tag} (Joueur : {player})'
				},
				'es': {
					extName: 'Logros y ClasificaciÃ³n',
					label_version: 'V' + version,
					docLink: 'Ver documentaciÃ³n',
					leaderboard: 'ClasificaciÃ³n',
					createBoard: 'Crear clasificaciÃ³n [BOARD]',
					submitScore: 'Enviar puntuaciÃ³n NOMBRE [NAME] PUNT [SCORE] a [BOARD]',
					getTop: 'Obtener top [N] de [BOARD]',
					getRank: 'Rango de NOMBRE [NAME] en [BOARD]',
					getHighScore: 'Mejor puntuaciÃ³n de NOMBRE [NAME] en [BOARD]',
					resetBoard: 'Reiniciar [BOARD]',
					getAllData: 'Todos los datos',
					toggleDisplay: '[TOGGLE] clasificaciÃ³n [BOARD]',
					achievements: 'Logros',
					createAchievement: 'Crear logro ID [ID] NOMBRE [NAME] TAG [TAG]',
					awardAchievement: 'Otorgar logro ID [ID] TAG [TAG] a JUGADOR [PLAYER] (opt NOMBRE [NAME]) y [DISPLAY] al jugador',
					isAchievementUnlocked: 'Â¿Logro ID [ID] TAG [TAG] desbloqueado por JUGADOR [PLAYER]?',
					toggleAchievementsDisplay: '[TOGGLE] logros TAG [TAG] JUGADOR [PLAYER]',
					show: 'Mostrar',
					hide: 'Ocultar',
					refresh: 'Actualizar',
					close: 'Cerrar',
					nameHeader: 'Nombre',
					scoreHeader: 'Puntos',
					noData: '(sin datos)',
					noAchievements: '(sin logros)',
					moreRecords: '... {n} registros mÃ¡s',
					unlocked: 'Desbloqueado',
					locked: 'Bloqueado',
					leaderboardTitle: 'ClasificaciÃ³n: {board}',
					achievementsTitle: 'Logros: {tag} (Usuario: {player})'
				},
				'ru': {
					extName: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²',
					label_version: 'V' + version,
					docLink: 'ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ',
					leaderboard: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²',
					createBoard: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ [BOARD]',
					submitScore: 'ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ñ‡ĞºĞ¸ Ğ˜ĞœĞ¯ [NAME] ĞĞ§ĞšĞ˜ [SCORE] Ğ² [BOARD]',
					getTop: 'ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ¿ [N] Ğ¸Ğ· [BOARD]',
					getRank: 'Ğ Ğ°Ğ½Ğ³ Ğ˜ĞœĞ¯ [NAME] Ğ² [BOARD]',
					getHighScore: 'Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ ÑÑ‡ĞµÑ‚ Ğ˜ĞœĞ¯ [NAME] Ğ² [BOARD]',
					resetBoard: 'Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ [BOARD]',
					getAllData: 'Ğ’ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ',
					toggleDisplay: '[TOGGLE] Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° [BOARD]',
					achievements: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ',
					createAchievement: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] Ğ˜ĞœĞ¯ [NAME] TAG [TAG]',
					awardAchievement: 'Ğ’Ñ€ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] TAG [TAG] Ğ¸Ğ³Ñ€Ğ¾ĞºÑƒ [PLAYER] (Ğ¸Ğ¼Ñ [NAME]) Ğ¸ [DISPLAY]',
					isAchievementUnlocked: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] Ğ² TAG [TAG] Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ¼ [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ TAG [TAG] Ğ˜Ğ“Ğ ĞĞš [PLAYER]',
					show: 'ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ',
					hide: 'Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ',
					refresh: 'ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ',
					close: 'Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ',
					nameHeader: 'Ğ˜Ğ¼Ñ',
					scoreHeader: 'ĞÑ‡ĞºĞ¸',
					noData: '(Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)',
					noAchievements: '(Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹)',
					moreRecords: '... ĞµÑ‰Ñ‘ {n} Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹',
					unlocked: 'Ğ Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾',
					locked: 'Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾',
					leaderboardTitle: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: {board}',
					achievementsTitle: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ: {tag} (Ğ˜Ğ³Ñ€Ğ¾Ğº: {player})'
				},
				'ar': {
					extName: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ÙˆÙ„ÙˆØ§Ø¦Ø­ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
					label_version: 'V' + version,
					docLink: 'Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚',
					leaderboard: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
					createBoard: 'Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© [BOARD]',
					submitScore: 'Ø¥Ø±Ø³Ø§Ù„ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§Ø³Ù… [NAME] Ø§Ù„Ù†Ù‚Ø§Ø· [SCORE] Ø¥Ù„Ù‰ [BOARD]',
					getTop: 'Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ù‰ [N] Ù…Ù† [BOARD]',
					getRank: 'ØªØ±ØªÙŠØ¨ Ø§Ù„Ø§Ø³Ù… [NAME] ÙÙŠ [BOARD]',
					getHighScore: 'Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø§Ø³Ù… [NAME] ÙÙŠ [BOARD]',
					resetBoard: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† [BOARD]',
					getAllData: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
					toggleDisplay: '[TOGGLE] Ù‚Ø§Ø¦Ù…Ø© [BOARD]',
					achievements: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª',
					createAchievement: 'Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ù†Ø¬Ø§Ø² ID [ID] Ø§Ù„Ø§Ø³Ù… [NAME] Ø§Ù„ÙˆØ³Ù… [TAG]',
					awardAchievement: 'Ù…Ù†Ø­ Ø¥Ù†Ø¬Ø§Ø² ID [ID] Ø§Ù„ÙˆØ³Ù… [TAG] Ù„Ù„Ø§Ø¹Ø¨ [PLAYER] (Ø§Ù„Ø§Ø³Ù… [NAME]) Ùˆ[DISPLAY]',
					isAchievementUnlocked: 'Ù‡Ù„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ID [ID] ÙÙŠ Ø§Ù„ÙˆØ³Ù… [TAG] ØªÙ… ÙØªØ­Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© [PLAYER]ØŸ',
					toggleAchievementsDisplay: '[TOGGLE] Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„ÙˆØ³Ù… [TAG] Ø§Ù„Ù„Ø§Ø¹Ø¨ [PLAYER]',
					show: 'Ø¹Ø±Ø¶',
					hide: 'Ø¥Ø®ÙØ§Ø¡',
					refresh: 'ØªØ­Ø¯ÙŠØ«',
					close: 'Ø¥ØºÙ„Ø§Ù‚',
					nameHeader: 'Ø§Ù„Ø§Ø³Ù…',
					scoreHeader: 'Ø§Ù„Ù†Ù‚Ø§Ø·',
					noData: '(Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª)',
					noAchievements: '(Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ù†Ø¬Ø§Ø²Ø§Øª)',
					moreRecords: '... {n} Ø³Ø¬Ù„Ø§Øª Ø£Ø®Ø±Ù‰',
					unlocked: 'ØªÙ… Ø§Ù„ÙØªØ­',
					locked: 'Ù…Ù‚ÙÙ„',
					leaderboardTitle: 'Ù‚Ø§Ø¦Ù…Ø©: {board}',
					achievementsTitle: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª: {tag} (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {player})'
				},
				'ja': {
					extName: 'å®Ÿç¸¾ã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°',
					label_version: 'V' + version,
					docLink: 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹',
					leaderboard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°',
					createBoard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä½œæˆ [BOARD]',
					submitScore: 'ã‚¹ã‚³ã‚¢ã‚’é€ä¿¡ åå‰ [NAME] ã‚¹ã‚³ã‚¢ [SCORE] ã¸ [BOARD]',
					getTop: '[BOARD] ã®ä¸Šä½ [N] ã‚’å–å¾—',
					getRank: '[BOARD] ã® åå‰ [NAME] ã®é †ä½',
					getHighScore: '[BOARD] ã® åå‰ [NAME] ã®æœ€é«˜ã‚¹ã‚³ã‚¢',
					resetBoard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ [BOARD]',
					getAllData: 'ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿',
					toggleDisplay: '[TOGGLE] ãƒ©ãƒ³ã‚­ãƒ³ã‚° [BOARD]',
					achievements: 'å®Ÿç¸¾',
					createAchievement: 'å®Ÿç¸¾ä½œæˆ ID [ID] åå‰ [NAME] ã‚¿ã‚° [TAG]',
					awardAchievement: 'å®Ÿç¸¾ ID [ID] ã‚¿ã‚° [TAG] ã‚’ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER] ã«ä»˜ä¸ (åå‰ [NAME]) ã¨[DISPLAY]',
					isAchievementUnlocked: 'å®Ÿç¸¾ ID [ID] ã‚¿ã‚° [TAG] ãŒ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER] ã«ã‚ˆã£ã¦è§£é™¤ã•ã‚Œã¦ã„ã‚‹ã‹',
					toggleAchievementsDisplay: '[TOGGLE] å®Ÿç¸¾ ã‚¿ã‚° [TAG] ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER]',
					show: 'è¡¨ç¤º',
					hide: 'éè¡¨ç¤º',
					refresh: 'æ›´æ–°',
					close: 'é–‰ã˜ã‚‹',
					nameHeader: 'åå‰',
					scoreHeader: 'ã‚¹ã‚³ã‚¢',
					noData: '(ãƒ‡ãƒ¼ã‚¿ãªã—)',
					noAchievements: '(å®Ÿç¸¾ãªã—)',
					moreRecords: '... ã‚ã¨ {n} ä»¶',
					unlocked: 'è§£é™¤æ¸ˆã¿',
					locked: 'ãƒ­ãƒƒã‚¯ä¸­',
					leaderboardTitle: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼š{board}',
					achievementsTitle: 'å®Ÿç¸¾ï¼š{tag}ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼š{player}ï¼‰'
				},
				'ko': {
					extName: 'ì—…ì  ë° ìˆœìœ„í‘œ',
					label_version: 'V' + version,
					docLink: 'ë¬¸ì„œ ë³´ê¸°',
					leaderboard: 'ìˆœìœ„í‘œ',
					createBoard: 'ìˆœìœ„í‘œ ìƒì„± [BOARD]',
					submitScore: 'ì ìˆ˜ ì œì¶œ ì´ë¦„ [NAME] ì ìˆ˜ [SCORE] ì— [BOARD]',
					getTop: '[BOARD] ì—ì„œ ìƒìœ„ [N] ê°€ì ¸ì˜¤ê¸°',
					getRank: '[BOARD] ì—ì„œ ì´ë¦„ [NAME] ë­í¬',
					getHighScore: '[BOARD] ì—ì„œ ì´ë¦„ [NAME] ìµœê³ ì ',
					resetBoard: 'ìˆœìœ„í‘œ ì´ˆê¸°í™” [BOARD]',
					getAllData: 'ëª¨ë“  ë°ì´í„°',
					toggleDisplay: '[TOGGLE] ìˆœìœ„í‘œ [BOARD]',
					achievements: 'ì—…ì ',
					createAchievement: 'ì—…ì  ìƒì„± ID [ID] ì´ë¦„ [NAME] íƒœê·¸ [TAG]',
					awardAchievement: 'ì—…ì  ID [ID] íƒœê·¸ [TAG] ë¥¼ í”Œë ˆì´ì–´ [PLAYER] ì—ê²Œ ìˆ˜ì—¬ (ì´ë¦„ [NAME]) ë° [DISPLAY]',
					isAchievementUnlocked: 'ì—…ì  ID [ID] íƒœê·¸ [TAG] ì´ í”Œë ˆì´ì–´ [PLAYER] ì— ì˜í•´ í•´ì œë˜ì—ˆëŠ”ê°€?',
					toggleAchievementsDisplay: '[TOGGLE] ì—…ì  íƒœê·¸ [TAG] í”Œë ˆì´ì–´ [PLAYER]',
					show: 'í‘œì‹œ',
					hide: 'ìˆ¨ê¸°ê¸°',
					refresh: 'ìƒˆë¡œê³ ì¹¨',
					close: 'ë‹«ê¸°',
					nameHeader: 'ì´ë¦„',
					scoreHeader: 'ì ìˆ˜',
					noData: '(ë°ì´í„° ì—†ìŒ)',
					noAchievements: '(ì—…ì  ì—†ìŒ)',
					moreRecords: '... {n} ê°œì˜ ì¶”ê°€ ê¸°ë¡',
					unlocked: 'í•´ì œë¨',
					locked: 'ì ê¹€',
					leaderboardTitle: 'ìˆœìœ„í‘œ: {board}',
					achievementsTitle: 'ì—…ì : {tag} (ì‚¬ìš©ì: {player})'
				},
				'pt': {
					extName: 'Conquistas e Rankings',
					label_version: 'V' + version,
					docLink: 'Ver documentaÃ§Ã£o',
					leaderboard: 'Ranking',
					createBoard: 'Criar ranking [BOARD]',
					submitScore: 'Enviar pontuaÃ§Ã£o NOME [NAME] PONT [SCORE] para [BOARD]',
					getTop: 'Obter top [N] de [BOARD]',
					getRank: 'PosiÃ§Ã£o de NOME [NAME] em [BOARD]',
					getHighScore: 'Maior pontuaÃ§Ã£o de NOME [NAME] em [BOARD]',
					resetBoard: 'Resetar [BOARD]',
					getAllData: 'Todos os dados',
					toggleDisplay: '[TOGGLE] ranking [BOARD]',
					achievements: 'Conquistas',
					createAchievement: 'Criar conquista ID [ID] NOME [NAME] TAG [TAG]',
					awardAchievement: 'Conceder conquista ID [ID] TAG [TAG] para JOGADOR [PLAYER] (nome [NAME]) e [DISPLAY] ao jogador',
					isAchievementUnlocked: 'Conquista ID [ID] TAG [TAG] desbloqueada por JOGADOR [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] conquistas TAG [TAG] JOGADOR [PLAYER]',
					show: 'Mostrar',
					hide: 'Esconder',
					refresh: 'Atualizar',
					close: 'Fechar',
					nameHeader: 'Nome',
					scoreHeader: 'Pontos',
					noData: '(sem dados)',
					noAchievements: '(sem conquistas)',
					moreRecords: '... {n} registros a mais',
					unlocked: 'Desbloqueado',
					locked: 'Bloqueado',
					leaderboardTitle: 'Ranking: {board}',
					achievementsTitle: 'Conquistas: {tag} (Jogador: {player})'
				},
				'it': {
					extName: 'Obiettivi e Classifiche',
					label_version: 'V' + version,
					docLink: 'Vedi documentazione',
					leaderboard: 'Classifica',
					createBoard: 'Crea classifica [BOARD]',
					submitScore: 'Invia punteggio NOME [NAME] PUNT [SCORE] a [BOARD]',
					getTop: 'Prendi top [N] da [BOARD]',
					getRank: 'Classifica di NOME [NAME] su [BOARD]',
					getHighScore: 'Miglior punteggio di NOME [NAME] su [BOARD]',
					resetBoard: 'Resetta [BOARD]',
					getAllData: 'Tutti i dati',
					toggleDisplay: '[TOGGLE] classifica [BOARD]',
					achievements: 'Obiettivi',
					createAchievement: 'Crea obiettivo ID [ID] NOME [NAME] TAG [TAG]',
					awardAchievement: 'Assegna obiettivo ID [ID] TAG [TAG] a GIOCATORE [PLAYER] (nome [NAME]) e [DISPLAY] al giocatore',
					isAchievementUnlocked: 'Obiettivo ID [ID] TAG [TAG] sbloccato da GIOCATORE [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] obiettivi TAG [TAG] GIOCATORE [PLAYER]',
					show: 'Mostra',
					hide: 'Nascondi',
					refresh: 'Aggiorna',
					close: 'Chiudi',
					nameHeader: 'Nome',
					scoreHeader: 'Punteggio',
					noData: '(nessun dato)',
					noAchievements: '(nessun obiettivo)',
					moreRecords: '... {n} record in piÃ¹',
					unlocked: 'Sbloccato',
					locked: 'Bloccato',
					leaderboardTitle: 'Classifica: {board}',
					achievementsTitle: 'Obiettivi: {tag} (Giocatore: {player})'
				}
			};
		}

		_detectLang() {
			try {
				const nav = (typeof navigator !== 'undefined' &amp;&amp; navigator.language) ? navigator.language.toLowerCase() : 'en';
				if (nav.startsWith('zh')) return 'zh-cn';
				if (nav.startsWith('fr')) return 'fr';
				if (nav.startsWith('es')) return 'es';
				if (nav.startsWith('ru')) return 'ru';
				if (nav.startsWith('ar')) return 'ar';
				if (nav.startsWith('ja')) return 'ja';
				if (nav.startsWith('ko')) return 'ko';
				if (nav.startsWith('pt')) return 'pt';
				if (nav.startsWith('it')) return 'it';
				return 'en';
			} catch (e) {
				return 'en';
			}
		}

		_t(key, vars) {
			const dict = this._translations &amp;&amp; this._translations[this._lang] ? this._translations[this._lang] : this._translations['en'];
			let s = (dict &amp;&amp; dict[key]) ? dict[key] : (this._translations['en'][key] || key);
			if (vars &amp;&amp; typeof vars === 'object') {
				Object.keys(vars).forEach(k =&gt; {
					s = s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(vars[k]));
				});
			}
			return s;
		}

		getInfo() {
			const B = (window.Scratch &amp;&amp; window.Scratch.BlockType) ? window.Scratch.BlockType : { COMMAND: 'command', REPORTER: 'reporter' };
			const A = (window.Scratch &amp;&amp; window.Scratch.ArgumentType) ? window.Scratch.ArgumentType : { STRING: 'string', NUMBER: 'number' };
			const BUTTON = (B &amp;&amp; B.BUTTON) ? B.BUTTON : B.COMMAND;
            return {
				id: 'leaderboard_and_achievements',
				name: this._t('extName'),
				color1: '#3494fc',
				color2: '#3494fc',
				color3: '#3494fc',
				blocks: [
                    { opcode: 'label', blockType: B.LABEL, text: `â€”â€”â€” ${this._t('extName')} â€”â€”â€”` },
                    { opcode: 'label_version', blockType: B.LABEL, text: this._t('label_version')},
                    { opcode: 'docLink', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('docLink') },
					{ opcode: 'leaderboard_text', blockType: B.LABEL, text: ` ${this._t('leaderboard')}`},
					{ opcode: 'createBoard', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('createBoard'),
						arguments: { BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'submitScore', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('submitScore'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, SCORE: { type: A.NUMBER, defaultValue: 0 }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getTop', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getTop'),
						arguments: { N: { type: A.NUMBER, defaultValue: 10 }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getRank', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getRank'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getHighScore', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getHighScore'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'resetBoard', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('resetBoard'),
						arguments: { BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getAllData', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getAllData') },
					{ opcode: 'toggleDisplay', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('toggleDisplay'),
						arguments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'cloud_text', blockType: B.LABEL, text: ' äº‘å­˜å‚¨' },
					{ opcode: 'pushAllToCloud', blockType: B.COMMAND, text: 'æ¨é€å…¨éƒ¨åˆ°äº‘ç«¯' },
					{ opcode: 'pullAllFromCloud', blockType: B.COMMAND, text: 'ä»äº‘ç«¯æ‹‰å–å…¨éƒ¨' },
					{ opcode: 'setPort', blockType: B.COMMAND, text: 'è®¾ç½®ç«¯å£ [PORT]', arguments: { PORT: { type: A.STRING, defaultValue: 'default' } } },
					{ opcode: 'getPort', blockType: B.REPORTER, text: 'å½“å‰ç«¯å£' },
					{ opcode: 'setCloudAutoSync', blockType: B.COMMAND, text: 'è‡ªåŠ¨äº‘åŒæ­¥ [TOGGLE]',
						arguments: { TOGGLE: { type: A.STRING, menu: 'toggle' } } },
					{ opcode: 'achievement_text', blockType: B.LABEL, text: ` ${this._t('achievements')}`},
					{ opcode: 'createAchievement', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('createAchievement'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, NAME: { type: A.STRING, defaultValue: 'æˆå°±åç§°' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' } } },
					{ opcode: 'awardAchievement', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('awardAchievement'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' }, NAME: { type: A.STRING, defaultValue: '' }, DISPLAY: { type: A.STRING, menu: 'display' } } },
					{ opcode: 'isAchievementUnlocked', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('isAchievementUnlocked'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' } } },
					{ opcode: 'toggleAchievementsDisplay', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('toggleAchievementsDisplay'),
						arguments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' } } }
				],
				menus: {
                    toggle: [
                        { text: this._t('show'), value: 'open' },
                        { text: this._t('hide'), value: 'close' }
                    ],
 					display: [
 						{ text: this._t('show'), value: 'show' },
 						{ text: this._t('hide'), value: 'hide' }
 					]
                 }
 			};
 		}

		_storageKeyForPort() {
			return String(this.storageKey || 'achieve_and_leaderboard') + ':' + String(this._port || 'default');
		}

		_loadAll() {
			try {
				if (typeof localStorage !== 'undefined') {
					const key = this._storageKeyForPort();
					const raw = localStorage.getItem(key);
					if (raw) {
						try { return JSON.parse(raw); } catch (e) {}
					}
					const legacyRaw = localStorage.getItem(this.storageKey);
					if (legacyRaw) {
						try {
							const parsed = JSON.parse(legacyRaw);
							try { localStorage.setItem(key, JSON.stringify(parsed)); } catch (e) {}
							return parsed;
						} catch (e) {}
					}
				}
			} catch (e) {}
			return this._inMemoryStore[this._port] ? this._inMemoryStore[this._port] : {};
 		}
 
 		_saveAll(data) {
			try {
				const key = this._storageKeyForPort();
				if (typeof localStorage !== 'undefined') {
					localStorage.setItem(key, JSON.stringify(data));
				} else {
					this._inMemoryStore[this._port] = data;
				}
			} catch (e) {
				this._inMemoryStore[this._port] = data;
			}
			if (this._cloudProvider &amp;&amp; this._cloudAutoSync &amp;&amp; typeof this._cloudProvider.upload === 'function') {
				try {
					const payload = JSON.stringify(data);
					Promise.resolve(this._cloudProvider.upload(this._storageKeyForPort(), payload)).catch(() =&gt; {});
				} catch (e) {}
			}
 		}
 
 		registerCloudProvider(provider) {
 			if (!provider) return false;
 			this._cloudProvider = provider;
 			return true;
 		}
 
 		async _pushAllToCloud() {
			if (!this._cloudProvider || typeof this._cloudProvider.upload !== 'function') return false;
			const all = this._loadAll();
			try {
				await this._cloudProvider.upload(this._storageKeyForPort(), JSON.stringify(all));
				return true;
			} catch (e) {
				return false;
			}
 		}
 
 		async _pullAllFromCloud() {
			if (!this._cloudProvider || typeof this._cloudProvider.download !== 'function') return false;
			try {
				const raw = await this._cloudProvider.download(this._storageKeyForPort());
				if (!raw) return false;
				let parsed = {};
				try { parsed = JSON.parse(raw); } catch (e) { return false; }
				this._saveAll(parsed);
				return true;
			} catch (e) {
				return false;
			}
 		}
 
 		pushAllToCloud(args) {
 			if (typeof this._pushAllToCloud === 'function') this._pushAllToCloud().catch(() =&gt; {});
 		}
 
 		pullAllFromCloud(args) {
 			if (typeof this._pullAllFromCloud === 'function') this._pullAllFromCloud().catch(() =&gt; {});
 		}
 
 		setCloudAutoSync(args) {
 			const toggle = String((args &amp;&amp; args.TOGGLE) || '').toLowerCase();
 			if (toggle === 'open' || toggle === 'show' || toggle === 'true' || toggle === '1') this.setCloudAutoSyncEnabled(true);
 			else if (toggle === 'close' || toggle === 'hide' || toggle === 'false' || toggle === '0') this.setCloudAutoSyncEnabled(false);
 		}
 
 		setCloudAutoSyncEnabled(enabled) {
 			this._cloudAutoSync = !!enabled;
 		}
 
 		_ensureBoard(data, board) {
 			if (!data[board]) data[board] = {};
 			return data[board];
 		}

        docLink() {
            const url = 'https://chess-brain.github.io/doc/achievements_and_leaderboards.html';
            if (typeof window === 'undefined') return;
            try {
                this._openUrl(url);
            } catch (e) {}
        }

		createBoard(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const all = this._loadAll();
			this._ensureBoard(all, board);
			this._saveAll(all);
		}

		submitScore(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const score = Number(args.SCORE) || 0;
			const all = this._loadAll();
			const b = this._ensureBoard(all, board);
			const prev = b[name];
			const now = Date.now();
			if (!prev || score &gt; prev.score || (score === prev.score &amp;&amp; now &lt; prev.ts)) {
				b[name] = { score: score, ts: now };
			}
			this._saveAll(all);
		}

		getTop(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const n = Math.max(0, Math.floor(Number(args.N) || 0));
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(name =&gt; ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));
			arr.sort((a, c) =&gt; {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			const top = arr.slice(0, n).map((item, idx) =&gt; ({ rank: idx + 1, name: item.name, score: item.score }));
			try {
				return JSON.stringify(top);
			} catch (e) {
				return '[]';
			}
		}

		getRank(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(nm =&gt; ({ name: nm, score: Number(b[nm].score), ts: Number(b[nm].ts) }));
			arr.sort((a, c) =&gt; {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			for (let i = 0; i &lt; arr.length; i++) {
				if (arr[i].name === name) return i + 1;
			}
			return 0;
		}

		getHighScore(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const all = this._loadAll();
			const b = all[board] || {};
			const entry = b[name];
			return entry ? Number(entry.score) : 0;
		}

		resetBoard(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const all = this._loadAll();
			if (all[board]) delete all[board];
			this._saveAll(all);
		}

		getAllData() {
			const all = this._loadAll();
			all.__achievements_meta = all.__achievements_meta || {};
			all.__achievements_unlocked = all.__achievements_unlocked || {};
			try {
				return JSON.stringify(all);
			} catch (e) {
				return '{}';
			}
		}

		toggleDisplay(args) {
			const toggle = String((args.TOGGLE || '')).toLowerCase();
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ').trim();
			if (toggle === 'open') {
				this._showOverlay(board);
				return;
			}
			if (toggle === 'close') {
				if (this._overlayElement &amp;&amp; this._overlayMode === 'leaderboard') this._hideOverlay();
				return;
			}
			if (this._overlayElement &amp;&amp; this._overlayMode === 'leaderboard' &amp;&amp; this._overlayContext &amp;&amp; this._overlayContext.board === board) {
				this._hideOverlay();
			} else {
				this._showOverlay(board);
			}
		}

		_ensureAchievementMeta(all) {
			if (!all.__achievements_meta) all.__achievements_meta = {};
			return all.__achievements_meta;
		}
		_ensureAchievementUnlocked(all) {
			if (!all.__achievements_unlocked) all.__achievements_unlocked = {};
			return all.__achievements_unlocked;
		}

		createAchievement(args) {
			const id = String(args.ID || '');
			const name = String(args.NAME || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			if (!id) return;
			const all = this._loadAll();
			const meta = this._ensureAchievementMeta(all);
			if (!meta[tag]) meta[tag] = {};
			meta[tag][id] = { name: name || id };
			this._saveAll(all);
		}

		awardAchievement(args) {
			const id = String(args.ID || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			const player = String(args.PLAYER || 'ç©å®¶');
			const name = String(args.NAME || '');
			if (!id) return;
			const all = this._loadAll();
			const meta = this._ensureAchievementMeta(all);
			if (!meta[tag]) meta[tag] = {};
			if (name) meta[tag][id] = { name: name };
			const unlocked = this._ensureAchievementUnlocked(all);
			if (!unlocked[player]) unlocked[player] = {};
			if (!unlocked[player][tag]) unlocked[player][tag] = {};
			unlocked[player][tag][id] = { ts: Date.now() };
			this._saveAll(all);
			const display = String((args &amp;&amp; args.DISPLAY) || '').toLowerCase();
			if (display === 'show') {
				const displayName = (meta[tag] &amp;&amp; meta[tag][id] &amp;&amp; meta[tag][id].name) ? meta[tag][id].name : (name || id);
				this._showDynamicHint('ğŸ† ' + this._t('unlocked') + ': ' + displayName);
			}
		}

		isAchievementUnlocked(args) {
			const id = String(args.ID || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			const player = String(args.PLAYER || 'ç©å®¶');
			if (!id) return false;
			const all = this._loadAll();
			const unlocked = all.__achievements_unlocked || {};
			return !!(unlocked[player] &amp;&amp; unlocked[player][tag] &amp;&amp; unlocked[player][tag][id]);
		}

		_ensureStyles() {
			if (this._stylesInjected || typeof document === 'undefined') {
				if (typeof document !== 'undefined' &amp;&amp; document.getElementById &amp;&amp; document.getElementById('turbo-leaderboard-styles')) {
					this._stylesInjected = true;
				}
				return;
			}
			const css = `
				#turbo-leaderboard-overlay {
					position: fixed;
					right: 12px;
					top: 12px;
					max-height: 70vh;
					overflow: auto;
					z-index: 999999;
					background: rgba(255,255,255,0.5);
					color: #111;
					padding: 12px;
					border-radius: 12px;
					font-family: "Helvetica Neue", Arial, sans-serif;
					font-size: 13px;
					min-width: 300px;
					box-shadow: 0 8px 24px rgba(0,0,0,0.12);
					backdrop-filter: blur(4px);
					border: 1px solid rgba(0,0,0,0.06);
				}
				#turbo-leaderboard-overlay .lb-title {
					display:flex;
					align-items:center;
					justify-content:space-between;
					gap:8px;
					margin-bottom:8px;
				}
				#turbo-leaderboard-overlay .lb-title .title-text {
					font-weight:700;
					font-size:14px;
					color: #222;
				}
				#turbo-leaderboard-overlay .lb-controls button {
					background: rgba(0,0,0,0.04);
					border: 1px solid rgba(0,0,0,0.06);
					color: #111;
					padding:4px 8px;
					border-radius:6px;
					cursor:pointer;
					font-size:12px;
				}
				#turbo-leaderboard-overlay table.lb-table {
					width:100%;
					border-collapse:collapse;
					table-layout:fixed;
				}
				#turbo-leaderboard-overlay table.lb-table th,
				#turbo-leaderboard-overlay table.lb-table td {
					padding:6px 8px;
					overflow:hidden;
					text-overflow:ellipsis;
					white-space:nowrap;
					color: #111;
				}
				#turbo-leaderboard-overlay table.lb-table th.rank,
				#turbo-leaderboard-overlay table.lb-table td.rank {
					width:40px;
					text-align:left;
				}
				#turbo-leaderboard-overlay table.lb-table td.name {
					text-align:left;
				}
				#turbo-leaderboard-overlay table.lb-table td.score {
					width:70px;
					text-align:right;
					font-weight:600;
				}
				#turbo-leaderboard-overlay .lb-row:nth-child(odd){
					background: rgba(0,0,0,0.02);
				}
				#turbo-leaderboard-overlay .badge {
					display:inline-block;
					min-width:24px;
					padding:2px 6px;
					border-radius:12px;
					font-weight:700;
					font-size:12px;
					text-align:center;
					margin-right:6px;
				}
				#turbo-leaderboard-overlay .badge.gold{ background: linear-gradient(90deg,#ffd700,#ffdd66); color:#1b1b1b; }
				#turbo-leaderboard-overlay .badge.silver{ background: linear-gradient(90deg,#e6e6e6,#cfcfcf); color:#1b1b1b; }
				#turbo-leaderboard-overlay .badge.bronze{ background: linear-gradient(90deg,#cd7f32,#d99b6a); color:#fff; }
				#turbo-leaderboard-overlay .name-wrap { max-width: 140px; display:inline-block; vertical-align:middle; }
				#turbo-leaderboard-overlay .achv-unlocked { color: #2e7d32; font-weight:700; }
				#turbo-leaderboard-overlay .achv-locked { color: #7b7b7b; }
			`;
			const style = document.createElement('style');
			style.id = 'turbo-leaderboard-styles';
			style.textContent = css;
			document.head.appendChild(style);
			this._stylesInjected = true;
		}

		_createOverlay() {
			this._ensureStyles();
			const el = document.createElement('div');
			el.id = 'turbo-leaderboard-overlay';
			el.style.display = 'none';

			const titleBar = document.createElement('div');
			titleBar.className = 'lb-title';
			const titleText = document.createElement('div');
			titleText.className = 'title-text';
			titleText.textContent = '';
			titleBar.appendChild(titleText);

			const controls = document.createElement('div');
			controls.className = 'lb-controls';
			const refreshBtn = document.createElement('button');
			refreshBtn.textContent = 'ğŸ† ' + this._t('refresh');
			refreshBtn.onclick = () =&gt; {
				if (this._overlayMode === 'leaderboard' &amp;&amp; this._overlayContext) this._showOverlay(this._overlayContext.board);
				else if (this._overlayMode === 'achievements' &amp;&amp; this._overlayContext) this._showAchievements(this._overlayContext.tag, this._overlayContext.player);
			};
			const closeBtn = document.createElement('button');
			closeBtn.textContent = 'ğŸ† ' + this._t('close');
			closeBtn.onclick = () =&gt; this._hideOverlay();
			controls.appendChild(refreshBtn);
			controls.appendChild(closeBtn);
			titleBar.appendChild(controls);
			el.appendChild(titleBar);

			const table = document.createElement('table');
			table.className = 'lb-table';
			const thead = document.createElement('thead');
			const htr = document.createElement('tr');
			const thRank = document.createElement('th'); thRank.className = 'rank'; thRank.textContent = '#';
			const thName = document.createElement('th'); thName.textContent = 'ğŸ† ' + this._t('nameHeader');
			const thRight = document.createElement('th'); thRight.className = 'score'; thRight.textContent = '';
			htr.appendChild(thRank); htr.appendChild(thName); htr.appendChild(thRight);
			thead.appendChild(htr);
			table.appendChild(thead);
			const tbody = document.createElement('tbody');
			tbody.className = 'lb-list';
			table.appendChild(tbody);
			el.appendChild(table);
			el._titleText = titleText;
			el._theadRight = thRight;
			el._tbody = tbody;
			return el;
		}

		_showOverlay(board) {
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(name =&gt; ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));
			arr.sort((a, c) =&gt; {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			if (!this._overlayElement) {
				this._overlayElement = this._createOverlay();
				document.body.appendChild(this._overlayElement);
			}
			this._overlayMode = 'leaderboard';
			this._overlayContext = { board };
			this._overlayElement._titleText.textContent = 'ğŸ† ' + this._t('leaderboardTitle', { board });
			this._overlayElement._theadRight.textContent = 'ğŸ† ' + this._t('scoreHeader');
			const tbody = this._overlayElement._tbody;
			tbody.innerHTML = '';
			if (arr.length === 0) {
				const tr = document.createElement('tr');
				const td = document.createElement('td');
				td.colSpan = 3;
				td.style.opacity = '0.85';
				td.textContent = 'ğŸ† ' + this._t('noData');
				tr.appendChild(td);
				tbody.appendChild(tr);
			} else {
				const max = Math.min(50, arr.length);
				for (let i = 0; i &lt; max; i++) {
					const it = arr[i];
					const tr = document.createElement('tr');
					tr.className = 'lb-row';
					const tdRank = document.createElement('td'); tdRank.className = 'rank';
					const badge = document.createElement('span'); badge.className = 'badge';
					if (i === 0) badge.classList.add('gold'); else if (i === 1) badge.classList.add('silver'); else if (i === 2) badge.classList.add('bronze');
					badge.textContent = (i + 1);
					tdRank.appendChild(badge);
					tr.appendChild(tdRank);
					const tdName = document.createElement('td'); tdName.className = 'name';
					const nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = it.name; nameWrap.textContent = it.name;
					tdName.appendChild(nameWrap);
					tr.appendChild(tdName);
					const tdScore = document.createElement('td'); tdScore.className = 'score'; tdScore.textContent = String(it.score);
					tr.appendChild(tdScore);
					tbody.appendChild(tr);
				}
				if (arr.length &gt; max) {
					const tr = document.createElement('tr');
					const td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.8';
					td.textContent = 'ğŸ† ' + this._t('moreRecords', { n: arr.length - max });
					tr.appendChild(td);
					tbody.appendChild(tr);
				}
			}
			this._overlayElement.style.display = 'block';
		}
		
		_showAchievements(tag, player) {
			const all = this._loadAll();
			const meta = (all.__achievements_meta &amp;&amp; all.__achievements_meta[tag]) ? all.__achievements_meta[tag] : {};
			const unlockedForPlayer = (all.__achievements_unlocked &amp;&amp; all.__achievements_unlocked[player] &amp;&amp; all.__achievements_unlocked[player][tag]) ? all.__achievements_unlocked[player][tag] : {};
			if (!this._overlayElement) {
				this._overlayElement = this._createOverlay();
				document.body.appendChild(this._overlayElement);
			}
			this._overlayMode = 'achievements';
			this._overlayContext = { tag, player };
			this._overlayElement._titleText.textContent = 'ğŸ† ' + this._t('achievementsTitle', { tag, player });
			this._overlayElement._theadRight.textContent = '';
			const tbody = this._overlayElement._tbody;
			tbody.innerHTML = '';
			const ids = Object.keys(meta);
			if (ids.length === 0) {
				const tr = document.createElement('tr');
				const td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.85'; td.textContent = 'ğŸ† ' + this._t('noAchievements');
				tr.appendChild(td); tbody.appendChild(tr);
			} else {
				for (let i = 0; i &lt; ids.length; i++) {
					const id = ids[i];
					const m = meta[id];
					const tr = document.createElement('tr'); tr.className = 'lb-row';
					const tdRank = document.createElement('td'); tdRank.className = 'rank'; tdRank.textContent = (i + 1) + '.';
					tr.appendChild(tdRank);
					const tdName = document.createElement('td'); tdName.className = 'name';
					const nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = `${m.name} (${id})`; nameWrap.textContent = m.name;
					tdName.appendChild(nameWrap); tr.appendChild(tdName);
					const tdState = document.createElement('td'); tdState.className = 'score';
					if (unlockedForPlayer &amp;&amp; unlockedForPlayer[id]) {
						tdState.innerHTML = `&lt;span class="achv-unlocked"&gt;${'ğŸ† ' + this._t('unlocked')}&lt;/span&gt;`;
					} else {
						tdState.innerHTML = `&lt;span class="achv-locked"&gt;${'ğŸ† ' + this._t('locked')}&lt;/span&gt;`;
					}
					tr.appendChild(tdState);
					tbody.appendChild(tr);
				}
			}
			this._overlayElement.style.display = 'block';
		}

		_hideOverlay() {
			if (this._overlayElement) {
				this._overlayElement.style.display = 'none';
				this._overlayMode = null;
				this._overlayContext = null;
			}
		}
		_hideDocOverlay() {
			try {
				const el = (typeof document !== 'undefined') ? document.getElementById('turbo-doc-overlay') : null;
				if (el &amp;&amp; el.parentNode) el.parentNode.removeChild(el);
			} catch (e) {}
		}
		_openUrl(url) {
			if (typeof window === 'undefined') return;
			try {
				let opened = null;
				try { opened = window.open(url, '_blank', 'noopener'); } catch (e) { opened = null; }
				if (opened) { try { opened.opener = null; opened.focus &amp;&amp; opened.focus(); } catch (e) {} return; }
				try {
					if (window.top &amp;&amp; window.top !== window) {
						let to = null;
						try { to = window.top.open(url, '_blank', 'noopener'); } catch (e) { to = null; }
						if (to) { try { to.opener = null; to.focus &amp;&amp; to.focus(); } catch (e) {} return; }
					}
				} catch (e) {}
				try {
					if (typeof document !== 'undefined') {
						const a = document.createElement('a');
						a.href = url;
						a.target = '_blank';
						a.rel = 'noopener noreferrer';
						a.style.display = 'none';
						document.body.appendChild(a);
						try {
							const evt = new MouseEvent('click', { bubbles: true, cancelable: true, view: window });
							a.dispatchEvent(evt);
						} catch (e) {
							try { a.click(); } catch (e2) {}
						}
						document.body.removeChild(a);
						return;
					}
				} catch (e) {}
				try { window.location.assign(url); } catch (e) {}
			} catch (e) {}
		}
		_showDynamicHint(msg) {
			if (typeof document === 'undefined') return;
			try {
				if (!document.getElementById('turbo-achv-hint-styles')) {
					const s = document.createElement('style');
					s.id = 'turbo-achv-hint-styles';
					s.textContent = '.turbo-achv-hint{position:fixed;left:50%;transform:translateX(-50%) translateY(-8px);top:12px;background:rgba(0,0,0,0.78);color:#fff;padding:8px 12px;border-radius:10px;font-family:"Helvetica Neue",Arial,sans-serif;font-size:13px;z-index:1000000;opacity:0;transition:opacity 0.28s ease,transform 0.28s ease;pointer-events:none;box-shadow:0 6px 18px rgba(0,0,0,0.2)}.turbo-achv-hint.show{opacity:1;transform:translateX(-50%) translateY(0)}';
					document.head.appendChild(s);
				}
				let el = document.getElementById('turbo-achv-hint');
				if (!el) {
					el = document.createElement('div');
					el.id = 'turbo-achv-hint';
					el.className = 'turbo-achv-hint';
					document.body.appendChild(el);
				}
				el.textContent = String(msg || '');
				void el.offsetWidth;
				el.classList.add('show');
				if (el._timeout) clearTimeout(el._timeout);
				el._timeout = setTimeout(function () {
					el.classList.remove('show');
				}, 3000);
			} catch (e) {}
		}
		toggleAchievementsDisplay(args) {
			const toggle = String((args.TOGGLE || '')).toLowerCase();
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾').trim();
			const player = String(args.PLAYER || 'ç©å®¶').trim();
			if (toggle === 'open') {
				this._showAchievements(tag, player);
				return;
			}
			if (toggle === 'close') {
				if (this._overlayElement &amp;&amp; this._overlayMode === 'achievements') this._hideOverlay();
				return;
			}
			if (this._overlayElement &amp;&amp; this._overlayMode === 'achievements' &amp;&amp; this._overlayContext &amp;&amp; this._overlayContext.tag === tag &amp;&amp; this._overlayContext.player === player) {
				this._hideOverlay();
			} else {
				this._showAchievements(tag, player);
			}
		}
	}

	if (window &amp;&amp; window.Scratch &amp;&amp; window.Scratch.extensions &amp;&amp; window.Scratch.extensions.register) {
		window.Scratch.extensions.register(new Leaderboard());
	} else if (typeof window !== 'undefined') {
		window.LeaderboardExtension = new Leaderboard();
	} else if (typeof module !== 'undefined' &amp;&amp; module.exports) {
		module.exports = Leaderboard;
	}
})();


</code></pre></div>
<div style="font-size:small;margin-top:8px;float:right;">â¤ï¸ è½¬è½½æ–‡ç« è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼â¤ï¸</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">è¯„è®º</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright Â© <span id="copyrightYear"></span> <a href="https://chess-brain.github.io/code">è±¡æ£‹è„‘çš„ä»£ç åº“</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("10/1/2025"!=""){
    var startSite=new Date("10/1/2025");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="ç½‘ç«™è¿è¡Œ"+diffDay+"å¤©"+" â€¢ ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","chess-brain/code");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}



</script>
<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>

</html>

<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>è±¡æ£‹è„‘çš„ä»£ç åº“</title><link>https://chess-brain.github.io/code</link><description>è¿™é‡Œæœ‰è®¸å¤šScratchæ‰©å±•ä»£ç ï¼</description><copyright>è±¡æ£‹è„‘çš„ä»£ç åº“</copyright><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://chess-brain.github.io/king.png</url><title>avatar</title><link>https://chess-brain.github.io/code</link></image><lastBuildDate>Fri, 26 Dec 2025 07:52:54 +0000</lastBuildDate><managingEditor>è±¡æ£‹è„‘çš„ä»£ç åº“</managingEditor><ttl>60</ttl><webMaster>è±¡æ£‹è„‘çš„ä»£ç åº“</webMaster><item><title>Morgançš„å·¥å…·ç®±</title><link>https://chess-brain.github.io/code/post/Morgan-de-gong-ju-xiang.html</link><description>```js
//æ…•ç„¶ç§‘æŠ€å®˜ç½‘https://ccwmoran.github.io
class MorganToolboxV8{
constructor(){this.lastResponse=''}
getInfo(){
return{
id:'M8',name:'Morgançš„å·¥å…·ç®±V8',color1:0x5ca05c,color2:0x5ca05c,
blocks:[
{opcode:'getDeviceModel',blockType:Scratch.BlockType.REPORTER,text:'è®¾å¤‡å‹å·'},
{opcode:'getBrowserName',blockType:Scratch.BlockType.REPORTER,text:'æµè§ˆå™¨åç§°'},
{opcode:'toggleFullscreen',blockType:Scratch.BlockType.COMMAND,text:'è¿›å…¥/é€€å‡ºå…¨å±'},
{opcode:'isTouchSupported',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦æ”¯æŒè§¦å±'},
{opcode:'generateRandomColor',blockType:Scratch.BlockType.REPORTER,text:'ç”Ÿæˆ6ä½éšæœºé¢œè‰²å€¼'},
{opcode:'generateRandomInt',blockType:Scratch.BlockType.REPORTER,text:'ç”Ÿæˆéšæœºä¸€ä¸ª [DIGITS] ä½æ•´æ•°',arguments:{DIGITS:{type:Scratch.ArgumentType.NUMBER,defaultValue:3}}},
{opcode:'isOnline',blockType:Scratch.BlockType.BOOLEAN,text:'è®¾å¤‡æ˜¯å¦è”ç½‘'},
{opcode:'isInEditor',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦åœ¨ç¼–è¾‘å™¨å†…'},
{opcode:'hasCamera',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦æœ‰æ‘„åƒå¤´'},
{opcode:'getCurrentDate',blockType:Scratch.BlockType.REPORTER,text:'è·å–å½“å‰å¹´æœˆæ—¥'},
{opcode:'getCurrentTime',blockType:Scratch.BlockType.REPORTER,text:'è·å–å½“å‰æ—¶åˆ†ç§’'},
{opcode:'getWeekday',blockType:Scratch.BlockType.REPORTER,text:'è·å–ä»Šæ—¥æ˜ŸæœŸå‡ '},
{opcode:'showAlert',blockType:Scratch.BlockType.COMMAND,text:'ä½¿ç”¨æµè§ˆå™¨å¼¹çª—ï¼ˆçº¯æ–‡æœ¬ï¼‰[TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World!'}}},
{opcode:'showPrompt',blockType:Scratch.BlockType.REPORTER,text:'ä½¿ç”¨æµè§ˆå™¨å¼¹çª—ï¼ˆè¾“å…¥æ¡†ï¼‰[QUESTION]',arguments:{QUESTION:{type:Scratch.ArgumentType.STRING,defaultValue:'è¯·è¾“å…¥å†…å®¹'}}},
{opcode:'showOptions',blockType:Scratch.BlockType.REPORTER,text:'ä½¿ç”¨æµè§ˆå™¨å¼¹çª—ï¼ˆé€‰é¡¹é€‰æ‹©ï¼‰[OPTIONS]',arguments:{OPTIONS:{type:Scratch.ArgumentType.STRING,defaultValue:'é€‰é¡¹1,é€‰é¡¹2,é€‰é¡¹3'}}},
{opcode:'showDatePicker',blockType:Scratch.BlockType.REPORTER,text:'ä½¿ç”¨æµè§ˆå™¨å¼¹çª—ï¼ˆæ—¥æœŸé€‰æ‹©ï¼‰'},
{opcode:'showColorPicker',blockType:Scratch.BlockType.REPORTER,text:'ä½¿ç”¨æµè§ˆå™¨å¼¹çª—ï¼ˆé¢œè‰²é€‰æ‹©ï¼‰'},
{opcode:'getCurrentURL',blockType:Scratch.BlockType.REPORTER,text:'å½“å‰é¡µé¢ç½‘å€'},
{opcode:'getCurrentTitle',blockType:Scratch.BlockType.REPORTER,text:'å½“å‰é¡µé¢æ ‡é¢˜'},
{opcode:'openInNewTab',blockType:Scratch.BlockType.COMMAND,text:'åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ [URL]',arguments:{URL:{type:Scratch.ArgumentType.STRING,defaultValue:'https://scratch.mit.edu'}}},
{opcode:'setPageTitle',blockType:Scratch.BlockType.COMMAND,text:'ä¿®æ”¹é¡µé¢æ ‡é¢˜ä¸º [TITLE]',arguments:{TITLE:{type:Scratch.ArgumentType.STRING,defaultValue:'æ–°æ ‡é¢˜'}}},
{opcode:'refreshPage',blockType:Scratch.BlockType.COMMAND,text:'åˆ·æ–°è¯¥é¡µé¢'},
{opcode:'copyToClipboard',blockType:Scratch.BlockType.COMMAND,text:'å¤åˆ¶ [TEXT] åˆ°å‰ªè´´æ¿',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'è¦å¤åˆ¶çš„æ–‡æœ¬'}}},
{opcode:'base64Operation',blockType:Scratch.BlockType.REPORTER,text:'base64 [OPERATION] [CONTENT]',arguments:{OPERATION:{type:Scratch.ArgumentType.STRING,menu:'base64Menu',defaultValue:'ç¼–ç '},CONTENT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World!'}}},
{opcode:'getLocationInfo',blockType:Scratch.BlockType.REPORTER,text:'æ‰€åœ¨å›½å®¶çœä»½åŸå¸‚'},
{opcode:'downloadFile',blockType:Scratch.BlockType.COMMAND,text:'ä¸‹è½½æ–‡ä»¶ å†…å®¹:[CONTENT] æ–‡ä»¶å:[FILENAME]',arguments:{CONTENT:{type:Scratch.ArgumentType.STRING,defaultValue:'æ–‡ä»¶å†…å®¹'},FILENAME:{type:Scratch.ArgumentType.STRING,defaultValue:'example.txt'}}},
{opcode:'calculateDaysBetween',blockType:Scratch.BlockType.REPORTER,text:'ä» [START] åˆ° [END] æœ‰å‡ å¤©',arguments:{START:{type:Scratch.ArgumentType.STRING,defaultValue:'2025.1.1'},END:{type:Scratch.ArgumentType.STRING,defaultValue:'2025.12.31'}}},
{opcode:'closeCurrentPage',blockType:Scratch.BlockType.COMMAND,text:'å…³é—­å½“å‰é¡µé¢'},
{opcode:'generateRandomEmojis',blockType:Scratch.BlockType.REPORTER,text:'ç»™å‡º [COUNT] ä¸ªéšæœºemojiè¡¨æƒ…ç¬¦å·',arguments:{COUNT:{type:Scratch.ArgumentType.NUMBER,defaultValue:5}}},
{opcode:'runHTMLCode',blockType:Scratch.BlockType.COMMAND,text:'è¿è¡Œhtmlä»£ç ï¼š[HTML_CODE]',arguments:{HTML_CODE:{type:Scratch.ArgumentType.STRING,defaultValue:'&lt;div&gt;Hello World!&lt;/div&gt;'}}},
{opcode:'getBatteryLevel',blockType:Scratch.BlockType.REPORTER,text:'è·å–ç”µæ± ç”µé‡ç™¾åˆ†æ¯”'},
{opcode:'vibrateDevice',blockType:Scratch.BlockType.COMMAND,text:'æŒ¯åŠ¨è®¾å¤‡ [DURATION] æ¯«ç§’',arguments:{DURATION:{type:Scratch.ArgumentType.NUMBER,defaultValue:200}}},
{opcode:'shareContent',blockType:Scratch.BlockType.COMMAND,text:'åˆ†äº«å†…å®¹ [TEXT] [URL]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'çœ‹çœ‹è¿™ä¸ª!'},URL:{type:Scratch.ArgumentType.STRING,defaultValue:window.location.href}}},
{opcode:'getScreenResolution',blockType:Scratch.BlockType.REPORTER,text:'è·å–å±å¹•åˆ†è¾¨ç‡'},
{opcode:'checkNetworkSpeed',blockType:Scratch.BlockType.REPORTER,text:'æ£€æµ‹ç½‘ç»œè¿æ¥é€Ÿåº¦'},
{opcode:'getClipboardText',blockType:Scratch.BlockType.REPORTER,text:'è·å–å‰ªè´´æ¿æ–‡æœ¬'},
{opcode:'takeScreenshot',blockType:Scratch.BlockType.COMMAND,text:'æˆªå–å±å¹•æˆªå›¾'},
{opcode:'getSystemTheme',blockType:Scratch.BlockType.REPORTER,text:'è·å–ç³»ç»Ÿä¸»é¢˜æ¨¡å¼'},
{opcode:'getUserLanguage',blockType:Scratch.BlockType.REPORTER,text:'è·å–ç³»ç»Ÿè¯­è¨€'},
{opcode:'getCPUInfo',blockType:Scratch.BlockType.REPORTER,text:'è·å–CPUæ ¸å¿ƒæ•°'},
{opcode:'isCookieEnabled',blockType:Scratch.BlockType.BOOLEAN,text:'Cookieæ˜¯å¦å¯ç”¨'},
{opcode:'getPageFavicon',blockType:Scratch.BlockType.REPORTER,text:'è·å–ç½‘ç«™å›¾æ ‡URL'},
{opcode:'getMemoryInfo',blockType:Scratch.BlockType.REPORTER,text:'è·å–å†…å­˜ä¿¡æ¯'},
{opcode:'getUserAgent',blockType:Scratch.BlockType.REPORTER,text:'è·å–æµè§ˆå™¨UserAgent'},
{opcode:'getViewportSize',blockType:Scratch.BlockType.REPORTER,text:'è·å–è§†å£å¤§å°'},
{opcode:'isJavaScriptEnabled',blockType:Scratch.BlockType.BOOLEAN,text:'JavaScriptæ˜¯å¦å¯ç”¨'},
{opcode:'getPlatformInfo',blockType:Scratch.BlockType.REPORTER,text:'è·å–å¹³å°ä¿¡æ¯'},
{opcode:'getConnectionType',blockType:Scratch.BlockType.REPORTER,text:'è·å–ç½‘ç»œè¿æ¥ç±»å‹'},
{opcode:'getPageLoadTime',blockType:Scratch.BlockType.REPORTER,text:'è·å–é¡µé¢åŠ è½½æ—¶é—´'},
{opcode:'getScrollPosition',blockType:Scratch.BlockType.REPORTER,text:'è·å–æ»šåŠ¨ä½ç½®'},
{opcode:'isDoNotTrackEnabled',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦å¯ç”¨ç¦æ­¢è·Ÿè¸ª'},
{opcode:'getReferrer',blockType:Scratch.BlockType.REPORTER,text:'è·å–æ¥æºé¡µé¢'},
{opcode:'getTimezone',blockType:Scratch.BlockType.REPORTER,text:'è·å–æ—¶åŒºä¿¡æ¯'},
{opcode:'getDeviceOrientation',blockType:Scratch.BlockType.REPORTER,text:'è·å–è®¾å¤‡æ–¹å‘'},
{opcode:'getNetworkLatency',blockType:Scratch.BlockType.REPORTER,text:'æ£€æµ‹ç½‘ç»œå»¶è¿Ÿ'},
{opcode:'getStorageUsage',blockType:Scratch.BlockType.REPORTER,text:'è·å–å­˜å‚¨ä½¿ç”¨æƒ…å†µ'},
{opcode:'isPWAInstalled',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦ä¸ºPWAåº”ç”¨'},
{opcode:'getMediaDevices',blockType:Scratch.BlockType.REPORTER,text:'è·å–åª’ä½“è®¾å¤‡åˆ—è¡¨'},
{opcode:'createQRCode',blockType:Scratch.BlockType.REPORTER,text:'ç”ŸæˆäºŒç»´ç  [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'https://scratch.mit.edu'}}},
{opcode:'speakText',blockType:Scratch.BlockType.COMMAND,text:'æœ—è¯»æ–‡æœ¬ [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},
{opcode:'stopSpeaking',blockType:Scratch.BlockType.COMMAND,text:'åœæ­¢æœ—è¯»'},
{opcode:'getGeolocation',blockType:Scratch.BlockType.REPORTER,text:'è·å–åœ°ç†ä½ç½®åæ ‡'},
{opcode:'getSunriseSunset',blockType:Scratch.BlockType.REPORTER,text:'è·å–æ—¥å‡ºæ—¥è½æ—¶é—´'},
{opcode:'calculateAge',blockType:Scratch.BlockType.REPORTER,text:'è®¡ç®—å¹´é¾„ ç”Ÿæ—¥:[BIRTHDAY]',arguments:{BIRTHDAY:{type:Scratch.ArgumentType.STRING,defaultValue:'2000.1.1'}}},
{opcode:'countdownTimer',blockType:Scratch.BlockType.REPORTER,text:'å€’è®¡æ—¶ [TARGET_TIME]',arguments:{TARGET_TIME:{type:Scratch.ArgumentType.STRING,defaultValue:'2025-12-31 23:59:59'}}},
{opcode:'getMoonPhase',blockType:Scratch.BlockType.REPORTER,text:'è·å–ä»Šæ—¥æœˆç›¸'},
{opcode:'generatePassword',blockType:Scratch.BlockType.REPORTER,text:'ç”Ÿæˆå¯†ç  é•¿åº¦:[LENGTH]',arguments:{LENGTH:{type:Scratch.ArgumentType.NUMBER,defaultValue:12}}},
{opcode:'analyzeText',blockType:Scratch.BlockType.REPORTER,text:'åˆ†ææ–‡æœ¬ [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},
{opcode:'getCurrentSeason',blockType:Scratch.BlockType.REPORTER,text:'è·å–å½“å‰å­£èŠ‚'},
{opcode:'isLeapYear',blockType:Scratch.BlockType.BOOLEAN,text:'[YEAR] æ˜¯å¦ä¸ºé—°å¹´',arguments:{YEAR:{type:Scratch.ArgumentType.NUMBER,defaultValue:2024}}},
{opcode:'getURLParameters',blockType:Scratch.BlockType.REPORTER,text:'è·å–URLå‚æ•°'},
{opcode:'setLocalStorage',blockType:Scratch.BlockType.COMMAND,text:'æœ¬åœ°å­˜å‚¨ [KEY] [VALUE]',arguments:{KEY:{type:Scratch.ArgumentType.STRING,defaultValue:'key'},VALUE:{type:Scratch.ArgumentType.STRING,defaultValue:'value'}}},
{opcode:'getLocalStorage',blockType:Scratch.BlockType.REPORTER,text:'è¯»å–æœ¬åœ°å­˜å‚¨ [KEY]',arguments:{KEY:{type:Scratch.ArgumentType.STRING,defaultValue:'key'}}},
{opcode:'removeLocalStorage',blockType:Scratch.BlockType.COMMAND,text:'åˆ é™¤æœ¬åœ°å­˜å‚¨ [KEY]',arguments:{KEY:{type:Scratch.ArgumentType.STRING,defaultValue:'key'}}},
{opcode:'clearLocalStorage',blockType:Scratch.BlockType.COMMAND,text:'æ¸…ç©ºæœ¬åœ°å­˜å‚¨'},
{opcode:'getPerformanceMetrics',blockType:Scratch.BlockType.REPORTER,text:'è·å–æ€§èƒ½æŒ‡æ ‡'},
{opcode:'detectAdBlocker',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦å¯ç”¨å¹¿å‘Šæ‹¦æˆªå™¨'},
{opcode:'getPageVisibility',blockType:Scratch.BlockType.REPORTER,text:'è·å–é¡µé¢å¯è§çŠ¶æ€'},
{opcode:'createBlobURL',blockType:Scratch.BlockType.REPORTER,text:'åˆ›å»ºBlob URL å†…å®¹:[CONTENT] ç±»å‹:[TYPE]',arguments:{CONTENT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'},TYPE:{type:Scratch.ArgumentType.STRING,defaultValue:'text/plain'}}},
{opcode:'revokeBlobURL',blockType:Scratch.BlockType.COMMAND,text:'æ’¤é”€Blob URL [URL]',arguments:{URL:{type:Scratch.ArgumentType.STRING,defaultValue:'blob:https://example.com'}}},
{opcode:'getElementCount',blockType:Scratch.BlockType.REPORTER,text:'è·å–é¡µé¢å…ƒç´ æ•°é‡ [SELECTOR]',arguments:{SELECTOR:{type:Scratch.ArgumentType.STRING,defaultValue:'div'}}},
{opcode:'checkFontSupport',blockType:Scratch.BlockType.REPORTER,text:'æ£€æŸ¥å­—ä½“æ”¯æŒ [FONT]',arguments:{FONT:{type:Scratch.ArgumentType.STRING,defaultValue:'Arial'}}},
{opcode:'getCSSVariable',blockType:Scratch.BlockType.REPORTER,text:'è·å–CSSå˜é‡å€¼ [VAR_NAME]',arguments:{VAR_NAME:{type:Scratch.ArgumentType.STRING,defaultValue:'--main-color'}}},
{opcode:'setCSSVariable',blockType:Scratch.BlockType.COMMAND,text:'è®¾ç½®CSSå˜é‡ [VAR_NAME] [VALUE]',arguments:{VAR_NAME:{type:Scratch.ArgumentType.STRING,defaultValue:'--main-color'},VALUE:{type:Scratch.ArgumentType.STRING,defaultValue:'#5ca05c'}}},
{opcode:'createObjectURL',blockType:Scratch.BlockType.REPORTER,text:'åˆ›å»ºå¯¹è±¡URL æ–‡ä»¶:[FILE]',arguments:{FILE:{type:Scratch.ArgumentType.STRING,defaultValue:'data:text/plain,Hello'}}},
{opcode:'measureTextWidth',blockType:Scratch.BlockType.REPORTER,text:'æµ‹é‡æ–‡æœ¬å®½åº¦ [TEXT] å­—ä½“:[FONT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'},FONT:{type:Scratch.ArgumentType.STRING,defaultValue:'16px Arial'}}},
{opcode:'getScrollbarWidth',blockType:Scratch.BlockType.REPORTER,text:'è·å–æ»šåŠ¨æ¡å®½åº¦'},
{opcode:'isReduceMotionEnabled',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦å¯ç”¨å‡å°‘åŠ¨ç”»'},
{opcode:'detectIncognitoMode',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦å¤„äºæ— ç—•æ¨¡å¼'},
{opcode:'getDeviceMotion',blockType:Scratch.BlockType.REPORTER,text:'è·å–è®¾å¤‡åŠ é€Ÿåº¦'},
{opcode:'createHash',blockType:Scratch.BlockType.REPORTER,text:'ç”Ÿæˆå“ˆå¸Œå€¼ [ALGORITHM] [TEXT]',arguments:{ALGORITHM:{type:Scratch.ArgumentType.STRING,menu:'hashMenu',defaultValue:'MD5'},TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},
{opcode:'compressText',blockType:Scratch.BlockType.REPORTER,text:'å‹ç¼©æ–‡æœ¬ [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},
{opcode:'decompressText',blockType:Scratch.BlockType.REPORTER,text:'è§£å‹æ–‡æœ¬ [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'eJzzSM3JyVcIzy/KSVEEABK5A5A='}}},
{opcode:'detectDarkPattern',blockType:Scratch.BlockType.BOOLEAN,text:'æ£€æµ‹æ·±è‰²æ¨¡å¼åå¥½'},
{opcode:'getAudioContext',blockType:Scratch.BlockType.REPORTER,text:'è·å–éŸ³é¢‘ä¸Šä¸‹æ–‡çŠ¶æ€'},
{opcode:'calculateTextReadTime',blockType:Scratch.BlockType.REPORTER,text:'è®¡ç®—æ–‡æœ¬é˜…è¯»æ—¶é—´ [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},
{opcode:'generateUUID',blockType:Scratch.BlockType.REPORTER,text:'ç”ŸæˆUUID'},
{opcode:'checkImageExists',blockType:Scratch.BlockType.BOOLEAN,text:'æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å­˜åœ¨ [URL]',arguments:{URL:{type:Scratch.ArgumentType.STRING,defaultValue:'https://example.com/image.jpg'}}},
{opcode:'getCookieValue',blockType:Scratch.BlockType.REPORTER,text:'è·å–Cookieå€¼ [NAME]',arguments:{NAME:{type:Scratch.ArgumentType.STRING,defaultValue:'session'}}},
{opcode:'setCookieValue',blockType:Scratch.BlockType.COMMAND,text:'è®¾ç½®Cookie [NAME] [VALUE] [DAYS]',arguments:{NAME:{type:Scratch.ArgumentType.STRING,defaultValue:'session'},VALUE:{type:Scratch.ArgumentType.STRING,defaultValue:'value'},DAYS:{type:Scratch.ArgumentType.NUMBER,defaultValue:7}}},
{opcode:'getBatteryStatus',blockType:Scratch.BlockType.REPORTER,text:'è·å–ç”µæ± çŠ¶æ€è¯¦æƒ…'},
{opcode:'detectIdleState',blockType:Scratch.BlockType.REPORTER,text:'æ£€æµ‹ç”¨æˆ·ç©ºé—²çŠ¶æ€'},
{opcode:'calculateDistance',blockType:Scratch.BlockType.REPORTER,text:'è®¡ç®—ä¸¤ç‚¹è·ç¦» ç‚¹1:[POINT1] ç‚¹2:[POINT2]',arguments:{POINT1:{type:Scratch.ArgumentType.STRING,defaultValue:'0,0'},POINT2:{type:Scratch.ArgumentType.STRING,defaultValue:'3,4'}}},
{opcode:'generateLoremIpsum',blockType:Scratch.BlockType.REPORTER,text:'ç”ŸæˆLorem Ipsumæ–‡æœ¬ [WORDS]è¯',arguments:{WORDS:{type:Scratch.ArgumentType.NUMBER,defaultValue:50}}},
{opcode:'checkSSLStatus',blockType:Scratch.BlockType.BOOLEAN,text:'å½“å‰é¡µé¢æ˜¯å¦ä½¿ç”¨HTTPS'},
{opcode:'getPageLoadSize',blockType:Scratch.BlockType.REPORTER,text:'è·å–é¡µé¢åŠ è½½èµ„æºå¤§å°'},
{opcode:'detectPrintSupport',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦æ”¯æŒæ‰“å°åŠŸèƒ½'},
{opcode:'createDataURL',blockType:Scratch.BlockType.REPORTER,text:'åˆ›å»ºData URL å†…å®¹:[CONTENT] ç±»å‹:[TYPE]',arguments:{CONTENT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello'},TYPE:{type:Scratch.ArgumentType.STRING,defaultValue:'text/plain'}}},
{opcode:'getActiveElement',blockType:Scratch.BlockType.REPORTER,text:'è·å–å½“å‰ç„¦ç‚¹å…ƒç´ '},
{opcode:'checkWebGLSupport',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦æ”¯æŒWebGL'},
{opcode:'getSelectionText',blockType:Scratch.BlockType.REPORTER,text:'è·å–é€‰ä¸­æ–‡æœ¬'},
{opcode:'detectPointerType',blockType:Scratch.BlockType.REPORTER,text:'æ£€æµ‹æŒ‡é’ˆè®¾å¤‡ç±»å‹'},
{opcode:'calculateAspectRatio',blockType:Scratch.BlockType.REPORTER,text:'è®¡ç®—å®½é«˜æ¯” å®½:[WIDTH] é«˜:[HEIGHT]',arguments:{WIDTH:{type:Scratch.ArgumentType.NUMBER,defaultValue:16},HEIGHT:{type:Scratch.ArgumentType.NUMBER,defaultValue:9}}},
{opcode:'generateGradient',blockType:Scratch.BlockType.REPORTER,text:'ç”ŸæˆCSSæ¸å˜ [COLOR1] [COLOR2]',arguments:{COLOR1:{type:Scratch.ArgumentType.STRING,defaultValue:'#FF0000'},COLOR2:{type:Scratch.ArgumentType.STRING,defaultValue:'#0000FF'}}},
{opcode:'checkServiceWorker',blockType:Scratch.BlockType.BOOLEAN,text:'æ˜¯å¦æ³¨å†ŒService Worker'}],
menus:{
base64Menu:{items:['ç¼–ç ','è§£ç ']},
hashMenu:{items:['MD5','SHA-1','SHA-256','SHA-512']}
},
docsURI:'https://ccwmoran.github.io'}}

getDeviceModel(){let e=navigator.userAgent;return/iPhone/.test(e)?'iPhone':/iPad/.test(e)?'iPad':/Android/.test(e)?'Androidè®¾å¤‡':/Windows/.test(e)?'Windowsç”µè„‘':/Mac/.test(e)?'Macç”µè„‘':/Linux/.test(e)?'Linuxç”µè„‘':'æœªçŸ¥è®¾å¤‡'}
getBrowserName(){let e=navigator.userAgent;return e.indexOf('Chrome')&gt;-1&amp;&amp;e.indexOf('Edge')===-1?'Chrome':e.indexOf('Firefox')&gt;-1?'Firefox':e.indexOf('Safari')&gt;-1&amp;&amp;e.indexOf('Chrome')===-1?'Safari':e.indexOf('Edge')&gt;-1?'Edge':e.indexOf('Opera')&gt;-1?'Opera':e.indexOf('MSIE')&gt;-1||e.indexOf('Trident')&gt;-1?'Internet Explorer':'æœªçŸ¥æµè§ˆå™¨'}
toggleFullscreen(){if(!document.fullscreenElement){document.documentElement.requestFullscreen?.()||document.documentElement.mozRequestFullScreen?.()||document.documentElement.webkitRequestFullscreen?.()||document.documentElement.msRequestFullscreen?.()}else{document.exitFullscreen?.()||document.mozCancelFullScreen?.()||document.webkitExitFullscreen?.()||document.msExitFullscreen?.()}}
isTouchSupported(){return'ontouchstart'in window||navigator.maxTouchPoints&gt;0}
generateRandomColor(){let e='0123456789ABCDEF',t='#';for(let o=0;o&lt;6;o++)t+=e[Math.floor(Math.random()*16)];return t}
generateRandomInt(e){let t=e.DIGITS,o=Math.pow(10,t-1),n=Math.pow(10,t)-1;return Math.floor(Math.random()*(n-o+1))+o}
isOnline(){return navigator.onLine}
isInEditor(){return window.location.href.indexOf('scratch.mit.edu')&gt;-1&amp;&amp;window.location.href.indexOf('/projects/')&gt;-1}
hasCamera(){return new Promise(e=&gt;{navigator.mediaDevices?.enumerateDevices?.().then(t=&gt;{e(t.some(e=&gt;e.kind==='videoinput'))}).catch(()=&gt;e(false))})}
getCurrentDate(){let e=new Date();return e.getFullYear()+'-'+String(e.getMonth()+1).padStart(2,'0')+'-'+String(e.getDate()).padStart(2,'0')}
getCurrentTime(){let e=new Date();return String(e.getHours()).padStart(2,'0')+':'+String(e.getMinutes()).padStart(2,'0')+':'+String(e.getSeconds()).padStart(2,'0')}
getWeekday(){return['æ˜ŸæœŸæ—¥','æ˜ŸæœŸä¸€','æ˜ŸæœŸäºŒ','æ˜ŸæœŸä¸‰','æ˜ŸæœŸå››','æ˜ŸæœŸäº”','æ˜ŸæœŸå…­'][new Date().getDay()]}
showAlert(e){alert(e.TEXT)}
showPrompt(e){return prompt(e.QUESTION)}
showOptions(e){let t=e.OPTIONS.split(','),o='&lt;div style='font-family:Arial,sans-serif;padding:10px;'&gt;&lt;p style='margin-top:0;'&gt;è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹:&lt;/p&gt;';t.forEach((e,n)=&gt;{o+=`&lt;label style='display:block;margin:5px 0;'&gt;&lt;input type='radio' name='option' value='${e}' ${0===n?'checked':''}&gt;${e}&lt;/label&gt;`});o+='&lt;/div&gt;';let n=this.showCustomDialog('é€‰æ‹©é€‰é¡¹',o);return n||t[0]||''}
showDatePicker(){let e=document.createElement('input');e.type='date',e.showPicker();return e.value||new Date().toISOString().slice(0,10)}
showColorPicker(){let e=document.createElement('input');e.type='color',e.showPicker();return e.value||'#000000'}
showCustomDialog(e,t,o=!1){return new Promise(n=&gt;{let c=document.createElement('div');c.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;justify-content:center;align-items:center;z-index:10000';let r=document.createElement('div');r.style.cssText='background:white;border-radius:8px;padding:0;min-width:300px;max-width:90%;box-shadow:0 4px 20px rgba(0,0,0,0.3)';let i=document.createElement('div');i.style.cssText='background:#5ca05c;color:white;padding:10px 15px;border-radius:8px 8px 0 0;font-weight:bold';i.textContent=e;let a=document.createElement('div');a.innerHTML=t;let l=document.createElement('div');l.style.cssText='display:flex;justify-content:flex-end;padding:10px 15px;border-top:1px solid #eee';let s=document.createElement('button');s.textContent='å–æ¶ˆ',s.style.cssText='margin-right:10px;padding:5px 15px;background:#f0f0f0;border:1px solid #ccc;border-radius:4px;cursor:pointer';let d=document.createElement('button');d.textContent='ç¡®å®š',d.style.cssText='padding:5px 15px;background:#5ca05c;color:white;border:none;border-radius:4px;cursor:pointer';l.appendChild(s),l.appendChild(d),r.appendChild(i),r.appendChild(a),r.appendChild(l),c.appendChild(r),document.body.appendChild(c);let u=t=&gt;{document.body.removeChild(c),n(t)};s.onclick=()=&gt;u(null),d.onclick=()=&gt;{let e=o?a.querySelector('input')?.value:a.querySelector('input[name='option']:checked')?.value;u(e)},c.onclick=e=&gt;{e.target===c&amp;&amp;u(null)}})}
getCurrentURL(){return window.location.href}
getCurrentTitle(){return document.title}
openInNewTab(e){window.open(e.URL,'_blank')}
setPageTitle(e){document.title=e.TITLE}
refreshPage(){window.location.reload()}
copyToClipboard(e){let t=document.createElement('textarea');t.value=e.TEXT,document.body.appendChild(t),t.select();try{document.execCommand('copy')}catch(e){}document.body.removeChild(t)}
base64Operation(e){let t=e.OPERATION,o=e.CONTENT;try{return'ç¼–ç '===t?btoa(unescape(encodeURIComponent(o))):decodeURIComponent(escape(atob(o)))}catch(e){return'ç¼–ç '===t?'ç¼–ç å¤±è´¥':'è§£ç å¤±è´¥'}}
getLocationInfo(){return new Promise(e=&gt;{fetch('https://ipapi.co/json/').then(t=&gt;t.json()).then(t=&gt;{e(t.country_name&amp;&amp;t.region&amp;&amp;t.city?`${t.country_name}-${t.region}-${t.city}`:'ä½ç½®ä¿¡æ¯ä¸å¯ç”¨')}).catch(()=&gt;e('ä½ç½®æœåŠ¡æš‚æ—¶ä¸å¯ç”¨'))})}
downloadFile(e){let t=e.CONTENT,o=e.FILENAME,n=new Blob([t],{type:'text/plain;charset=utf-8'}),c=URL.createObjectURL(n),r=document.createElement('a');r.href=c,r.download=o,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(c)}
calculateDaysBetween(e){let t=e.START,o=e.END,n=new Date(t.replace(/\./g,'/')),c=new Date(o.replace(/\./g,'/'));if(isNaN(n)||isNaN(c))return'æ—¥æœŸæ ¼å¼é”™è¯¯';let r=Math.abs(c-n),i=Math.ceil(r/(1e3*60*60*24));return i}
closeCurrentPage(){window.close()}
generateRandomEmojis(e){let t=e.COUNT,o=['ğŸ˜€','ğŸ˜‚','ğŸ¥°','ğŸ˜','ğŸ¤©','ğŸ˜','ğŸ¤—','ğŸ™‚','ğŸ˜Š','ğŸ˜‡','ğŸ¥³','ğŸ˜œ','ğŸ¤ª','ğŸ˜‹','ğŸ˜›','ğŸ‘','ğŸ‘','â¤ï¸','ğŸ”¥','â­','ğŸŒˆ','ğŸ‰','ğŸ','ğŸ‚','ğŸˆ','ğŸ’¯','âœ¨','ğŸŒŸ','ğŸ’«','ğŸ’¥','ğŸ’–','ğŸ’•','ğŸ’','ğŸ’“','ğŸ’—','ğŸ”¥','ğŸŒŸ','ğŸ’«','â­','ğŸŒˆ','ğŸŒ','ğŸŒ»','ğŸŒ¸','ğŸŒº','ğŸ€','ğŸµ','ğŸ¶','ğŸ¨','ğŸ†','ğŸ®','ğŸ¯','âš½','ğŸ€','ğŸ¾','ğŸ','ğŸ±'],n='';for(let e=0;e&lt;t;e++)n+=o[Math.floor(Math.random()*o.length)];return n}
runHTMLCode(e){try{let t=document.createElement('div');t.innerHTML=e.HTML_CODE,document.body.appendChild(t)}catch(e){}}
getBatteryLevel(){return new Promise(e=&gt;{if(navigator.getBattery){navigator.getBattery().then(t=&gt;{e(Math.round(t.level*100)+'%')}).catch(()=&gt;e('æœªçŸ¥'))}else{e('ä¸æ”¯æŒç”µæ± API')}})}
vibrateDevice(e){if(navigator.vibrate){navigator.vibrate(e.DURATION)}}
shareContent(e){if(navigator.share){navigator.share({title:document.title,text:e.TEXT,url:e.URL}).catch(()=&gt;{})}}
getScreenResolution(){return screen.width+'Ã—'+screen.height}
checkNetworkSpeed(){return new Promise(e=&gt;{let t=performance.getEntriesByType('navigation');if(t.length&gt;0){let o=t[0];if(o.domainLookupEnd&amp;&amp;o.connectEnd&amp;&amp;o.responseEnd&amp;&amp;o.requestStart){let n=o.domainLookupEnd-o.domainLookupStart,c=o.connectEnd-o.connectStart,r=o.responseEnd-o.requestStart;e(`DNS:${n.toFixed(2)}ms è¿æ¥:${c.toFixed(2)}ms å“åº”:${r.toFixed(2)}ms`)}else{e('æ— æ³•è·å–ç½‘ç»œé€Ÿåº¦è¯¦æƒ…')}}else{e('ç½‘ç»œä¿¡æ¯ä¸å¯ç”¨')}})}
getClipboardText(){return new Promise(e=&gt;{navigator.clipboard?.readText?.().then(t=&gt;e(t)).catch(()=&gt;e('æ— æ³•è¯»å–å‰ªè´´æ¿'))})}
takeScreenshot(){html2canvas(document.body).then(e=&gt;{let t=e.toDataURL('image/png'),o=document.createElement('a');o.href=t,o.download='screenshot.png',o.click()})}
getSystemTheme(){return window.matchMedia&amp;&amp;window.matchMedia('(prefers-color-scheme: dark)').matches?'æ·±è‰²æ¨¡å¼':'æµ…è‰²æ¨¡å¼'}
getUserLanguage(){return navigator.language||navigator.userLanguage||'æœªçŸ¥'}
getCPUInfo(){return navigator.hardwareConcurrency?navigator.hardwareConcurrency+'æ ¸å¿ƒ':'æœªçŸ¥'}
isCookieEnabled(){return navigator.cookieEnabled}
getPageFavicon(){let e=document.querySelector('link[rel*='icon']');return e?e.href:'æ— å›¾æ ‡'}
getMemoryInfo(){return navigator.deviceMemory?navigator.deviceMemory+'GB':'æœªçŸ¥'}
getUserAgent(){return navigator.userAgent}
getViewportSize(){return window.innerWidth+'Ã—'+window.innerHeight}
isJavaScriptEnabled(){return true}
getPlatformInfo(){return navigator.platform||'æœªçŸ¥å¹³å°'}
getConnectionType(){let e=navigator.connection;return e?e.effectiveType||'æœªçŸ¥':'æœªçŸ¥'}
getPageLoadTime(){let e=performance.timing;return e.loadEventEnd-e.navigationStart+'ms'}
getScrollPosition(){return window.pageYOffset+'px'}
isDoNotTrackEnabled(){return navigator.doNotTrack===1||navigator.doNotTrack==='1'||navigator.msDoNotTrack==='1'||window.doNotTrack==='1'}
getReferrer(){return document.referrer||'æ— æ¥æºé¡µé¢'}
getTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}
getDeviceOrientation(){return new Promise(e=&gt;{if(window.DeviceOrientationEvent){window.addEventListener('deviceorientation',t=&gt;{e(`Alpha:${t.alpha?.toFixed(2)} Beta:${t.beta?.toFixed(2)} Gamma:${t.gamma?.toFixed(2)}`)},{once:!0})}else{e('ä¸æ”¯æŒè®¾å¤‡æ–¹å‘æ£€æµ‹')}})}
getNetworkLatency(){return new Promise(e=&gt;{let t=performance.now();fetch('https://www.google.com/favicon.ico?t='+Date.now(),{mode:'no-cors',cache:'no-cache'}).then(()=&gt;{e((performance.now()-t).toFixed(2)+'ms')}).catch(()=&gt;e('æ£€æµ‹å¤±è´¥'))})}
getStorageUsage(){return new Promise(e=&gt;{if(navigator.storage&amp;&amp;navigator.storage.estimate){navigator.storage.estimate().then(t=&gt;{let o=(t.usage/1024/1024).toFixed(2),n=(t.quota/1024/1024).toFixed(2);e(`å·²ç”¨:${o}MB æ€»é¢:${n}MB`)}).catch(()=&gt;e('å­˜å‚¨ä¿¡æ¯ä¸å¯ç”¨'))}else{e('ä¸æ”¯æŒå­˜å‚¨API')}})}
isPWAInstalled(){return window.matchMedia('(display-mode: standalone)').matches||window.navigator.standalone||document.referrer.includes('android-app://')}
getMediaDevices(){return new Promise(e=&gt;{navigator.mediaDevices?.enumerateDevices?.().then(t=&gt;{let o=t.map(t=&gt;`${t.kind}:${t.label||'æœªçŸ¥'}`).join('; ');e(o||'æ— åª’ä½“è®¾å¤‡')}).catch(()=&gt;e('æ— æ³•è·å–è®¾å¤‡åˆ—è¡¨'))})}
createQRCode(e){return`https://api.qrserver.com/v1/create-qr-code/?size=150x150&amp;data=${encodeURIComponent(e.TEXT)}`}
speakText(e){if('speechSynthesis'in window){let t=new SpeechSynthesisUtterance(e.TEXT);speechSynthesis.speak(t)}}
stopSpeaking(){speechSynthesis.cancel()}
getGeolocation(){return new Promise(e=&gt;{if('geolocation'in navigator){navigator.geolocation.getCurrentPosition(t=&gt;{e(`çº¬åº¦:${t.coords.latitude.toFixed(6)} ç»åº¦:${t.coords.longitude.toFixed(6)}`)},()=&gt;e('ä½ç½®è·å–å¤±è´¥'))}else{e('ä¸æ”¯æŒåœ°ç†ä½ç½®')}})}
getSunriseSunset(){return new Promise(e=&gt;{fetch('https://api.sunrise-sunset.org/json?lat=36.7201600&amp;lng=-4.4203400&amp;formatted=0').then(t=&gt;t.json()).then(t=&gt;{t.results?e(`æ—¥å‡º:${t.results.sunrise} æ—¥è½:${t.results.sunset}`):e('æ•°æ®è·å–å¤±è´¥')}).catch(()=&gt;e('æœåŠ¡ä¸å¯ç”¨'))})}
calculateAge(e){let t=new Date(e.BIRTHDAY.replace(/\./g,'/')),o=new Date(),n=o.getFullYear()-t.getFullYear(),c=o.getMonth()-t.getMonth();return c&lt;0||0===c&amp;&amp;o.getDate()&lt;t.getDate()?n-1:n}
countdownTimer(e){let t=new Date(e.TARGET_TIME),o=new Date(),n=t-o;return n&lt;=0?'æ—¶é—´å·²åˆ°':`${Math.floor(n/(1e3*60*60*24))}å¤©${Math.floor(n%(1e3*60*60*24)/(1e3*60*60))}å°æ—¶${Math.floor(n%(1e3*60*60)/(1e3*60))}åˆ†é’Ÿ`}
getMoonPhase(){let e=new Date(),t=e.getDate(),o=e.getMonth()+1,n=e.getFullYear(),c=(n%100+Math.floor((n%100)/4))%7;return['æ–°æœˆ','å¨¥çœ‰æœˆ','ä¸Šå¼¦æœˆ','ç›ˆå‡¸æœˆ','æ»¡æœˆ','äºå‡¸æœˆ','ä¸‹å¼¦æœˆ','æ®‹æœˆ'][Math.floor(t%8)]}
generatePassword(e){let t=e.LENGTH,o='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&amp;*',n='';for(let e=0;e&lt;t;e++)n+=o[Math.floor(Math.random()*o.length)];return n}
analyzeText(e){let t=e.TEXT,o=t.length,n=t.split(/\s+/).length,c=t.split(/[.!?]+/).length-1;return`å­—ç¬¦æ•°:${o} å•è¯æ•°:${n} å¥å­æ•°:${c}`}
getCurrentSeason(){let e=new Date(),t=e.getMonth();return t&gt;=2&amp;&amp;t&lt;=4?'æ˜¥å­£':t&gt;=5&amp;&amp;t&lt;=7?'å¤å­£':t&gt;=8&amp;&amp;t&lt;=10?'ç§‹å­£':'å†¬å­£'}
isLeapYear(e){let t=e.YEAR;return t%4==0&amp;&amp;t%100!=0||t%400==0}
getURLParameters(){let e=new URLSearchParams(window.location.search),t=[];for(let o of e.entries())t.push(`${o[0]}=${o[1]}`);return t.join(', ')}
setLocalStorage(e){localStorage.setItem(e.KEY,e.VALUE)}
getLocalStorage(e){return localStorage.getItem(e.KEY)||''}
removeLocalStorage(e){localStorage.removeItem(e.KEY)}
clearLocalStorage(){localStorage.clear()}
getPerformanceMetrics(){let e=performance.getEntriesByType('navigation')[0];if(e){let t=e.domContentLoadedEventEnd-e.navigationStart,o=e.loadEventEnd-e.navigationStart;return`DOMåŠ è½½:${t}ms å®Œå…¨åŠ è½½:${o}ms`}return'æ€§èƒ½æ•°æ®ä¸å¯ç”¨'}
detectAdBlocker(){return new Promise(e=&gt;{fetch('https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js',{method:'HEAD',mode:'no-cors'}).then(()=&gt;e(false)).catch(()=&gt;e(true))})}
getPageVisibility(){return document.hidden?'é¡µé¢éšè—':'é¡µé¢å¯è§'}
createBlobURL(e){let t=new Blob([e.CONTENT],{type:e.TYPE});return URL.createObjectURL(t)}
revokeBlobURL(e){URL.revokeObjectURL(e.URL)}
getElementCount(e){return document.querySelectorAll(e.SELECTOR).length}
checkFontSupport(e){let t=document.createElement('span');t.style.fontFamily=e.FONT,t.style.position='absolute',t.style.left='-9999px',t.innerHTML='mmmmmmmmmmmmmmmm';document.body.appendChild(t);let o=t.offsetWidth;document.body.removeChild(t);let n=document.createElement('span');n.style.fontFamily='monospace',n.style.position='absolute',n.style.left='-9999px',n.innerHTML='mmmmmmmmmmmmmmmm';document.body.appendChild(n);let c=n.offsetWidth;return document.body.removeChild(n),o!==c}
getCSSVariable(e){return getComputedStyle(document.documentElement).getPropertyValue(e.VAR_NAME).trim()}
setCSSVariable(e){document.documentElement.style.setProperty(e.VAR_NAME,e.VALUE)}
createObjectURL(e){let t=new Blob([e.FILE],{type:'text/plain'});return URL.createObjectURL(t)}
measureTextWidth(e){let t=document.createElement('canvas'),o=t.getContext('2d');return o.font=e.FONT,Math.ceil(o.measureText(e.TEXT).width)}
getScrollbarWidth(){let e=document.createElement('div');e.style.overflow='scroll',e.style.width='50px',e.style.height='50px',e.style.visibility='hidden',e.style.position='absolute',e.style.top='-9999px';document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}
isReduceMotionEnabled(){return window.matchMedia('(prefers-reduced-motion: reduce)').matches}
detectIncognitoMode(){return new Promise(e=&gt;{let t=!1;'storage'in navigator&amp;&amp;navigator.storage.estimate?navigator.storage.estimate().then(o=&gt;{t=o.quota&lt;12e9}).catch(()=&gt;t=!1):t=!1,e(t)})}
getDeviceMotion(){return new Promise(e=&gt;{if(window.DeviceMotionEvent){window.addEventListener('devicemotion',t=&gt;{e(`X:${t.acceleration?.x?.toFixed(2)} Y:${t.acceleration?.y?.toFixed(2)} Z:${t.acceleration?.z?.toFixed(2)}`)},{once:!0})}else{e('ä¸æ”¯æŒè®¾å¤‡è¿åŠ¨æ£€æµ‹')}})}
createHash(e){let t=e.ALGORITHM,o=e.TEXT,n=0;for(let e=0;e&lt;o.length;e++)n=((n&lt;&lt;5)-n)+o.charCodeAt(e),n&amp;=n;return'MD5'===t?(n&gt;&gt;&gt;0).toString(16):'SHA-1'===t?(n+2147483648).toString(16):'SHA-256'===t?(n*2654435761&gt;&gt;&gt;0).toString(16):(n^123456789).toString(16)}
compressText(e){try{return btoa(encodeURIComponent(e.TEXT).replace(/%([0-9A-F]{2})/g,(e,t)=&gt;String.fromCharCode('0x'+t)))}catch(e){return'å‹ç¼©å¤±è´¥'}}
decompressText(e){try{return decodeURIComponent(atob(e.TEXT).split('').map(e=&gt;'%'+('00'+e.charCodeAt(0).toString(16)).slice(-2)).join(''))}catch(e){return'è§£å‹å¤±è´¥'}}
detectDarkPattern(){return window.matchMedia&amp;&amp;window.matchMedia('(prefers-color-scheme: dark)').matches?'æ·±è‰²æ¨¡å¼':'æµ…è‰²æ¨¡å¼'}
getAudioContext(){return'undefined'!=typeof AudioContext?'éŸ³é¢‘ä¸Šä¸‹æ–‡å¯ç”¨':'éŸ³é¢‘ä¸Šä¸‹æ–‡ä¸å¯ç”¨'}
calculateTextReadTime(e){let t=e.TEXT.length;return Math.ceil(t/200)+'åˆ†é’Ÿ'}
generateUUID(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,e=&gt;{let t=16*Math.random()|0;return('x'===e?t:3&amp;t|8).toString(16)})}
checkImageExists(e){return new Promise(t=&gt;{let o=new Image;o.onload=()=&gt;t(!0),o.onerror=()=&gt;t(!1),o.src=e.URL})}
getCookieValue(e){let t=`; ${document.cookie}`,o=t.split(`; ${e.NAME}=`);return 2===o.length?o.pop().split(';').shift():''}
setCookieValue(e){let t=e.NAME,o=e.VALUE,n=e.DAYS,c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3);let r='expires='+c.toUTCString();document.cookie=t+'='+o+';'+r+';path=/'}
getBatteryStatus(){return new Promise(e=&gt;{if(navigator.getBattery){navigator.getBattery().then(t=&gt;{e(`ç”µé‡:${Math.round(t.level*100)}% å……ç”µä¸­:${t.charging?'æ˜¯':'å¦'} å……ç”µæ—¶é—´:${t.chargingTime?Math.round(t.chargingTime/60)+'åˆ†é’Ÿ':'æœªçŸ¥'} æ”¾ç”µæ—¶é—´:${t.dischargingTime?Math.round(t.dischargingTime/60)+'åˆ†é’Ÿ':'æœªçŸ¥'}`)}).catch(()=&gt;e('ç”µæ± çŠ¶æ€æœªçŸ¥'))}else{e('ä¸æ”¯æŒç”µæ± API')}})}
detectIdleState(){return new Promise(e=&gt;{if('requestIdleCallback'in window){let t=performance.now();window.requestIdleCallback(()=&gt;{e(`ç©ºé—²æ—¶é—´:${Math.round(performance.now()-t)}ms`)})}else{e('ä¸æ”¯æŒç©ºé—²æ£€æµ‹')}})}
calculateDistance(e){let t=e.POINT1.split(',').map(Number),o=e.POINT2.split(',').map(Number);if(t.length!==2||o.length!==2||t.some(isNaN)||o.some(isNaN))return'åæ ‡æ ¼å¼é”™è¯¯';let n=t[0]-o[0],c=t[1]-o[1];return Math.sqrt(n*n+c*c).toFixed(2)}
generateLoremIpsum(e){let t=e.WORDS,o=['lorem','ipsum','dolor','sit','amet','consectetur','adipiscing','elit','sed','do','eiusmod','tempor','incididunt','ut','labore','et','dolore','magna','aliqua','enim','minim','veniam','quis','nostrud','exercitation','ullamco','laboris','nisi','aliquip','ex','ea','commodo','consequat','duis','aute','irure','in','reprehenderit','voluptate','velit','esse','cillum','eu','fugiat','nulla','pariatur','excepteur','sint','occaecat','cupidatat','non','proident','sunt','culpa','qui','officia','deserunt','mollit','anim','id','est','laborum'],n='';for(let e=0;e&lt;t;e++)n+=(e&gt;0?' ':'')+o[Math.floor(Math.random()*o.length)];return n+'.'}
checkSSLStatus(){return window.location.protocol==='https:'}
getPageLoadSize(){let e=performance.getEntriesByType('resource').reduce((e,t)=&gt;e+t.transferSize||0,0);return(e/1024).toFixed(2)+'KB'}
detectPrintSupport(){return!!window.matchMedia&amp;&amp;!!window.matchMedia('print')}
createDataURL(e){return`data:${e.TYPE},${encodeURIComponent(e.CONTENT)}`}
getActiveElement(){let e=document.activeElement;return e?e.tagName+ (e.id?'#'+e.id:'')+ (e.className?'.'+e.className.split(' ')[0]:''):'æ— ç„¦ç‚¹å…ƒç´ '}
checkWebGLSupport(){let e=document.createElement('canvas');return!!(e.getContext('webgl')||e.getContext('experimental-webgl'))}
getSelectionText(){let e=window.getSelection();return e?e.toString():'æ— é€‰ä¸­æ–‡æœ¬'}
detectPointerType(){return window.matchMedia&amp;&amp;window.matchMedia('(pointer:coarse)').matches?'è§¦æ‘¸è®¾å¤‡':window.matchMedia&amp;&amp;window.matchMedia('(pointer:fine)').matches?'é¼ æ ‡è®¾å¤‡':'æœªçŸ¥æŒ‡é’ˆè®¾å¤‡'}
calculateAspectRatio(e){let t=e.WIDTH,o=e.HEIGHT;if(t&lt;=0||o&lt;=0)return'æ— æ•ˆå°ºå¯¸';let n=this.gcd(t,o);return`${t/n}:${o/n}`}
gcd(e,t){return t===0?e:this.gcd(t,e%t)}
generateGradient(e){return`linear-gradient(45deg, ${e.COLOR1}, ${e.COLOR2})`}
checkServiceWorker(){return'navigator' in window&amp;&amp;'serviceWorker' in navigator?!!navigator.serviceWorker.controller:'ä¸æ”¯æŒService Worker'}}

Scratch.extensions.register(new MorganToolboxV8());
```ã€‚</description><guid isPermaLink="true">https://chess-brain.github.io/code/post/Morgan-de-gong-ju-xiang.html</guid><pubDate>Fri, 26 Dec 2025 07:48:48 +0000</pubDate></item><item><title>è±¡æ£‹è„‘çš„ç™»å½•æ³¨å†Œ</title><link>https://chess-brain.github.io/code/post/xiang-qi-nao-de-deng-lu-zhu-ce.html</link><description>```js
(function(Scratch) {
    'use strict';

    class LoginExtension {
        constructor() {
            this.users = {}; 
            this.ws = null;
            this.isOnline = false; 
            this.connectToServer();
        }

        connectToServer() {
            try {
                this.ws = new WebSocket('ws://localhost:8080'); 
                this.ws.onopen = () =&gt; {
                    this.isOnline = true;
                    console.log('Connected to cloud server');
                };
                this.ws.onmessage = (event) =&gt; {
                    const data = JSON.parse(event.data);
                    if (data.type === 'sync') {
                        this.users = data.users;
                    }
                };
                this.ws.onclose = () =&gt; {
                    this.isOnline = false;
                    console.log('Disconnected from cloud server');
                };
                this.ws.onerror = () =&gt; {
                    this.isOnline = false;
                };
            } catch (e) {
                this.isOnline = false;
            }
        }

        getInfo() {
            return {
                id: 'login',
                name: 'ç™»å½•æ‰©å±•',
                blocks: [
                    {
                        opcode: 'register',
                        blockType: Scratch.BlockType.COMMAND,
                        text: 'æ³¨å†Œ ç”¨æˆ·å [username] å¯†ç  [password]',
                        arguments: {
                            username: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'user'
                            },
                            password: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'pass'
                            }
                        }
                    },
                    {
                        opcode: 'login',
                        blockType: Scratch.BlockType.BOOLEAN,
                        text: 'ç™»å½• ç”¨æˆ·å [username] å¯†ç  [password]',
                        arguments: {
                            username: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'user'
                            },
                            password: {
                                type: Scratch.ArgumentType.STRING,
                                defaultValue: 'pass'
                            }
                        }
                    },
                    {
                        opcode: 'isOnline',
                        blockType: Scratch.BlockType.BOOLEAN,
                        text: 'æ˜¯å¦å·²è”ç½‘'
                    }
                ]
            };
        }

        register(args) {
            const { username, password } = args;
            if (this.users[username]) {
                return; // ç”¨æˆ·å·²å­˜åœ¨
            }
            this.users[username] = password;
            if (this.ws &amp;&amp; this.ws.readyState === WebSocket.OPEN) {
                this.ws.send(JSON.stringify({ type: 'sync', users: this.users })); // åŒæ­¥åˆ°äº‘ç«¯
            }
        }

        login(args) {
            const { username, password } = args;
            return this.users[username] === password;
        }

        isOnline() {
            return this.isOnline;
        }
    }

    Scratch.extensions.register(new LoginExtension());
})(Scratch);
```ã€‚</description><guid isPermaLink="true">https://chess-brain.github.io/code/post/xiang-qi-nao-de-deng-lu-zhu-ce.html</guid><pubDate>Thu, 25 Dec 2025 13:57:05 +0000</pubDate></item><item><title>è±¡æ£‹è„‘çš„æˆå°±ä¸æ’è¡Œæ¦œ</title><link>https://chess-brain.github.io/code/post/xiang-qi-nao-de-cheng-jiu-yu-pai-xing-bang.html</link><description># è±¡æ£‹è„‘çš„æˆå°±ä¸æ’è¡Œæ¦œ
## è¯´æ˜ï¼š
è¿™æ˜¯ä¸€ä¸ªå¯ä»¥å®ç°æˆå°±ä¸æ’è¡Œæ¦œçš„æ‰©å±•
æˆ‘ä»¬çš„å£å·ï¼šå¹²å®Gandiçš„ç‰¹æœ‰åŠŸèƒ½ï¼ï¼ˆCCW: bushiï¼‰
## åŠ è½½æ–¹å¼ï¼š
### TurboWarp / 02Engine / Mistium / Penguin mod: ç›®å‰æ”¯æŒ
ã€æ‰©å±•ã€‘-&gt; è‡ªå®šä¹‰æ‰©å±• -&gt; æ–‡æœ¬ -&gt; ç²˜è´´å†…å®¹
### Gandi IDE : æš‚ä¸æ”¯æŒ
## ä»£ç 
éœ€å¤åˆ¶å†…å®¹å¦‚ä¸‹ï¼š
```js
(function () {
	class Leaderboard {
		constructor(runtime) {
			this.runtime = runtime;
			this.storageKey = 'achieve_and_leaderboard';
			this._port = 'default';
			this._inMemoryStore = {};
 			this._cloudProvider = null;
 			this._cloudAutoSync = false;
			this._overlayElement = null;
			this._overlayMode = null;
			this._overlayContext = null;
			this._stylesInjected = false;
			this._lang = this._detectLang();
			const vers_num = '1.2.0';
			const build_type = 1;
			const build_version = '001';
			const version = vers_num + ['-alpha-', '-beta-', '-release-'][build_type] + build_version;
			this._translations = {
				'zh-cn': {
					extName: 'æˆå°±ä¸æ’è¡Œæ¦œ',
					label_version: 'V' + version,
					docLink: 'æŸ¥çœ‹æ–‡æ¡£',
					leaderboard: 'æ’è¡Œæ¦œ',
					createBoard: 'åˆ›å»ºæ’è¡Œæ¦œ [BOARD]',
					submitScore: 'æäº¤åˆ†æ•° åç§° [NAME] åˆ†æ•° [SCORE] åˆ° [BOARD]',
					getTop: 'è·å–å‰ [N] å ä» [BOARD]',
					getRank: 'æŸ¥è¯¢ åç§° [NAME] åœ¨ [BOARD] çš„åæ¬¡',
					getHighScore: 'æŸ¥è¯¢ åç§° [NAME] åœ¨ [BOARD] çš„æœ€é«˜åˆ†',
					resetBoard: 'é‡ç½®æ’è¡Œæ¦œ [BOARD]',
					getAllData: 'æ•´ä¸ªæ’è¡Œæ¦œæ•°æ®',
					toggleDisplay: '[TOGGLE] æ’è¡Œæ¦œ [BOARD]',
					achievements: 'æˆå°±ç³»ç»Ÿ',
					createAchievement: 'åˆ›å»ºæˆå°± ID [ID] åç§° [NAME] æ ‡ç­¾ [TAG]',
					awardAchievement: 'é¢å‘æˆå°± ID [ID] æ ‡ç­¾ [TAG] ç»™ ç”¨æˆ· [PLAYER] ï¼ˆå¯é€‰åç§° [NAME]ï¼‰ å¹¶ [DISPLAY] ç»™ç”¨æˆ·',
					isAchievementUnlocked: 'æˆå°± ID [ID] åœ¨ æ ‡ç­¾ [TAG] æ˜¯å¦è¢« ç”¨æˆ· [PLAYER] è§£é”',
					toggleAchievementsDisplay: '[TOGGLE] æˆå°± æ ‡ç­¾ [TAG] ç”¨æˆ· [PLAYER]',
					show: 'æ˜¾ç¤º',
					hide: 'éšè—',
					refresh: 'åˆ·æ–°',
					close: 'å…³é—­',
					nameHeader: 'åç§°',
					scoreHeader: 'åˆ†æ•°',
					noData: '(æ— æ•°æ®)',
					noAchievements: '(æ— æˆå°±)',
					moreRecords: '... è¿˜æœ‰ {n} æ¡è®°å½•',
					unlocked: 'å·²è§£é”',
					locked: 'æœªè§£é”',
					leaderboardTitle: 'æ’è¡Œæ¦œï¼š{board}',
					achievementsTitle: 'æˆå°±ï¼š{tag}ï¼ˆç”¨æˆ·ï¼š{player}ï¼‰'
				},
				'en': {
					extName: 'Achievements &amp; Leaderboards',
					label_version: 'V' + version,
					docLink: 'View Docs',
					leaderboard: 'Leaderboard',
					createBoard: 'Create board [BOARD]',
					submitScore: 'Submit score NAME [NAME] SCORE [SCORE] to [BOARD]',
					getTop: 'Get top [N] from [BOARD]',
					getRank: 'Get rank of NAME [NAME] on [BOARD]',
					getHighScore: 'Get high score of NAME [NAME] on [BOARD]',
					resetBoard: 'Reset board [BOARD]',
					getAllData: 'All leaderboard data',
					toggleDisplay: '[TOGGLE] leaderboard [BOARD]',
					achievements: 'Achievements',
					createAchievement: 'Create achievement ID [ID] NAME [NAME] TAG [TAG]',
					awardAchievement: 'Award achievement ID [ID] TAG [TAG] to PLAYER [PLAYER] (opt NAME [NAME]) and [DISPLAY] to player',
					isAchievementUnlocked: 'Is achievement ID [ID] in TAG [TAG] unlocked by PLAYER [PLAYER]',
					toggleAchievementsDisplay: '[TOGGLE] achievements TAG [TAG] PLAYER [PLAYER]',
					show: 'Show',
					hide: 'Hide',
					refresh: 'Refresh',
					close: 'Close',
					nameHeader: 'Name',
					scoreHeader: 'Score',
					noData: '(no data)',
					noAchievements: '(no achievements)',
					moreRecords: '... {n} more records',
					unlocked: 'Unlocked',
					locked: 'Locked',
					leaderboardTitle: 'Leaderboard: {board}',
					achievementsTitle: 'Achievements: {tag} (Player: {player})'
				},
				'fr': {
					extName: 'SuccÃ¨s et Classements',
					label0: 'Classement &amp; SuccÃ¨s',
					label_version: 'V' + version,
					docLink: 'Voir la doc',
					leaderboard: 'Classement',
					createBoard: 'CrÃ©er classement [BOARD]',
					submitScore: 'Soumettre score NOM [NAME] SCORE [SCORE] Ã  [BOARD]',
					getTop: 'Obtenir top [N] de [BOARD]',
					getRank: 'Rang de NOM [NAME] sur [BOARD]',
					getHighScore: 'Meilleur score de NOM [NAME] sur [BOARD]',
					resetBoard: 'RÃ©initialiser [BOARD]',
					getAllData: 'Toutes les donnÃ©es',
					toggleDisplay: '[TOGGLE] classement [BOARD]',
					achievements: 'SuccÃ¨s',
					createAchievement: 'CrÃ©er succÃ¨s ID [ID] NOM [NAME] TAG [TAG]',
					awardAchievement: 'Attribuer succÃ¨s ID [ID] TAG [TAG] Ã  JOUEUR [PLAYER] (opt NOM [NAME]) et [DISPLAY] au joueur',
					isAchievementUnlocked: 'SuccÃ¨s ID [ID] TAG [TAG] dÃ©bloquÃ© par JOUEUR [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] succÃ¨s TAG [TAG] JOUEUR [PLAYER]',
					show: 'Afficher',
					hide: 'Masquer',
					refresh: 'RafraÃ®chir',
					close: 'Fermer',
					nameHeader: 'Nom',
					scoreHeader: 'Score',
					noData: '(aucune donnÃ©e)',
					noAchievements: '(aucun succÃ¨s)',
					moreRecords: '... {n} autres enregistrements',
					unlocked: 'DÃ©bloquÃ©',
					locked: 'VerrouillÃ©',
					leaderboardTitle: 'Classement : {board}',
					achievementsTitle: 'SuccÃ¨s : {tag} (Joueur : {player})'
				},
				'es': {
					extName: 'Logros y ClasificaciÃ³n',
					label_version: 'V' + version,
					docLink: 'Ver documentaciÃ³n',
					leaderboard: 'ClasificaciÃ³n',
					createBoard: 'Crear clasificaciÃ³n [BOARD]',
					submitScore: 'Enviar puntuaciÃ³n NOMBRE [NAME] PUNT [SCORE] a [BOARD]',
					getTop: 'Obtener top [N] de [BOARD]',
					getRank: 'Rango de NOMBRE [NAME] en [BOARD]',
					getHighScore: 'Mejor puntuaciÃ³n de NOMBRE [NAME] en [BOARD]',
					resetBoard: 'Reiniciar [BOARD]',
					getAllData: 'Todos los datos',
					toggleDisplay: '[TOGGLE] clasificaciÃ³n [BOARD]',
					achievements: 'Logros',
					createAchievement: 'Crear logro ID [ID] NOMBRE [NAME] TAG [TAG]',
					awardAchievement: 'Otorgar logro ID [ID] TAG [TAG] a JUGADOR [PLAYER] (opt NOMBRE [NAME]) y [DISPLAY] al jugador',
					isAchievementUnlocked: 'Â¿Logro ID [ID] TAG [TAG] desbloqueado por JUGADOR [PLAYER]?',
					toggleAchievementsDisplay: '[TOGGLE] logros TAG [TAG] JUGADOR [PLAYER]',
					show: 'Mostrar',
					hide: 'Ocultar',
					refresh: 'Actualizar',
					close: 'Cerrar',
					nameHeader: 'Nombre',
					scoreHeader: 'Puntos',
					noData: '(sin datos)',
					noAchievements: '(sin logros)',
					moreRecords: '... {n} registros mÃ¡s',
					unlocked: 'Desbloqueado',
					locked: 'Bloqueado',
					leaderboardTitle: 'ClasificaciÃ³n: {board}',
					achievementsTitle: 'Logros: {tag} (Usuario: {player})'
				},
				'ru': {
					extName: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²',
					label_version: 'V' + version,
					docLink: 'ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ',
					leaderboard: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²',
					createBoard: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ [BOARD]',
					submitScore: 'ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ñ‡ĞºĞ¸ Ğ˜ĞœĞ¯ [NAME] ĞĞ§ĞšĞ˜ [SCORE] Ğ² [BOARD]',
					getTop: 'ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ¿ [N] Ğ¸Ğ· [BOARD]',
					getRank: 'Ğ Ğ°Ğ½Ğ³ Ğ˜ĞœĞ¯ [NAME] Ğ² [BOARD]',
					getHighScore: 'Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ ÑÑ‡ĞµÑ‚ Ğ˜ĞœĞ¯ [NAME] Ğ² [BOARD]',
					resetBoard: 'Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ [BOARD]',
					getAllData: 'Ğ’ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ',
					toggleDisplay: '[TOGGLE] Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° [BOARD]',
					achievements: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ',
					createAchievement: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] Ğ˜ĞœĞ¯ [NAME] TAG [TAG]',
					awardAchievement: 'Ğ’Ñ€ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] TAG [TAG] Ğ¸Ğ³Ñ€Ğ¾ĞºÑƒ [PLAYER] (Ğ¸Ğ¼Ñ [NAME]) Ğ¸ [DISPLAY]',
					isAchievementUnlocked: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ID [ID] Ğ² TAG [TAG] Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ¼ [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ TAG [TAG] Ğ˜Ğ“Ğ ĞĞš [PLAYER]',
					show: 'ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ',
					hide: 'Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ',
					refresh: 'ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ',
					close: 'Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ',
					nameHeader: 'Ğ˜Ğ¼Ñ',
					scoreHeader: 'ĞÑ‡ĞºĞ¸',
					noData: '(Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)',
					noAchievements: '(Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹)',
					moreRecords: '... ĞµÑ‰Ñ‘ {n} Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹',
					unlocked: 'Ğ Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾',
					locked: 'Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾',
					leaderboardTitle: 'Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: {board}',
					achievementsTitle: 'Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ: {tag} (Ğ˜Ğ³Ñ€Ğ¾Ğº: {player})'
				},
				'ar': {
					extName: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ÙˆÙ„ÙˆØ§Ø¦Ø­ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
					label_version: 'V' + version,
					docLink: 'Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚',
					leaderboard: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
					createBoard: 'Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© [BOARD]',
					submitScore: 'Ø¥Ø±Ø³Ø§Ù„ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§Ø³Ù… [NAME] Ø§Ù„Ù†Ù‚Ø§Ø· [SCORE] Ø¥Ù„Ù‰ [BOARD]',
					getTop: 'Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ù‰ [N] Ù…Ù† [BOARD]',
					getRank: 'ØªØ±ØªÙŠØ¨ Ø§Ù„Ø§Ø³Ù… [NAME] ÙÙŠ [BOARD]',
					getHighScore: 'Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø§Ø³Ù… [NAME] ÙÙŠ [BOARD]',
					resetBoard: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† [BOARD]',
					getAllData: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
					toggleDisplay: '[TOGGLE] Ù‚Ø§Ø¦Ù…Ø© [BOARD]',
					achievements: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª',
					createAchievement: 'Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ù†Ø¬Ø§Ø² ID [ID] Ø§Ù„Ø§Ø³Ù… [NAME] Ø§Ù„ÙˆØ³Ù… [TAG]',
					awardAchievement: 'Ù…Ù†Ø­ Ø¥Ù†Ø¬Ø§Ø² ID [ID] Ø§Ù„ÙˆØ³Ù… [TAG] Ù„Ù„Ø§Ø¹Ø¨ [PLAYER] (Ø§Ù„Ø§Ø³Ù… [NAME]) Ùˆ[DISPLAY]',
					isAchievementUnlocked: 'Ù‡Ù„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ID [ID] ÙÙŠ Ø§Ù„ÙˆØ³Ù… [TAG] ØªÙ… ÙØªØ­Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© [PLAYER]ØŸ',
					toggleAchievementsDisplay: '[TOGGLE] Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„ÙˆØ³Ù… [TAG] Ø§Ù„Ù„Ø§Ø¹Ø¨ [PLAYER]',
					show: 'Ø¹Ø±Ø¶',
					hide: 'Ø¥Ø®ÙØ§Ø¡',
					refresh: 'ØªØ­Ø¯ÙŠØ«',
					close: 'Ø¥ØºÙ„Ø§Ù‚',
					nameHeader: 'Ø§Ù„Ø§Ø³Ù…',
					scoreHeader: 'Ø§Ù„Ù†Ù‚Ø§Ø·',
					noData: '(Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª)',
					noAchievements: '(Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ù†Ø¬Ø§Ø²Ø§Øª)',
					moreRecords: '... {n} Ø³Ø¬Ù„Ø§Øª Ø£Ø®Ø±Ù‰',
					unlocked: 'ØªÙ… Ø§Ù„ÙØªØ­',
					locked: 'Ù…Ù‚ÙÙ„',
					leaderboardTitle: 'Ù‚Ø§Ø¦Ù…Ø©: {board}',
					achievementsTitle: 'Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª: {tag} (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {player})'
				},
				'ja': {
					extName: 'å®Ÿç¸¾ã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°',
					label_version: 'V' + version,
					docLink: 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹',
					leaderboard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°',
					createBoard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä½œæˆ [BOARD]',
					submitScore: 'ã‚¹ã‚³ã‚¢ã‚’é€ä¿¡ åå‰ [NAME] ã‚¹ã‚³ã‚¢ [SCORE] ã¸ [BOARD]',
					getTop: '[BOARD] ã®ä¸Šä½ [N] ã‚’å–å¾—',
					getRank: '[BOARD] ã® åå‰ [NAME] ã®é †ä½',
					getHighScore: '[BOARD] ã® åå‰ [NAME] ã®æœ€é«˜ã‚¹ã‚³ã‚¢',
					resetBoard: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ [BOARD]',
					getAllData: 'ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿',
					toggleDisplay: '[TOGGLE] ãƒ©ãƒ³ã‚­ãƒ³ã‚° [BOARD]',
					achievements: 'å®Ÿç¸¾',
					createAchievement: 'å®Ÿç¸¾ä½œæˆ ID [ID] åå‰ [NAME] ã‚¿ã‚° [TAG]',
					awardAchievement: 'å®Ÿç¸¾ ID [ID] ã‚¿ã‚° [TAG] ã‚’ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER] ã«ä»˜ä¸ (åå‰ [NAME]) ã¨[DISPLAY]',
					isAchievementUnlocked: 'å®Ÿç¸¾ ID [ID] ã‚¿ã‚° [TAG] ãŒ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER] ã«ã‚ˆã£ã¦è§£é™¤ã•ã‚Œã¦ã„ã‚‹ã‹',
					toggleAchievementsDisplay: '[TOGGLE] å®Ÿç¸¾ ã‚¿ã‚° [TAG] ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ [PLAYER]',
					show: 'è¡¨ç¤º',
					hide: 'éè¡¨ç¤º',
					refresh: 'æ›´æ–°',
					close: 'é–‰ã˜ã‚‹',
					nameHeader: 'åå‰',
					scoreHeader: 'ã‚¹ã‚³ã‚¢',
					noData: '(ãƒ‡ãƒ¼ã‚¿ãªã—)',
					noAchievements: '(å®Ÿç¸¾ãªã—)',
					moreRecords: '... ã‚ã¨ {n} ä»¶',
					unlocked: 'è§£é™¤æ¸ˆã¿',
					locked: 'ãƒ­ãƒƒã‚¯ä¸­',
					leaderboardTitle: 'ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼š{board}',
					achievementsTitle: 'å®Ÿç¸¾ï¼š{tag}ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼š{player}ï¼‰'
				},
				'ko': {
					extName: 'ì—…ì  ë° ìˆœìœ„í‘œ',
					label_version: 'V' + version,
					docLink: 'ë¬¸ì„œ ë³´ê¸°',
					leaderboard: 'ìˆœìœ„í‘œ',
					createBoard: 'ìˆœìœ„í‘œ ìƒì„± [BOARD]',
					submitScore: 'ì ìˆ˜ ì œì¶œ ì´ë¦„ [NAME] ì ìˆ˜ [SCORE] ì— [BOARD]',
					getTop: '[BOARD] ì—ì„œ ìƒìœ„ [N] ê°€ì ¸ì˜¤ê¸°',
					getRank: '[BOARD] ì—ì„œ ì´ë¦„ [NAME] ë­í¬',
					getHighScore: '[BOARD] ì—ì„œ ì´ë¦„ [NAME] ìµœê³ ì ',
					resetBoard: 'ìˆœìœ„í‘œ ì´ˆê¸°í™” [BOARD]',
					getAllData: 'ëª¨ë“  ë°ì´í„°',
					toggleDisplay: '[TOGGLE] ìˆœìœ„í‘œ [BOARD]',
					achievements: 'ì—…ì ',
					createAchievement: 'ì—…ì  ìƒì„± ID [ID] ì´ë¦„ [NAME] íƒœê·¸ [TAG]',
					awardAchievement: 'ì—…ì  ID [ID] íƒœê·¸ [TAG] ë¥¼ í”Œë ˆì´ì–´ [PLAYER] ì—ê²Œ ìˆ˜ì—¬ (ì´ë¦„ [NAME]) ë° [DISPLAY]',
					isAchievementUnlocked: 'ì—…ì  ID [ID] íƒœê·¸ [TAG] ì´ í”Œë ˆì´ì–´ [PLAYER] ì— ì˜í•´ í•´ì œë˜ì—ˆëŠ”ê°€?',
					toggleAchievementsDisplay: '[TOGGLE] ì—…ì  íƒœê·¸ [TAG] í”Œë ˆì´ì–´ [PLAYER]',
					show: 'í‘œì‹œ',
					hide: 'ìˆ¨ê¸°ê¸°',
					refresh: 'ìƒˆë¡œê³ ì¹¨',
					close: 'ë‹«ê¸°',
					nameHeader: 'ì´ë¦„',
					scoreHeader: 'ì ìˆ˜',
					noData: '(ë°ì´í„° ì—†ìŒ)',
					noAchievements: '(ì—…ì  ì—†ìŒ)',
					moreRecords: '... {n} ê°œì˜ ì¶”ê°€ ê¸°ë¡',
					unlocked: 'í•´ì œë¨',
					locked: 'ì ê¹€',
					leaderboardTitle: 'ìˆœìœ„í‘œ: {board}',
					achievementsTitle: 'ì—…ì : {tag} (ì‚¬ìš©ì: {player})'
				},
				'pt': {
					extName: 'Conquistas e Rankings',
					label_version: 'V' + version,
					docLink: 'Ver documentaÃ§Ã£o',
					leaderboard: 'Ranking',
					createBoard: 'Criar ranking [BOARD]',
					submitScore: 'Enviar pontuaÃ§Ã£o NOME [NAME] PONT [SCORE] para [BOARD]',
					getTop: 'Obter top [N] de [BOARD]',
					getRank: 'PosiÃ§Ã£o de NOME [NAME] em [BOARD]',
					getHighScore: 'Maior pontuaÃ§Ã£o de NOME [NAME] em [BOARD]',
					resetBoard: 'Resetar [BOARD]',
					getAllData: 'Todos os dados',
					toggleDisplay: '[TOGGLE] ranking [BOARD]',
					achievements: 'Conquistas',
					createAchievement: 'Criar conquista ID [ID] NOME [NAME] TAG [TAG]',
					awardAchievement: 'Conceder conquista ID [ID] TAG [TAG] para JOGADOR [PLAYER] (nome [NAME]) e [DISPLAY] ao jogador',
					isAchievementUnlocked: 'Conquista ID [ID] TAG [TAG] desbloqueada por JOGADOR [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] conquistas TAG [TAG] JOGADOR [PLAYER]',
					show: 'Mostrar',
					hide: 'Esconder',
					refresh: 'Atualizar',
					close: 'Fechar',
					nameHeader: 'Nome',
					scoreHeader: 'Pontos',
					noData: '(sem dados)',
					noAchievements: '(sem conquistas)',
					moreRecords: '... {n} registros a mais',
					unlocked: 'Desbloqueado',
					locked: 'Bloqueado',
					leaderboardTitle: 'Ranking: {board}',
					achievementsTitle: 'Conquistas: {tag} (Jogador: {player})'
				},
				'it': {
					extName: 'Obiettivi e Classifiche',
					label_version: 'V' + version,
					docLink: 'Vedi documentazione',
					leaderboard: 'Classifica',
					createBoard: 'Crea classifica [BOARD]',
					submitScore: 'Invia punteggio NOME [NAME] PUNT [SCORE] a [BOARD]',
					getTop: 'Prendi top [N] da [BOARD]',
					getRank: 'Classifica di NOME [NAME] su [BOARD]',
					getHighScore: 'Miglior punteggio di NOME [NAME] su [BOARD]',
					resetBoard: 'Resetta [BOARD]',
					getAllData: 'Tutti i dati',
					toggleDisplay: '[TOGGLE] classifica [BOARD]',
					achievements: 'Obiettivi',
					createAchievement: 'Crea obiettivo ID [ID] NOME [NAME] TAG [TAG]',
					awardAchievement: 'Assegna obiettivo ID [ID] TAG [TAG] a GIOCATORE [PLAYER] (nome [NAME]) e [DISPLAY] al giocatore',
					isAchievementUnlocked: 'Obiettivo ID [ID] TAG [TAG] sbloccato da GIOCATORE [PLAYER] ?',
					toggleAchievementsDisplay: '[TOGGLE] obiettivi TAG [TAG] GIOCATORE [PLAYER]',
					show: 'Mostra',
					hide: 'Nascondi',
					refresh: 'Aggiorna',
					close: 'Chiudi',
					nameHeader: 'Nome',
					scoreHeader: 'Punteggio',
					noData: '(nessun dato)',
					noAchievements: '(nessun obiettivo)',
					moreRecords: '... {n} record in piÃ¹',
					unlocked: 'Sbloccato',
					locked: 'Bloccato',
					leaderboardTitle: 'Classifica: {board}',
					achievementsTitle: 'Obiettivi: {tag} (Giocatore: {player})'
				}
			};
		}

		_detectLang() {
			try {
				const nav = (typeof navigator !== 'undefined' &amp;&amp; navigator.language) ? navigator.language.toLowerCase() : 'en';
				if (nav.startsWith('zh')) return 'zh-cn';
				if (nav.startsWith('fr')) return 'fr';
				if (nav.startsWith('es')) return 'es';
				if (nav.startsWith('ru')) return 'ru';
				if (nav.startsWith('ar')) return 'ar';
				if (nav.startsWith('ja')) return 'ja';
				if (nav.startsWith('ko')) return 'ko';
				if (nav.startsWith('pt')) return 'pt';
				if (nav.startsWith('it')) return 'it';
				return 'en';
			} catch (e) {
				return 'en';
			}
		}

		_t(key, vars) {
			const dict = this._translations &amp;&amp; this._translations[this._lang] ? this._translations[this._lang] : this._translations['en'];
			let s = (dict &amp;&amp; dict[key]) ? dict[key] : (this._translations['en'][key] || key);
			if (vars &amp;&amp; typeof vars === 'object') {
				Object.keys(vars).forEach(k =&gt; {
					s = s.replace(new RegExp(`\\{${k}\\}`, 'g'), String(vars[k]));
				});
			}
			return s;
		}

		getInfo() {
			const B = (window.Scratch &amp;&amp; window.Scratch.BlockType) ? window.Scratch.BlockType : { COMMAND: 'command', REPORTER: 'reporter' };
			const A = (window.Scratch &amp;&amp; window.Scratch.ArgumentType) ? window.Scratch.ArgumentType : { STRING: 'string', NUMBER: 'number' };
			const BUTTON = (B &amp;&amp; B.BUTTON) ? B.BUTTON : B.COMMAND;
            return {
				id: 'leaderboard_and_achievements',
				name: this._t('extName'),
				color1: '#3494fc',
				color2: '#3494fc',
				color3: '#3494fc',
				blocks: [
                    { opcode: 'label', blockType: B.LABEL, text: `â€”â€”â€” ${this._t('extName')} â€”â€”â€”` },
                    { opcode: 'label_version', blockType: B.LABEL, text: this._t('label_version')},
                    { opcode: 'docLink', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('docLink') },
					{ opcode: 'leaderboard_text', blockType: B.LABEL, text: ` ${this._t('leaderboard')}`},
					{ opcode: 'createBoard', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('createBoard'),
						arguments: { BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'submitScore', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('submitScore'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, SCORE: { type: A.NUMBER, defaultValue: 0 }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getTop', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getTop'),
						arguments: { N: { type: A.NUMBER, defaultValue: 10 }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getRank', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getRank'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getHighScore', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getHighScore'),
						arguments: { NAME: { type: A.STRING, defaultValue: 'ç©å®¶' }, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'resetBoard', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('resetBoard'),
						arguments: { BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'getAllData', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('getAllData') },
					{ opcode: 'toggleDisplay', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('toggleDisplay'),
						arguments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, BOARD: { type: A.STRING, defaultValue: 'é»˜è®¤æ’è¡Œæ¦œ' } } },
					{ opcode: 'cloud_text', blockType: B.LABEL, text: ' äº‘å­˜å‚¨' },
					{ opcode: 'pushAllToCloud', blockType: B.COMMAND, text: 'æ¨é€å…¨éƒ¨åˆ°äº‘ç«¯' },
					{ opcode: 'pullAllFromCloud', blockType: B.COMMAND, text: 'ä»äº‘ç«¯æ‹‰å–å…¨éƒ¨' },
					{ opcode: 'setPort', blockType: B.COMMAND, text: 'è®¾ç½®ç«¯å£ [PORT]', arguments: { PORT: { type: A.STRING, defaultValue: 'default' } } },
					{ opcode: 'getPort', blockType: B.REPORTER, text: 'å½“å‰ç«¯å£' },
					{ opcode: 'setCloudAutoSync', blockType: B.COMMAND, text: 'è‡ªåŠ¨äº‘åŒæ­¥ [TOGGLE]',
						arguments: { TOGGLE: { type: A.STRING, menu: 'toggle' } } },
					{ opcode: 'achievement_text', blockType: B.LABEL, text: ` ${this._t('achievements')}`},
					{ opcode: 'createAchievement', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('createAchievement'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, NAME: { type: A.STRING, defaultValue: 'æˆå°±åç§°' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' } } },
					{ opcode: 'awardAchievement', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('awardAchievement'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' }, NAME: { type: A.STRING, defaultValue: '' }, DISPLAY: { type: A.STRING, menu: 'display' } } },
					{ opcode: 'isAchievementUnlocked', blockType: B.REPORTER, text: 'ğŸ† ' + this._t('isAchievementUnlocked'),
						arguments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' } } },
					{ opcode: 'toggleAchievementsDisplay', blockType: B.COMMAND, text: 'ğŸ† ' + this._t('toggleAchievementsDisplay'),
						arguments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, TAG: { type: A.STRING, defaultValue: 'é»˜è®¤æ ‡ç­¾' }, PLAYER: { type: A.STRING, defaultValue: 'ç©å®¶' } } }
				],
				menus: {
                    toggle: [
                        { text: this._t('show'), value: 'open' },
                        { text: this._t('hide'), value: 'close' }
                    ],
 					display: [
 						{ text: this._t('show'), value: 'show' },
 						{ text: this._t('hide'), value: 'hide' }
 					]
                 }
 			};
 		}

		_storageKeyForPort() {
			return String(this.storageKey || 'achieve_and_leaderboard') + ':' + String(this._port || 'default');
		}

		_loadAll() {
			try {
				if (typeof localStorage !== 'undefined') {
					const key = this._storageKeyForPort();
					const raw = localStorage.getItem(key);
					if (raw) {
						try { return JSON.parse(raw); } catch (e) {}
					}
					const legacyRaw = localStorage.getItem(this.storageKey);
					if (legacyRaw) {
						try {
							const parsed = JSON.parse(legacyRaw);
							try { localStorage.setItem(key, JSON.stringify(parsed)); } catch (e) {}
							return parsed;
						} catch (e) {}
					}
				}
			} catch (e) {}
			return this._inMemoryStore[this._port] ? this._inMemoryStore[this._port] : {};
 		}
 
 		_saveAll(data) {
			try {
				const key = this._storageKeyForPort();
				if (typeof localStorage !== 'undefined') {
					localStorage.setItem(key, JSON.stringify(data));
				} else {
					this._inMemoryStore[this._port] = data;
				}
			} catch (e) {
				this._inMemoryStore[this._port] = data;
			}
			if (this._cloudProvider &amp;&amp; this._cloudAutoSync &amp;&amp; typeof this._cloudProvider.upload === 'function') {
				try {
					const payload = JSON.stringify(data);
					Promise.resolve(this._cloudProvider.upload(this._storageKeyForPort(), payload)).catch(() =&gt; {});
				} catch (e) {}
			}
 		}
 
 		registerCloudProvider(provider) {
 			if (!provider) return false;
 			this._cloudProvider = provider;
 			return true;
 		}
 
 		async _pushAllToCloud() {
			if (!this._cloudProvider || typeof this._cloudProvider.upload !== 'function') return false;
			const all = this._loadAll();
			try {
				await this._cloudProvider.upload(this._storageKeyForPort(), JSON.stringify(all));
				return true;
			} catch (e) {
				return false;
			}
 		}
 
 		async _pullAllFromCloud() {
			if (!this._cloudProvider || typeof this._cloudProvider.download !== 'function') return false;
			try {
				const raw = await this._cloudProvider.download(this._storageKeyForPort());
				if (!raw) return false;
				let parsed = {};
				try { parsed = JSON.parse(raw); } catch (e) { return false; }
				this._saveAll(parsed);
				return true;
			} catch (e) {
				return false;
			}
 		}
 
 		pushAllToCloud(args) {
 			if (typeof this._pushAllToCloud === 'function') this._pushAllToCloud().catch(() =&gt; {});
 		}
 
 		pullAllFromCloud(args) {
 			if (typeof this._pullAllFromCloud === 'function') this._pullAllFromCloud().catch(() =&gt; {});
 		}
 
 		setCloudAutoSync(args) {
 			const toggle = String((args &amp;&amp; args.TOGGLE) || '').toLowerCase();
 			if (toggle === 'open' || toggle === 'show' || toggle === 'true' || toggle === '1') this.setCloudAutoSyncEnabled(true);
 			else if (toggle === 'close' || toggle === 'hide' || toggle === 'false' || toggle === '0') this.setCloudAutoSyncEnabled(false);
 		}
 
 		setCloudAutoSyncEnabled(enabled) {
 			this._cloudAutoSync = !!enabled;
 		}
 
 		_ensureBoard(data, board) {
 			if (!data[board]) data[board] = {};
 			return data[board];
 		}

        docLink() {
            const url = 'https://chess-brain.github.io/doc/achievements_and_leaderboards.html';
            if (typeof window === 'undefined') return;
            try {
                this._openUrl(url);
            } catch (e) {}
        }

		createBoard(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const all = this._loadAll();
			this._ensureBoard(all, board);
			this._saveAll(all);
		}

		submitScore(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const score = Number(args.SCORE) || 0;
			const all = this._loadAll();
			const b = this._ensureBoard(all, board);
			const prev = b[name];
			const now = Date.now();
			if (!prev || score &gt; prev.score || (score === prev.score &amp;&amp; now &lt; prev.ts)) {
				b[name] = { score: score, ts: now };
			}
			this._saveAll(all);
		}

		getTop(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const n = Math.max(0, Math.floor(Number(args.N) || 0));
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(name =&gt; ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));
			arr.sort((a, c) =&gt; {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			const top = arr.slice(0, n).map((item, idx) =&gt; ({ rank: idx + 1, name: item.name, score: item.score }));
			try {
				return JSON.stringify(top);
			} catch (e) {
				return '[]';
			}
		}

		getRank(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(nm =&gt; ({ name: nm, score: Number(b[nm].score), ts: Number(b[nm].ts) }));
			arr.sort((a, c) =&gt; {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			for (let i = 0; i &lt; arr.length; i++) {
				if (arr[i].name === name) return i + 1;
			}
			return 0;
		}

		getHighScore(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const name = String(args.NAME || 'ç©å®¶');
			const all = this._loadAll();
			const b = all[board] || {};
			const entry = b[name];
			return entry ? Number(entry.score) : 0;
		}

		resetBoard(args) {
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ');
			const all = this._loadAll();
			if (all[board]) delete all[board];
			this._saveAll(all);
		}

		getAllData() {
			const all = this._loadAll();
			all.__achievements_meta = all.__achievements_meta || {};
			all.__achievements_unlocked = all.__achievements_unlocked || {};
			try {
				return JSON.stringify(all);
			} catch (e) {
				return '{}';
			}
		}

		toggleDisplay(args) {
			const toggle = String((args.TOGGLE || '')).toLowerCase();
			const board = String(args.BOARD || 'é»˜è®¤æ’è¡Œæ¦œ').trim();
			if (toggle === 'open') {
				this._showOverlay(board);
				return;
			}
			if (toggle === 'close') {
				if (this._overlayElement &amp;&amp; this._overlayMode === 'leaderboard') this._hideOverlay();
				return;
			}
			if (this._overlayElement &amp;&amp; this._overlayMode === 'leaderboard' &amp;&amp; this._overlayContext &amp;&amp; this._overlayContext.board === board) {
				this._hideOverlay();
			} else {
				this._showOverlay(board);
			}
		}

		_ensureAchievementMeta(all) {
			if (!all.__achievements_meta) all.__achievements_meta = {};
			return all.__achievements_meta;
		}
		_ensureAchievementUnlocked(all) {
			if (!all.__achievements_unlocked) all.__achievements_unlocked = {};
			return all.__achievements_unlocked;
		}

		createAchievement(args) {
			const id = String(args.ID || '');
			const name = String(args.NAME || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			if (!id) return;
			const all = this._loadAll();
			const meta = this._ensureAchievementMeta(all);
			if (!meta[tag]) meta[tag] = {};
			meta[tag][id] = { name: name || id };
			this._saveAll(all);
		}

		awardAchievement(args) {
			const id = String(args.ID || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			const player = String(args.PLAYER || 'ç©å®¶');
			const name = String(args.NAME || '');
			if (!id) return;
			const all = this._loadAll();
			const meta = this._ensureAchievementMeta(all);
			if (!meta[tag]) meta[tag] = {};
			if (name) meta[tag][id] = { name: name };
			const unlocked = this._ensureAchievementUnlocked(all);
			if (!unlocked[player]) unlocked[player] = {};
			if (!unlocked[player][tag]) unlocked[player][tag] = {};
			unlocked[player][tag][id] = { ts: Date.now() };
			this._saveAll(all);
			const display = String((args &amp;&amp; args.DISPLAY) || '').toLowerCase();
			if (display === 'show') {
				const displayName = (meta[tag] &amp;&amp; meta[tag][id] &amp;&amp; meta[tag][id].name) ? meta[tag][id].name : (name || id);
				this._showDynamicHint('ğŸ† ' + this._t('unlocked') + ': ' + displayName);
			}
		}

		isAchievementUnlocked(args) {
			const id = String(args.ID || '');
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾');
			const player = String(args.PLAYER || 'ç©å®¶');
			if (!id) return false;
			const all = this._loadAll();
			const unlocked = all.__achievements_unlocked || {};
			return !!(unlocked[player] &amp;&amp; unlocked[player][tag] &amp;&amp; unlocked[player][tag][id]);
		}

		_ensureStyles() {
			if (this._stylesInjected || typeof document === 'undefined') {
				if (typeof document !== 'undefined' &amp;&amp; document.getElementById &amp;&amp; document.getElementById('turbo-leaderboard-styles')) {
					this._stylesInjected = true;
				}
				return;
			}
			const css = `
				#turbo-leaderboard-overlay {
					position: fixed;
					right: 12px;
					top: 12px;
					max-height: 70vh;
					overflow: auto;
					z-index: 999999;
					background: rgba(255,255,255,0.5);
					color: #111;
					padding: 12px;
					border-radius: 12px;
					font-family: 'Helvetica Neue', Arial, sans-serif;
					font-size: 13px;
					min-width: 300px;
					box-shadow: 0 8px 24px rgba(0,0,0,0.12);
					backdrop-filter: blur(4px);
					border: 1px solid rgba(0,0,0,0.06);
				}
				#turbo-leaderboard-overlay .lb-title {
					display:flex;
					align-items:center;
					justify-content:space-between;
					gap:8px;
					margin-bottom:8px;
				}
				#turbo-leaderboard-overlay .lb-title .title-text {
					font-weight:700;
					font-size:14px;
					color: #222;
				}
				#turbo-leaderboard-overlay .lb-controls button {
					background: rgba(0,0,0,0.04);
					border: 1px solid rgba(0,0,0,0.06);
					color: #111;
					padding:4px 8px;
					border-radius:6px;
					cursor:pointer;
					font-size:12px;
				}
				#turbo-leaderboard-overlay table.lb-table {
					width:100%;
					border-collapse:collapse;
					table-layout:fixed;
				}
				#turbo-leaderboard-overlay table.lb-table th,
				#turbo-leaderboard-overlay table.lb-table td {
					padding:6px 8px;
					overflow:hidden;
					text-overflow:ellipsis;
					white-space:nowrap;
					color: #111;
				}
				#turbo-leaderboard-overlay table.lb-table th.rank,
				#turbo-leaderboard-overlay table.lb-table td.rank {
					width:40px;
					text-align:left;
				}
				#turbo-leaderboard-overlay table.lb-table td.name {
					text-align:left;
				}
				#turbo-leaderboard-overlay table.lb-table td.score {
					width:70px;
					text-align:right;
					font-weight:600;
				}
				#turbo-leaderboard-overlay .lb-row:nth-child(odd){
					background: rgba(0,0,0,0.02);
				}
				#turbo-leaderboard-overlay .badge {
					display:inline-block;
					min-width:24px;
					padding:2px 6px;
					border-radius:12px;
					font-weight:700;
					font-size:12px;
					text-align:center;
					margin-right:6px;
				}
				#turbo-leaderboard-overlay .badge.gold{ background: linear-gradient(90deg,#ffd700,#ffdd66); color:#1b1b1b; }
				#turbo-leaderboard-overlay .badge.silver{ background: linear-gradient(90deg,#e6e6e6,#cfcfcf); color:#1b1b1b; }
				#turbo-leaderboard-overlay .badge.bronze{ background: linear-gradient(90deg,#cd7f32,#d99b6a); color:#fff; }
				#turbo-leaderboard-overlay .name-wrap { max-width: 140px; display:inline-block; vertical-align:middle; }
				#turbo-leaderboard-overlay .achv-unlocked { color: #2e7d32; font-weight:700; }
				#turbo-leaderboard-overlay .achv-locked { color: #7b7b7b; }
			`;
			const style = document.createElement('style');
			style.id = 'turbo-leaderboard-styles';
			style.textContent = css;
			document.head.appendChild(style);
			this._stylesInjected = true;
		}

		_createOverlay() {
			this._ensureStyles();
			const el = document.createElement('div');
			el.id = 'turbo-leaderboard-overlay';
			el.style.display = 'none';

			const titleBar = document.createElement('div');
			titleBar.className = 'lb-title';
			const titleText = document.createElement('div');
			titleText.className = 'title-text';
			titleText.textContent = '';
			titleBar.appendChild(titleText);

			const controls = document.createElement('div');
			controls.className = 'lb-controls';
			const refreshBtn = document.createElement('button');
			refreshBtn.textContent = 'ğŸ† ' + this._t('refresh');
			refreshBtn.onclick = () =&gt; {
				if (this._overlayMode === 'leaderboard' &amp;&amp; this._overlayContext) this._showOverlay(this._overlayContext.board);
				else if (this._overlayMode === 'achievements' &amp;&amp; this._overlayContext) this._showAchievements(this._overlayContext.tag, this._overlayContext.player);
			};
			const closeBtn = document.createElement('button');
			closeBtn.textContent = 'ğŸ† ' + this._t('close');
			closeBtn.onclick = () =&gt; this._hideOverlay();
			controls.appendChild(refreshBtn);
			controls.appendChild(closeBtn);
			titleBar.appendChild(controls);
			el.appendChild(titleBar);

			const table = document.createElement('table');
			table.className = 'lb-table';
			const thead = document.createElement('thead');
			const htr = document.createElement('tr');
			const thRank = document.createElement('th'); thRank.className = 'rank'; thRank.textContent = '#';
			const thName = document.createElement('th'); thName.textContent = 'ğŸ† ' + this._t('nameHeader');
			const thRight = document.createElement('th'); thRight.className = 'score'; thRight.textContent = '';
			htr.appendChild(thRank); htr.appendChild(thName); htr.appendChild(thRight);
			thead.appendChild(htr);
			table.appendChild(thead);
			const tbody = document.createElement('tbody');
			tbody.className = 'lb-list';
			table.appendChild(tbody);
			el.appendChild(table);
			el._titleText = titleText;
			el._theadRight = thRight;
			el._tbody = tbody;
			return el;
		}

		_showOverlay(board) {
			const all = this._loadAll();
			const b = all[board] || {};
			const arr = Object.keys(b).map(name =&gt; ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));
			arr.sort((a, c) =&gt; {
				if (c.score !== a.score) return c.score - a.score;
				return a.ts - c.ts;
			});
			if (!this._overlayElement) {
				this._overlayElement = this._createOverlay();
				document.body.appendChild(this._overlayElement);
			}
			this._overlayMode = 'leaderboard';
			this._overlayContext = { board };
			this._overlayElement._titleText.textContent = 'ğŸ† ' + this._t('leaderboardTitle', { board });
			this._overlayElement._theadRight.textContent = 'ğŸ† ' + this._t('scoreHeader');
			const tbody = this._overlayElement._tbody;
			tbody.innerHTML = '';
			if (arr.length === 0) {
				const tr = document.createElement('tr');
				const td = document.createElement('td');
				td.colSpan = 3;
				td.style.opacity = '0.85';
				td.textContent = 'ğŸ† ' + this._t('noData');
				tr.appendChild(td);
				tbody.appendChild(tr);
			} else {
				const max = Math.min(50, arr.length);
				for (let i = 0; i &lt; max; i++) {
					const it = arr[i];
					const tr = document.createElement('tr');
					tr.className = 'lb-row';
					const tdRank = document.createElement('td'); tdRank.className = 'rank';
					const badge = document.createElement('span'); badge.className = 'badge';
					if (i === 0) badge.classList.add('gold'); else if (i === 1) badge.classList.add('silver'); else if (i === 2) badge.classList.add('bronze');
					badge.textContent = (i + 1);
					tdRank.appendChild(badge);
					tr.appendChild(tdRank);
					const tdName = document.createElement('td'); tdName.className = 'name';
					const nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = it.name; nameWrap.textContent = it.name;
					tdName.appendChild(nameWrap);
					tr.appendChild(tdName);
					const tdScore = document.createElement('td'); tdScore.className = 'score'; tdScore.textContent = String(it.score);
					tr.appendChild(tdScore);
					tbody.appendChild(tr);
				}
				if (arr.length &gt; max) {
					const tr = document.createElement('tr');
					const td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.8';
					td.textContent = 'ğŸ† ' + this._t('moreRecords', { n: arr.length - max });
					tr.appendChild(td);
					tbody.appendChild(tr);
				}
			}
			this._overlayElement.style.display = 'block';
		}
		
		_showAchievements(tag, player) {
			const all = this._loadAll();
			const meta = (all.__achievements_meta &amp;&amp; all.__achievements_meta[tag]) ? all.__achievements_meta[tag] : {};
			const unlockedForPlayer = (all.__achievements_unlocked &amp;&amp; all.__achievements_unlocked[player] &amp;&amp; all.__achievements_unlocked[player][tag]) ? all.__achievements_unlocked[player][tag] : {};
			if (!this._overlayElement) {
				this._overlayElement = this._createOverlay();
				document.body.appendChild(this._overlayElement);
			}
			this._overlayMode = 'achievements';
			this._overlayContext = { tag, player };
			this._overlayElement._titleText.textContent = 'ğŸ† ' + this._t('achievementsTitle', { tag, player });
			this._overlayElement._theadRight.textContent = '';
			const tbody = this._overlayElement._tbody;
			tbody.innerHTML = '';
			const ids = Object.keys(meta);
			if (ids.length === 0) {
				const tr = document.createElement('tr');
				const td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.85'; td.textContent = 'ğŸ† ' + this._t('noAchievements');
				tr.appendChild(td); tbody.appendChild(tr);
			} else {
				for (let i = 0; i &lt; ids.length; i++) {
					const id = ids[i];
					const m = meta[id];
					const tr = document.createElement('tr'); tr.className = 'lb-row';
					const tdRank = document.createElement('td'); tdRank.className = 'rank'; tdRank.textContent = (i + 1) + '.';
					tr.appendChild(tdRank);
					const tdName = document.createElement('td'); tdName.className = 'name';
					const nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = `${m.name} (${id})`; nameWrap.textContent = m.name;
					tdName.appendChild(nameWrap); tr.appendChild(tdName);
					const tdState = document.createElement('td'); tdState.className = 'score';
					if (unlockedForPlayer &amp;&amp; unlockedForPlayer[id]) {
						tdState.innerHTML = `&lt;span class='achv-unlocked'&gt;${'ğŸ† ' + this._t('unlocked')}&lt;/span&gt;`;
					} else {
						tdState.innerHTML = `&lt;span class='achv-locked'&gt;${'ğŸ† ' + this._t('locked')}&lt;/span&gt;`;
					}
					tr.appendChild(tdState);
					tbody.appendChild(tr);
				}
			}
			this._overlayElement.style.display = 'block';
		}

		_hideOverlay() {
			if (this._overlayElement) {
				this._overlayElement.style.display = 'none';
				this._overlayMode = null;
				this._overlayContext = null;
			}
		}
		_hideDocOverlay() {
			try {
				const el = (typeof document !== 'undefined') ? document.getElementById('turbo-doc-overlay') : null;
				if (el &amp;&amp; el.parentNode) el.parentNode.removeChild(el);
			} catch (e) {}
		}
		_openUrl(url) {
			if (typeof window === 'undefined') return;
			try {
				let opened = null;
				try { opened = window.open(url, '_blank', 'noopener'); } catch (e) { opened = null; }
				if (opened) { try { opened.opener = null; opened.focus &amp;&amp; opened.focus(); } catch (e) {} return; }
				try {
					if (window.top &amp;&amp; window.top !== window) {
						let to = null;
						try { to = window.top.open(url, '_blank', 'noopener'); } catch (e) { to = null; }
						if (to) { try { to.opener = null; to.focus &amp;&amp; to.focus(); } catch (e) {} return; }
					}
				} catch (e) {}
				try {
					if (typeof document !== 'undefined') {
						const a = document.createElement('a');
						a.href = url;
						a.target = '_blank';
						a.rel = 'noopener noreferrer';
						a.style.display = 'none';
						document.body.appendChild(a);
						try {
							const evt = new MouseEvent('click', { bubbles: true, cancelable: true, view: window });
							a.dispatchEvent(evt);
						} catch (e) {
							try { a.click(); } catch (e2) {}
						}
						document.body.removeChild(a);
						return;
					}
				} catch (e) {}
				try { window.location.assign(url); } catch (e) {}
			} catch (e) {}
		}
		_showDynamicHint(msg) {
			if (typeof document === 'undefined') return;
			try {
				if (!document.getElementById('turbo-achv-hint-styles')) {
					const s = document.createElement('style');
					s.id = 'turbo-achv-hint-styles';
					s.textContent = '.turbo-achv-hint{position:fixed;left:50%;transform:translateX(-50%) translateY(-8px);top:12px;background:rgba(0,0,0,0.78);color:#fff;padding:8px 12px;border-radius:10px;font-family:'Helvetica Neue',Arial,sans-serif;font-size:13px;z-index:1000000;opacity:0;transition:opacity 0.28s ease,transform 0.28s ease;pointer-events:none;box-shadow:0 6px 18px rgba(0,0,0,0.2)}.turbo-achv-hint.show{opacity:1;transform:translateX(-50%) translateY(0)}';
					document.head.appendChild(s);
				}
				let el = document.getElementById('turbo-achv-hint');
				if (!el) {
					el = document.createElement('div');
					el.id = 'turbo-achv-hint';
					el.className = 'turbo-achv-hint';
					document.body.appendChild(el);
				}
				el.textContent = String(msg || '');
				void el.offsetWidth;
				el.classList.add('show');
				if (el._timeout) clearTimeout(el._timeout);
				el._timeout = setTimeout(function () {
					el.classList.remove('show');
				}, 3000);
			} catch (e) {}
		}
		toggleAchievementsDisplay(args) {
			const toggle = String((args.TOGGLE || '')).toLowerCase();
			const tag = String(args.TAG || 'é»˜è®¤æ ‡ç­¾').trim();
			const player = String(args.PLAYER || 'ç©å®¶').trim();
			if (toggle === 'open') {
				this._showAchievements(tag, player);
				return;
			}
			if (toggle === 'close') {
				if (this._overlayElement &amp;&amp; this._overlayMode === 'achievements') this._hideOverlay();
				return;
			}
			if (this._overlayElement &amp;&amp; this._overlayMode === 'achievements' &amp;&amp; this._overlayContext &amp;&amp; this._overlayContext.tag === tag &amp;&amp; this._overlayContext.player === player) {
				this._hideOverlay();
			} else {
				this._showAchievements(tag, player);
			}
		}
	}

	if (window &amp;&amp; window.Scratch &amp;&amp; window.Scratch.extensions &amp;&amp; window.Scratch.extensions.register) {
		window.Scratch.extensions.register(new Leaderboard());
	} else if (typeof window !== 'undefined') {
		window.LeaderboardExtension = new Leaderboard();
	} else if (typeof module !== 'undefined' &amp;&amp; module.exports) {
		module.exports = Leaderboard;
	}
})();


```ã€‚</description><guid isPermaLink="true">https://chess-brain.github.io/code/post/xiang-qi-nao-de-cheng-jiu-yu-pai-xing-bang.html</guid><pubDate>Wed, 24 Dec 2025 14:45:49 +0000</pubDate></item></channel></rss>
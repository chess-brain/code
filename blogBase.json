{"singlePage": ["link", "about"], "startSite": "10/1/2025", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark_colorblind", "urlMode": "pinyin", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "\u2764\ufe0f \u8f6c\u8f7d\u6587\u7ae0\u8bf7\u6ce8\u660e\u51fa\u5904\uff0c\u8c22\u8c22\uff01\u2764\ufe0f", "showPostSource": 1, "iconList": {"music": "M12.7 0.9L7.3 0.9C6 0.9 4.9 2 4.9 3.3L4.9 10.1C4.5 9.9 4.1 9.8 3.6 9.8C2.1 9.8 0.9 11 0.9 12.4C0.9 13.9 2.1 15.1 3.6 15.1C5 15.1 6.2 13.9 6.2 12.4L6.2 3.3C6.2 2.7 6.7 2.2 7.3 2.2L12.7 2.2C13.3 2.2 13.8 2.7 13.8 3.3L13.8 7.5C13.4 7.3 12.9 7.1 12.4 7.1C11 7.1 9.8 8.3 9.8 9.8C9.8 11.2 11 12.4 12.4 12.4C13.9 12.4 15.1 11.2 15.1 9.8L15.1 3.3C15.1 2 14 0.9 12.7 0.9ZM3.6 13.8C2.8 13.8 2.2 13.2 2.2 12.4C2.2 11.7 2.8 11.1 3.6 11.1C4.3 11.1 4.9 11.7 4.9 12.4C4.9 13.2 4.3 13.8 3.6 13.8ZM12.4 11.1C11.7 11.1 11.1 10.5 11.1 9.8C11.1 9 11.7 8.4 12.4 8.4C13.2 8.4 13.8 9 13.8 9.8C13.8 10.5 13.2 11.1 12.4 11.1ZM12.4 11.1"}, "UTC": 8, "rssSplit": "sentence", "exlink": {"music": "https://music.meekdai.com"}, "needComment": 1, "allHead": "<script src='https://blog.meekdai.com/Gmeek/plugins/GmeekBSZ.js'></script><script src='https://blog.meekdai.com/Gmeek/plugins/GmeekVercount.js'></script>", "title": "Blog Title", "subTitle": "Blog description", "avatarUrl": "https://assets.bgithub.xyz/favicons/favicon.svg", "email": "3690985693@qq.com", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/xiang-qi-nao-de-cheng-jiu-yu-pai-xing-bang.html", "labels": ["\u5b98\u65b9", "\u9002\u914dTurbowarp/02Engine", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668", "\u8c61\u68cb\u8111\u5236\u4f5c"], "postTitle": "\u8c61\u68cb\u8111\u7684\u6210\u5c31\u4e0e\u6392\u884c\u699c", "postUrl": "post/xiang-qi-nao-de-cheng-jiu-yu-pai-xing-bang.html", "postSourceUrl": "https://github.com/chess-brain/code/issues/1", "commentNum": 0, "wordCount": 41226, "description": "# \u8c61\u68cb\u8111\u7684\u6210\u5c31\u4e0e\u6392\u884c\u699c\n## \u8bf4\u660e\uff1a\n\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u5b9e\u73b0\u6210\u5c31\u4e0e\u6392\u884c\u699c\u7684\u6269\u5c55\n\u6211\u4eec\u7684\u53e3\u53f7\uff1a\u5e72\u57aeGandi\u7684\u7279\u6709\u529f\u80fd\uff01\uff08CCW: bushi\uff09\n## \u52a0\u8f7d\u65b9\u5f0f\uff1a\n### TurboWarp / 02Engine / Mistium / Penguin mod: \u76ee\u524d\u652f\u6301\n\u3010\u6269\u5c55\u3011-> \u81ea\u5b9a\u4e49\u6269\u5c55 -> \u6587\u672c -> \u7c98\u8d34\u5185\u5bb9\n### Gandi IDE : \u6682\u4e0d\u652f\u6301\n## \u4ee3\u7801\n\u9700\u590d\u5236\u5185\u5bb9\u5982\u4e0b\uff1a\n```js\n(function () {\n\tclass Leaderboard {\n\t\tconstructor(runtime) {\n\t\t\tthis.runtime = runtime;\n\t\t\tthis.storageKey = 'achieve_and_leaderboard';\n\t\t\tthis._port = 'default';\n\t\t\tthis._inMemoryStore = {};\n \t\t\tthis._cloudProvider = null;\n \t\t\tthis._cloudAutoSync = false;\n\t\t\tthis._overlayElement = null;\n\t\t\tthis._overlayMode = null;\n\t\t\tthis._overlayContext = null;\n\t\t\tthis._stylesInjected = false;\n\t\t\tthis._lang = this._detectLang();\n\t\t\tconst vers_num = '1.2.0';\n\t\t\tconst build_type = 1;\n\t\t\tconst build_version = '001';\n\t\t\tconst version = vers_num + ['-alpha-', '-beta-', '-release-'][build_type] + build_version;\n\t\t\tthis._translations = {\n\t\t\t\t'zh-cn': {\n\t\t\t\t\textName: '\u6210\u5c31\u4e0e\u6392\u884c\u699c',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: '\u67e5\u770b\u6587\u6863',\n\t\t\t\t\tleaderboard: '\u6392\u884c\u699c',\n\t\t\t\t\tcreateBoard: '\u521b\u5efa\u6392\u884c\u699c [BOARD]',\n\t\t\t\t\tsubmitScore: '\u63d0\u4ea4\u5206\u6570 \u540d\u79f0 [NAME] \u5206\u6570 [SCORE] \u5230 [BOARD]',\n\t\t\t\t\tgetTop: '\u83b7\u53d6\u524d [N] \u540d \u4ece [BOARD]',\n\t\t\t\t\tgetRank: '\u67e5\u8be2 \u540d\u79f0 [NAME] \u5728 [BOARD] \u7684\u540d\u6b21',\n\t\t\t\t\tgetHighScore: '\u67e5\u8be2 \u540d\u79f0 [NAME] \u5728 [BOARD] \u7684\u6700\u9ad8\u5206',\n\t\t\t\t\tresetBoard: '\u91cd\u7f6e\u6392\u884c\u699c [BOARD]',\n\t\t\t\t\tgetAllData: '\u6574\u4e2a\u6392\u884c\u699c\u6570\u636e',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] \u6392\u884c\u699c [BOARD]',\n\t\t\t\t\tachievements: '\u6210\u5c31\u7cfb\u7edf',\n\t\t\t\t\tcreateAchievement: '\u521b\u5efa\u6210\u5c31 ID [ID] \u540d\u79f0 [NAME] \u6807\u7b7e [TAG]',\n\t\t\t\t\tawardAchievement: '\u9881\u53d1\u6210\u5c31 ID [ID] \u6807\u7b7e [TAG] \u7ed9 \u7528\u6237 [PLAYER] \uff08\u53ef\u9009\u540d\u79f0 [NAME]\uff09 \u5e76 [DISPLAY] \u7ed9\u7528\u6237',\n\t\t\t\t\tisAchievementUnlocked: '\u6210\u5c31 ID [ID] \u5728 \u6807\u7b7e [TAG] \u662f\u5426\u88ab \u7528\u6237 [PLAYER] \u89e3\u9501',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] \u6210\u5c31 \u6807\u7b7e [TAG] \u7528\u6237 [PLAYER]',\n\t\t\t\t\tshow: '\u663e\u793a',\n\t\t\t\t\thide: '\u9690\u85cf',\n\t\t\t\t\trefresh: '\u5237\u65b0',\n\t\t\t\t\tclose: '\u5173\u95ed',\n\t\t\t\t\tnameHeader: '\u540d\u79f0',\n\t\t\t\t\tscoreHeader: '\u5206\u6570',\n\t\t\t\t\tnoData: '(\u65e0\u6570\u636e)',\n\t\t\t\t\tnoAchievements: '(\u65e0\u6210\u5c31)',\n\t\t\t\t\tmoreRecords: '... \u8fd8\u6709 {n} \u6761\u8bb0\u5f55',\n\t\t\t\t\tunlocked: '\u5df2\u89e3\u9501',\n\t\t\t\t\tlocked: '\u672a\u89e3\u9501',\n\t\t\t\t\tleaderboardTitle: '\u6392\u884c\u699c\uff1a{board}',\n\t\t\t\t\tachievementsTitle: '\u6210\u5c31\uff1a{tag}\uff08\u7528\u6237\uff1a{player}\uff09'\n\t\t\t\t},\n\t\t\t\t'en': {\n\t\t\t\t\textName: 'Achievements & Leaderboards',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: 'View Docs',\n\t\t\t\t\tleaderboard: 'Leaderboard',\n\t\t\t\t\tcreateBoard: 'Create board [BOARD]',\n\t\t\t\t\tsubmitScore: 'Submit score NAME [NAME] SCORE [SCORE] to [BOARD]',\n\t\t\t\t\tgetTop: 'Get top [N] from [BOARD]',\n\t\t\t\t\tgetRank: 'Get rank of NAME [NAME] on [BOARD]',\n\t\t\t\t\tgetHighScore: 'Get high score of NAME [NAME] on [BOARD]',\n\t\t\t\t\tresetBoard: 'Reset board [BOARD]',\n\t\t\t\t\tgetAllData: 'All leaderboard data',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] leaderboard [BOARD]',\n\t\t\t\t\tachievements: 'Achievements',\n\t\t\t\t\tcreateAchievement: 'Create achievement ID [ID] NAME [NAME] TAG [TAG]',\n\t\t\t\t\tawardAchievement: 'Award achievement ID [ID] TAG [TAG] to PLAYER [PLAYER] (opt NAME [NAME]) and [DISPLAY] to player',\n\t\t\t\t\tisAchievementUnlocked: 'Is achievement ID [ID] in TAG [TAG] unlocked by PLAYER [PLAYER]',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] achievements TAG [TAG] PLAYER [PLAYER]',\n\t\t\t\t\tshow: 'Show',\n\t\t\t\t\thide: 'Hide',\n\t\t\t\t\trefresh: 'Refresh',\n\t\t\t\t\tclose: 'Close',\n\t\t\t\t\tnameHeader: 'Name',\n\t\t\t\t\tscoreHeader: 'Score',\n\t\t\t\t\tnoData: '(no data)',\n\t\t\t\t\tnoAchievements: '(no achievements)',\n\t\t\t\t\tmoreRecords: '... {n} more records',\n\t\t\t\t\tunlocked: 'Unlocked',\n\t\t\t\t\tlocked: 'Locked',\n\t\t\t\t\tleaderboardTitle: 'Leaderboard: {board}',\n\t\t\t\t\tachievementsTitle: 'Achievements: {tag} (Player: {player})'\n\t\t\t\t},\n\t\t\t\t'fr': {\n\t\t\t\t\textName: 'Succ\u00e8s et Classements',\n\t\t\t\t\tlabel0: 'Classement & Succ\u00e8s',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: 'Voir la doc',\n\t\t\t\t\tleaderboard: 'Classement',\n\t\t\t\t\tcreateBoard: 'Cr\u00e9er classement [BOARD]',\n\t\t\t\t\tsubmitScore: 'Soumettre score NOM [NAME] SCORE [SCORE] \u00e0 [BOARD]',\n\t\t\t\t\tgetTop: 'Obtenir top [N] de [BOARD]',\n\t\t\t\t\tgetRank: 'Rang de NOM [NAME] sur [BOARD]',\n\t\t\t\t\tgetHighScore: 'Meilleur score de NOM [NAME] sur [BOARD]',\n\t\t\t\t\tresetBoard: 'R\u00e9initialiser [BOARD]',\n\t\t\t\t\tgetAllData: 'Toutes les donn\u00e9es',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] classement [BOARD]',\n\t\t\t\t\tachievements: 'Succ\u00e8s',\n\t\t\t\t\tcreateAchievement: 'Cr\u00e9er succ\u00e8s ID [ID] NOM [NAME] TAG [TAG]',\n\t\t\t\t\tawardAchievement: 'Attribuer succ\u00e8s ID [ID] TAG [TAG] \u00e0 JOUEUR [PLAYER] (opt NOM [NAME]) et [DISPLAY] au joueur',\n\t\t\t\t\tisAchievementUnlocked: 'Succ\u00e8s ID [ID] TAG [TAG] d\u00e9bloqu\u00e9 par JOUEUR [PLAYER] ?',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] succ\u00e8s TAG [TAG] JOUEUR [PLAYER]',\n\t\t\t\t\tshow: 'Afficher',\n\t\t\t\t\thide: 'Masquer',\n\t\t\t\t\trefresh: 'Rafra\u00eechir',\n\t\t\t\t\tclose: 'Fermer',\n\t\t\t\t\tnameHeader: 'Nom',\n\t\t\t\t\tscoreHeader: 'Score',\n\t\t\t\t\tnoData: '(aucune donn\u00e9e)',\n\t\t\t\t\tnoAchievements: '(aucun succ\u00e8s)',\n\t\t\t\t\tmoreRecords: '... {n} autres enregistrements',\n\t\t\t\t\tunlocked: 'D\u00e9bloqu\u00e9',\n\t\t\t\t\tlocked: 'Verrouill\u00e9',\n\t\t\t\t\tleaderboardTitle: 'Classement : {board}',\n\t\t\t\t\tachievementsTitle: 'Succ\u00e8s : {tag} (Joueur : {player})'\n\t\t\t\t},\n\t\t\t\t'es': {\n\t\t\t\t\textName: 'Logros y Clasificaci\u00f3n',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: 'Ver documentaci\u00f3n',\n\t\t\t\t\tleaderboard: 'Clasificaci\u00f3n',\n\t\t\t\t\tcreateBoard: 'Crear clasificaci\u00f3n [BOARD]',\n\t\t\t\t\tsubmitScore: 'Enviar puntuaci\u00f3n NOMBRE [NAME] PUNT [SCORE] a [BOARD]',\n\t\t\t\t\tgetTop: 'Obtener top [N] de [BOARD]',\n\t\t\t\t\tgetRank: 'Rango de NOMBRE [NAME] en [BOARD]',\n\t\t\t\t\tgetHighScore: 'Mejor puntuaci\u00f3n de NOMBRE [NAME] en [BOARD]',\n\t\t\t\t\tresetBoard: 'Reiniciar [BOARD]',\n\t\t\t\t\tgetAllData: 'Todos los datos',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] clasificaci\u00f3n [BOARD]',\n\t\t\t\t\tachievements: 'Logros',\n\t\t\t\t\tcreateAchievement: 'Crear logro ID [ID] NOMBRE [NAME] TAG [TAG]',\n\t\t\t\t\tawardAchievement: 'Otorgar logro ID [ID] TAG [TAG] a JUGADOR [PLAYER] (opt NOMBRE [NAME]) y [DISPLAY] al jugador',\n\t\t\t\t\tisAchievementUnlocked: '\u00bfLogro ID [ID] TAG [TAG] desbloqueado por JUGADOR [PLAYER]?',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] logros TAG [TAG] JUGADOR [PLAYER]',\n\t\t\t\t\tshow: 'Mostrar',\n\t\t\t\t\thide: 'Ocultar',\n\t\t\t\t\trefresh: 'Actualizar',\n\t\t\t\t\tclose: 'Cerrar',\n\t\t\t\t\tnameHeader: 'Nombre',\n\t\t\t\t\tscoreHeader: 'Puntos',\n\t\t\t\t\tnoData: '(sin datos)',\n\t\t\t\t\tnoAchievements: '(sin logros)',\n\t\t\t\t\tmoreRecords: '... {n} registros m\u00e1s',\n\t\t\t\t\tunlocked: 'Desbloqueado',\n\t\t\t\t\tlocked: 'Bloqueado',\n\t\t\t\t\tleaderboardTitle: 'Clasificaci\u00f3n: {board}',\n\t\t\t\t\tachievementsTitle: 'Logros: {tag} (Usuario: {player})'\n\t\t\t\t},\n\t\t\t\t'ru': {\n\t\t\t\t\textName: '\u0414\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u0438 \u0422\u0430\u0431\u043b\u0438\u0446\u044b \u043b\u0438\u0434\u0435\u0440\u043e\u0432',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: '\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e',\n\t\t\t\t\tleaderboard: '\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043b\u0438\u0434\u0435\u0440\u043e\u0432',\n\t\t\t\t\tcreateBoard: '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 [BOARD]',\n\t\t\t\t\tsubmitScore: '\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0447\u043a\u0438 \u0418\u041c\u042f [NAME] \u041e\u0427\u041a\u0418 [SCORE] \u0432 [BOARD]',\n\t\t\t\t\tgetTop: '\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u043e\u043f [N] \u0438\u0437 [BOARD]',\n\t\t\t\t\tgetRank: '\u0420\u0430\u043d\u0433 \u0418\u041c\u042f [NAME] \u0432 [BOARD]',\n\t\t\t\t\tgetHighScore: '\u041b\u0443\u0447\u0448\u0438\u0439 \u0441\u0447\u0435\u0442 \u0418\u041c\u042f [NAME] \u0432 [BOARD]',\n\t\t\t\t\tresetBoard: '\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c [BOARD]',\n\t\t\t\t\tgetAllData: '\u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] \u0442\u0430\u0431\u043b\u0438\u0446\u0430 [BOARD]',\n\t\t\t\t\tachievements: '\u0414\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f',\n\t\t\t\t\tcreateAchievement: '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435 ID [ID] \u0418\u041c\u042f [NAME] TAG [TAG]',\n\t\t\t\t\tawardAchievement: '\u0412\u0440\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435 ID [ID] TAG [TAG] \u0438\u0433\u0440\u043e\u043a\u0443 [PLAYER] (\u0438\u043c\u044f [NAME]) \u0438 [DISPLAY]',\n\t\t\t\t\tisAchievementUnlocked: '\u0414\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435 ID [ID] \u0432 TAG [TAG] \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u043c [PLAYER] ?',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f TAG [TAG] \u0418\u0413\u0420\u041e\u041a [PLAYER]',\n\t\t\t\t\tshow: '\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c',\n\t\t\t\t\thide: '\u0421\u043a\u0440\u044b\u0442\u044c',\n\t\t\t\t\trefresh: '\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c',\n\t\t\t\t\tclose: '\u0417\u0430\u043a\u0440\u044b\u0442\u044c',\n\t\t\t\t\tnameHeader: '\u0418\u043c\u044f',\n\t\t\t\t\tscoreHeader: '\u041e\u0447\u043a\u0438',\n\t\t\t\t\tnoData: '(\u043d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445)',\n\t\t\t\t\tnoAchievements: '(\u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0439)',\n\t\t\t\t\tmoreRecords: '... \u0435\u0449\u0451 {n} \u0437\u0430\u043f\u0438\u0441\u0435\u0439',\n\t\t\t\t\tunlocked: '\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e',\n\t\t\t\t\tlocked: '\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e',\n\t\t\t\t\tleaderboardTitle: '\u0422\u0430\u0431\u043b\u0438\u0446\u0430: {board}',\n\t\t\t\t\tachievementsTitle: '\u0414\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f: {tag} (\u0418\u0433\u0440\u043e\u043a: {player})'\n\t\t\t\t},\n\t\t\t\t'ar': {\n\t\t\t\t\textName: '\u0627\u0644\u0625\u0646\u062c\u0627\u0632\u0627\u062a \u0648\u0644\u0648\u0627\u0626\u062d \u0627\u0644\u0645\u062a\u0635\u062f\u0631\u064a\u0646',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: '\u0639\u0631\u0636 \u0627\u0644\u0648\u062b\u0627\u0626\u0642',\n\t\t\t\t\tleaderboard: '\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u062a\u0635\u062f\u0631\u064a\u0646',\n\t\t\t\t\tcreateBoard: '\u0625\u0646\u0634\u0627\u0621 \u0642\u0627\u0626\u0645\u0629 [BOARD]',\n\t\t\t\t\tsubmitScore: '\u0625\u0631\u0633\u0627\u0644 \u0646\u0642\u0627\u0637 \u0627\u0644\u0627\u0633\u0645 [NAME] \u0627\u0644\u0646\u0642\u0627\u0637 [SCORE] \u0625\u0644\u0649 [BOARD]',\n\t\t\t\t\tgetTop: '\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0623\u0639\u0644\u0649 [N] \u0645\u0646 [BOARD]',\n\t\t\t\t\tgetRank: '\u062a\u0631\u062a\u064a\u0628 \u0627\u0644\u0627\u0633\u0645 [NAME] \u0641\u064a [BOARD]',\n\t\t\t\t\tgetHighScore: '\u0623\u0641\u0636\u0644 \u0646\u062a\u064a\u062c\u0629 \u0644\u0644\u0627\u0633\u0645 [NAME] \u0641\u064a [BOARD]',\n\t\t\t\t\tresetBoard: '\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 [BOARD]',\n\t\t\t\t\tgetAllData: '\u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] \u0642\u0627\u0626\u0645\u0629 [BOARD]',\n\t\t\t\t\tachievements: '\u0627\u0644\u0625\u0646\u062c\u0627\u0632\u0627\u062a',\n\t\t\t\t\tcreateAchievement: '\u0625\u0646\u0634\u0627\u0621 \u0625\u0646\u062c\u0627\u0632 ID [ID] \u0627\u0644\u0627\u0633\u0645 [NAME] \u0627\u0644\u0648\u0633\u0645 [TAG]',\n\t\t\t\t\tawardAchievement: '\u0645\u0646\u062d \u0625\u0646\u062c\u0627\u0632 ID [ID] \u0627\u0644\u0648\u0633\u0645 [TAG] \u0644\u0644\u0627\u0639\u0628 [PLAYER] (\u0627\u0644\u0627\u0633\u0645 [NAME]) \u0648[DISPLAY]',\n\t\t\t\t\tisAchievementUnlocked: '\u0647\u0644 \u0627\u0644\u0625\u0646\u062c\u0627\u0632 ID [ID] \u0641\u064a \u0627\u0644\u0648\u0633\u0645 [TAG] \u062a\u0645 \u0641\u062a\u062d\u0647 \u0628\u0648\u0627\u0633\u0637\u0629 [PLAYER]\u061f',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] \u0625\u0646\u062c\u0627\u0632\u0627\u062a \u0627\u0644\u0648\u0633\u0645 [TAG] \u0627\u0644\u0644\u0627\u0639\u0628 [PLAYER]',\n\t\t\t\t\tshow: '\u0639\u0631\u0636',\n\t\t\t\t\thide: '\u0625\u062e\u0641\u0627\u0621',\n\t\t\t\t\trefresh: '\u062a\u062d\u062f\u064a\u062b',\n\t\t\t\t\tclose: '\u0625\u063a\u0644\u0627\u0642',\n\t\t\t\t\tnameHeader: '\u0627\u0644\u0627\u0633\u0645',\n\t\t\t\t\tscoreHeader: '\u0627\u0644\u0646\u0642\u0627\u0637',\n\t\t\t\t\tnoData: '(\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a)',\n\t\t\t\t\tnoAchievements: '(\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0646\u062c\u0627\u0632\u0627\u062a)',\n\t\t\t\t\tmoreRecords: '... {n} \u0633\u062c\u0644\u0627\u062a \u0623\u062e\u0631\u0649',\n\t\t\t\t\tunlocked: '\u062a\u0645 \u0627\u0644\u0641\u062a\u062d',\n\t\t\t\t\tlocked: '\u0645\u0642\u0641\u0644',\n\t\t\t\t\tleaderboardTitle: '\u0642\u0627\u0626\u0645\u0629: {board}',\n\t\t\t\t\tachievementsTitle: '\u0627\u0644\u0625\u0646\u062c\u0627\u0632\u0627\u062a: {tag} (\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: {player})'\n\t\t\t\t},\n\t\t\t\t'ja': {\n\t\t\t\t\textName: '\u5b9f\u7e3e\u3068\u30e9\u30f3\u30ad\u30f3\u30b0',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: '\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u308b',\n\t\t\t\t\tleaderboard: '\u30e9\u30f3\u30ad\u30f3\u30b0',\n\t\t\t\t\tcreateBoard: '\u30e9\u30f3\u30ad\u30f3\u30b0\u4f5c\u6210 [BOARD]',\n\t\t\t\t\tsubmitScore: '\u30b9\u30b3\u30a2\u3092\u9001\u4fe1 \u540d\u524d [NAME] \u30b9\u30b3\u30a2 [SCORE] \u3078 [BOARD]',\n\t\t\t\t\tgetTop: '[BOARD] \u306e\u4e0a\u4f4d [N] \u3092\u53d6\u5f97',\n\t\t\t\t\tgetRank: '[BOARD] \u306e \u540d\u524d [NAME] \u306e\u9806\u4f4d',\n\t\t\t\t\tgetHighScore: '[BOARD] \u306e \u540d\u524d [NAME] \u306e\u6700\u9ad8\u30b9\u30b3\u30a2',\n\t\t\t\t\tresetBoard: '\u30e9\u30f3\u30ad\u30f3\u30b0\u3092\u30ea\u30bb\u30c3\u30c8 [BOARD]',\n\t\t\t\t\tgetAllData: '\u3059\u3079\u3066\u306e\u30c7\u30fc\u30bf',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] \u30e9\u30f3\u30ad\u30f3\u30b0 [BOARD]',\n\t\t\t\t\tachievements: '\u5b9f\u7e3e',\n\t\t\t\t\tcreateAchievement: '\u5b9f\u7e3e\u4f5c\u6210 ID [ID] \u540d\u524d [NAME] \u30bf\u30b0 [TAG]',\n\t\t\t\t\tawardAchievement: '\u5b9f\u7e3e ID [ID] \u30bf\u30b0 [TAG] \u3092 \u30d7\u30ec\u30a4\u30e4\u30fc [PLAYER] \u306b\u4ed8\u4e0e (\u540d\u524d [NAME]) \u3068[DISPLAY]',\n\t\t\t\t\tisAchievementUnlocked: '\u5b9f\u7e3e ID [ID] \u30bf\u30b0 [TAG] \u304c \u30d7\u30ec\u30a4\u30e4\u30fc [PLAYER] \u306b\u3088\u3063\u3066\u89e3\u9664\u3055\u308c\u3066\u3044\u308b\u304b',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] \u5b9f\u7e3e \u30bf\u30b0 [TAG] \u30d7\u30ec\u30a4\u30e4\u30fc [PLAYER]',\n\t\t\t\t\tshow: '\u8868\u793a',\n\t\t\t\t\thide: '\u975e\u8868\u793a',\n\t\t\t\t\trefresh: '\u66f4\u65b0',\n\t\t\t\t\tclose: '\u9589\u3058\u308b',\n\t\t\t\t\tnameHeader: '\u540d\u524d',\n\t\t\t\t\tscoreHeader: '\u30b9\u30b3\u30a2',\n\t\t\t\t\tnoData: '(\u30c7\u30fc\u30bf\u306a\u3057)',\n\t\t\t\t\tnoAchievements: '(\u5b9f\u7e3e\u306a\u3057)',\n\t\t\t\t\tmoreRecords: '... \u3042\u3068 {n} \u4ef6',\n\t\t\t\t\tunlocked: '\u89e3\u9664\u6e08\u307f',\n\t\t\t\t\tlocked: '\u30ed\u30c3\u30af\u4e2d',\n\t\t\t\t\tleaderboardTitle: '\u30e9\u30f3\u30ad\u30f3\u30b0\uff1a{board}',\n\t\t\t\t\tachievementsTitle: '\u5b9f\u7e3e\uff1a{tag}\uff08\u30d7\u30ec\u30a4\u30e4\u30fc\uff1a{player}\uff09'\n\t\t\t\t},\n\t\t\t\t'ko': {\n\t\t\t\t\textName: '\uc5c5\uc801 \ubc0f \uc21c\uc704\ud45c',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: '\ubb38\uc11c \ubcf4\uae30',\n\t\t\t\t\tleaderboard: '\uc21c\uc704\ud45c',\n\t\t\t\t\tcreateBoard: '\uc21c\uc704\ud45c \uc0dd\uc131 [BOARD]',\n\t\t\t\t\tsubmitScore: '\uc810\uc218 \uc81c\ucd9c \uc774\ub984 [NAME] \uc810\uc218 [SCORE] \uc5d0 [BOARD]',\n\t\t\t\t\tgetTop: '[BOARD] \uc5d0\uc11c \uc0c1\uc704 [N] \uac00\uc838\uc624\uae30',\n\t\t\t\t\tgetRank: '[BOARD] \uc5d0\uc11c \uc774\ub984 [NAME] \ub7ad\ud06c',\n\t\t\t\t\tgetHighScore: '[BOARD] \uc5d0\uc11c \uc774\ub984 [NAME] \ucd5c\uace0\uc810',\n\t\t\t\t\tresetBoard: '\uc21c\uc704\ud45c \ucd08\uae30\ud654 [BOARD]',\n\t\t\t\t\tgetAllData: '\ubaa8\ub4e0 \ub370\uc774\ud130',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] \uc21c\uc704\ud45c [BOARD]',\n\t\t\t\t\tachievements: '\uc5c5\uc801',\n\t\t\t\t\tcreateAchievement: '\uc5c5\uc801 \uc0dd\uc131 ID [ID] \uc774\ub984 [NAME] \ud0dc\uadf8 [TAG]',\n\t\t\t\t\tawardAchievement: '\uc5c5\uc801 ID [ID] \ud0dc\uadf8 [TAG] \ub97c \ud50c\ub808\uc774\uc5b4 [PLAYER] \uc5d0\uac8c \uc218\uc5ec (\uc774\ub984 [NAME]) \ubc0f [DISPLAY]',\n\t\t\t\t\tisAchievementUnlocked: '\uc5c5\uc801 ID [ID] \ud0dc\uadf8 [TAG] \uc774 \ud50c\ub808\uc774\uc5b4 [PLAYER] \uc5d0 \uc758\ud574 \ud574\uc81c\ub418\uc5c8\ub294\uac00?',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] \uc5c5\uc801 \ud0dc\uadf8 [TAG] \ud50c\ub808\uc774\uc5b4 [PLAYER]',\n\t\t\t\t\tshow: '\ud45c\uc2dc',\n\t\t\t\t\thide: '\uc228\uae30\uae30',\n\t\t\t\t\trefresh: '\uc0c8\ub85c\uace0\uce68',\n\t\t\t\t\tclose: '\ub2eb\uae30',\n\t\t\t\t\tnameHeader: '\uc774\ub984',\n\t\t\t\t\tscoreHeader: '\uc810\uc218',\n\t\t\t\t\tnoData: '(\ub370\uc774\ud130 \uc5c6\uc74c)',\n\t\t\t\t\tnoAchievements: '(\uc5c5\uc801 \uc5c6\uc74c)',\n\t\t\t\t\tmoreRecords: '... {n} \uac1c\uc758 \ucd94\uac00 \uae30\ub85d',\n\t\t\t\t\tunlocked: '\ud574\uc81c\ub428',\n\t\t\t\t\tlocked: '\uc7a0\uae40',\n\t\t\t\t\tleaderboardTitle: '\uc21c\uc704\ud45c: {board}',\n\t\t\t\t\tachievementsTitle: '\uc5c5\uc801: {tag} (\uc0ac\uc6a9\uc790: {player})'\n\t\t\t\t},\n\t\t\t\t'pt': {\n\t\t\t\t\textName: 'Conquistas e Rankings',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: 'Ver documenta\u00e7\u00e3o',\n\t\t\t\t\tleaderboard: 'Ranking',\n\t\t\t\t\tcreateBoard: 'Criar ranking [BOARD]',\n\t\t\t\t\tsubmitScore: 'Enviar pontua\u00e7\u00e3o NOME [NAME] PONT [SCORE] para [BOARD]',\n\t\t\t\t\tgetTop: 'Obter top [N] de [BOARD]',\n\t\t\t\t\tgetRank: 'Posi\u00e7\u00e3o de NOME [NAME] em [BOARD]',\n\t\t\t\t\tgetHighScore: 'Maior pontua\u00e7\u00e3o de NOME [NAME] em [BOARD]',\n\t\t\t\t\tresetBoard: 'Resetar [BOARD]',\n\t\t\t\t\tgetAllData: 'Todos os dados',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] ranking [BOARD]',\n\t\t\t\t\tachievements: 'Conquistas',\n\t\t\t\t\tcreateAchievement: 'Criar conquista ID [ID] NOME [NAME] TAG [TAG]',\n\t\t\t\t\tawardAchievement: 'Conceder conquista ID [ID] TAG [TAG] para JOGADOR [PLAYER] (nome [NAME]) e [DISPLAY] ao jogador',\n\t\t\t\t\tisAchievementUnlocked: 'Conquista ID [ID] TAG [TAG] desbloqueada por JOGADOR [PLAYER] ?',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] conquistas TAG [TAG] JOGADOR [PLAYER]',\n\t\t\t\t\tshow: 'Mostrar',\n\t\t\t\t\thide: 'Esconder',\n\t\t\t\t\trefresh: 'Atualizar',\n\t\t\t\t\tclose: 'Fechar',\n\t\t\t\t\tnameHeader: 'Nome',\n\t\t\t\t\tscoreHeader: 'Pontos',\n\t\t\t\t\tnoData: '(sem dados)',\n\t\t\t\t\tnoAchievements: '(sem conquistas)',\n\t\t\t\t\tmoreRecords: '... {n} registros a mais',\n\t\t\t\t\tunlocked: 'Desbloqueado',\n\t\t\t\t\tlocked: 'Bloqueado',\n\t\t\t\t\tleaderboardTitle: 'Ranking: {board}',\n\t\t\t\t\tachievementsTitle: 'Conquistas: {tag} (Jogador: {player})'\n\t\t\t\t},\n\t\t\t\t'it': {\n\t\t\t\t\textName: 'Obiettivi e Classifiche',\n\t\t\t\t\tlabel_version: 'V' + version,\n\t\t\t\t\tdocLink: 'Vedi documentazione',\n\t\t\t\t\tleaderboard: 'Classifica',\n\t\t\t\t\tcreateBoard: 'Crea classifica [BOARD]',\n\t\t\t\t\tsubmitScore: 'Invia punteggio NOME [NAME] PUNT [SCORE] a [BOARD]',\n\t\t\t\t\tgetTop: 'Prendi top [N] da [BOARD]',\n\t\t\t\t\tgetRank: 'Classifica di NOME [NAME] su [BOARD]',\n\t\t\t\t\tgetHighScore: 'Miglior punteggio di NOME [NAME] su [BOARD]',\n\t\t\t\t\tresetBoard: 'Resetta [BOARD]',\n\t\t\t\t\tgetAllData: 'Tutti i dati',\n\t\t\t\t\ttoggleDisplay: '[TOGGLE] classifica [BOARD]',\n\t\t\t\t\tachievements: 'Obiettivi',\n\t\t\t\t\tcreateAchievement: 'Crea obiettivo ID [ID] NOME [NAME] TAG [TAG]',\n\t\t\t\t\tawardAchievement: 'Assegna obiettivo ID [ID] TAG [TAG] a GIOCATORE [PLAYER] (nome [NAME]) e [DISPLAY] al giocatore',\n\t\t\t\t\tisAchievementUnlocked: 'Obiettivo ID [ID] TAG [TAG] sbloccato da GIOCATORE [PLAYER] ?',\n\t\t\t\t\ttoggleAchievementsDisplay: '[TOGGLE] obiettivi TAG [TAG] GIOCATORE [PLAYER]',\n\t\t\t\t\tshow: 'Mostra',\n\t\t\t\t\thide: 'Nascondi',\n\t\t\t\t\trefresh: 'Aggiorna',\n\t\t\t\t\tclose: 'Chiudi',\n\t\t\t\t\tnameHeader: 'Nome',\n\t\t\t\t\tscoreHeader: 'Punteggio',\n\t\t\t\t\tnoData: '(nessun dato)',\n\t\t\t\t\tnoAchievements: '(nessun obiettivo)',\n\t\t\t\t\tmoreRecords: '... {n} record in pi\u00f9',\n\t\t\t\t\tunlocked: 'Sbloccato',\n\t\t\t\t\tlocked: 'Bloccato',\n\t\t\t\t\tleaderboardTitle: 'Classifica: {board}',\n\t\t\t\t\tachievementsTitle: 'Obiettivi: {tag} (Giocatore: {player})'\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t_detectLang() {\n\t\t\ttry {\n\t\t\t\tconst nav = (typeof navigator !== 'undefined' && navigator.language) ? navigator.language.toLowerCase() : 'en';\n\t\t\t\tif (nav.startsWith('zh')) return 'zh-cn';\n\t\t\t\tif (nav.startsWith('fr')) return 'fr';\n\t\t\t\tif (nav.startsWith('es')) return 'es';\n\t\t\t\tif (nav.startsWith('ru')) return 'ru';\n\t\t\t\tif (nav.startsWith('ar')) return 'ar';\n\t\t\t\tif (nav.startsWith('ja')) return 'ja';\n\t\t\t\tif (nav.startsWith('ko')) return 'ko';\n\t\t\t\tif (nav.startsWith('pt')) return 'pt';\n\t\t\t\tif (nav.startsWith('it')) return 'it';\n\t\t\t\treturn 'en';\n\t\t\t} catch (e) {\n\t\t\t\treturn 'en';\n\t\t\t}\n\t\t}\n\n\t\t_t(key, vars) {\n\t\t\tconst dict = this._translations && this._translations[this._lang] ? this._translations[this._lang] : this._translations['en'];\n\t\t\tlet s = (dict && dict[key]) ? dict[key] : (this._translations['en'][key] || key);\n\t\t\tif (vars && typeof vars === 'object') {\n\t\t\t\tObject.keys(vars).forEach(k => {\n\t\t\t\t\ts = s.replace(new RegExp(`\\\\{${k}\\\\}`, 'g'), String(vars[k]));\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn s;\n\t\t}\n\n\t\tgetInfo() {\n\t\t\tconst B = (window.Scratch && window.Scratch.BlockType) ? window.Scratch.BlockType : { COMMAND: 'command', REPORTER: 'reporter' };\n\t\t\tconst A = (window.Scratch && window.Scratch.ArgumentType) ? window.Scratch.ArgumentType : { STRING: 'string', NUMBER: 'number' };\n\t\t\tconst BUTTON = (B && B.BUTTON) ? B.BUTTON : B.COMMAND;\n            return {\n\t\t\t\tid: 'leaderboard_and_achievements',\n\t\t\t\tname: this._t('extName'),\n\t\t\t\tcolor1: '#3494fc',\n\t\t\t\tcolor2: '#3494fc',\n\t\t\t\tcolor3: '#3494fc',\n\t\t\t\tblocks: [\n                    { opcode: 'label', blockType: B.LABEL, text: `\u2014\u2014\u2014 ${this._t('extName')} \u2014\u2014\u2014` },\n                    { opcode: 'label_version', blockType: B.LABEL, text: this._t('label_version')},\n                    { opcode: 'docLink', blockType: B.COMMAND, text: '\ud83c\udfc6 ' + this._t('docLink') },\n\t\t\t\t\t{ opcode: 'leaderboard_text', blockType: B.LABEL, text: ` ${this._t('leaderboard')}`},\n\t\t\t\t\t{ opcode: 'createBoard', blockType: B.COMMAND, text: '\ud83c\udfc6 ' + this._t('createBoard'),\n\t\t\t\t\t\targuments: { BOARD: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6392\u884c\u699c' } } },\n\t\t\t\t\t{ opcode: 'submitScore', blockType: B.COMMAND, text: '\ud83c\udfc6 ' + this._t('submitScore'),\n\t\t\t\t\t\targuments: { NAME: { type: A.STRING, defaultValue: '\u73a9\u5bb6' }, SCORE: { type: A.NUMBER, defaultValue: 0 }, BOARD: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6392\u884c\u699c' } } },\n\t\t\t\t\t{ opcode: 'getTop', blockType: B.REPORTER, text: '\ud83c\udfc6 ' + this._t('getTop'),\n\t\t\t\t\t\targuments: { N: { type: A.NUMBER, defaultValue: 10 }, BOARD: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6392\u884c\u699c' } } },\n\t\t\t\t\t{ opcode: 'getRank', blockType: B.REPORTER, text: '\ud83c\udfc6 ' + this._t('getRank'),\n\t\t\t\t\t\targuments: { NAME: { type: A.STRING, defaultValue: '\u73a9\u5bb6' }, BOARD: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6392\u884c\u699c' } } },\n\t\t\t\t\t{ opcode: 'getHighScore', blockType: B.REPORTER, text: '\ud83c\udfc6 ' + this._t('getHighScore'),\n\t\t\t\t\t\targuments: { NAME: { type: A.STRING, defaultValue: '\u73a9\u5bb6' }, BOARD: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6392\u884c\u699c' } } },\n\t\t\t\t\t{ opcode: 'resetBoard', blockType: B.COMMAND, text: '\ud83c\udfc6 ' + this._t('resetBoard'),\n\t\t\t\t\t\targuments: { BOARD: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6392\u884c\u699c' } } },\n\t\t\t\t\t{ opcode: 'getAllData', blockType: B.REPORTER, text: '\ud83c\udfc6 ' + this._t('getAllData') },\n\t\t\t\t\t{ opcode: 'toggleDisplay', blockType: B.COMMAND, text: '\ud83c\udfc6 ' + this._t('toggleDisplay'),\n\t\t\t\t\t\targuments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, BOARD: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6392\u884c\u699c' } } },\n\t\t\t\t\t{ opcode: 'cloud_text', blockType: B.LABEL, text: ' \u4e91\u5b58\u50a8' },\n\t\t\t\t\t{ opcode: 'pushAllToCloud', blockType: B.COMMAND, text: '\u63a8\u9001\u5168\u90e8\u5230\u4e91\u7aef' },\n\t\t\t\t\t{ opcode: 'pullAllFromCloud', blockType: B.COMMAND, text: '\u4ece\u4e91\u7aef\u62c9\u53d6\u5168\u90e8' },\n\t\t\t\t\t{ opcode: 'setPort', blockType: B.COMMAND, text: '\u8bbe\u7f6e\u7aef\u53e3 [PORT]', arguments: { PORT: { type: A.STRING, defaultValue: 'default' } } },\n\t\t\t\t\t{ opcode: 'getPort', blockType: B.REPORTER, text: '\u5f53\u524d\u7aef\u53e3' },\n\t\t\t\t\t{ opcode: 'setCloudAutoSync', blockType: B.COMMAND, text: '\u81ea\u52a8\u4e91\u540c\u6b65 [TOGGLE]',\n\t\t\t\t\t\targuments: { TOGGLE: { type: A.STRING, menu: 'toggle' } } },\n\t\t\t\t\t{ opcode: 'achievement_text', blockType: B.LABEL, text: ` ${this._t('achievements')}`},\n\t\t\t\t\t{ opcode: 'createAchievement', blockType: B.COMMAND, text: '\ud83c\udfc6 ' + this._t('createAchievement'),\n\t\t\t\t\t\targuments: { ID: { type: A.STRING, defaultValue: 'achv1' }, NAME: { type: A.STRING, defaultValue: '\u6210\u5c31\u540d\u79f0' }, TAG: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6807\u7b7e' } } },\n\t\t\t\t\t{ opcode: 'awardAchievement', blockType: B.COMMAND, text: '\ud83c\udfc6 ' + this._t('awardAchievement'),\n\t\t\t\t\t\targuments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6807\u7b7e' }, PLAYER: { type: A.STRING, defaultValue: '\u73a9\u5bb6' }, NAME: { type: A.STRING, defaultValue: '' }, DISPLAY: { type: A.STRING, menu: 'display' } } },\n\t\t\t\t\t{ opcode: 'isAchievementUnlocked', blockType: B.REPORTER, text: '\ud83c\udfc6 ' + this._t('isAchievementUnlocked'),\n\t\t\t\t\t\targuments: { ID: { type: A.STRING, defaultValue: 'achv1' }, TAG: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6807\u7b7e' }, PLAYER: { type: A.STRING, defaultValue: '\u73a9\u5bb6' } } },\n\t\t\t\t\t{ opcode: 'toggleAchievementsDisplay', blockType: B.COMMAND, text: '\ud83c\udfc6 ' + this._t('toggleAchievementsDisplay'),\n\t\t\t\t\t\targuments: { TOGGLE: {type: A.STRING, menu: 'toggle'}, TAG: { type: A.STRING, defaultValue: '\u9ed8\u8ba4\u6807\u7b7e' }, PLAYER: { type: A.STRING, defaultValue: '\u73a9\u5bb6' } } }\n\t\t\t\t],\n\t\t\t\tmenus: {\n                    toggle: [\n                        { text: this._t('show'), value: 'open' },\n                        { text: this._t('hide'), value: 'close' }\n                    ],\n \t\t\t\t\tdisplay: [\n \t\t\t\t\t\t{ text: this._t('show'), value: 'show' },\n \t\t\t\t\t\t{ text: this._t('hide'), value: 'hide' }\n \t\t\t\t\t]\n                 }\n \t\t\t};\n \t\t}\n\n\t\t_storageKeyForPort() {\n\t\t\treturn String(this.storageKey || 'achieve_and_leaderboard') + ':' + String(this._port || 'default');\n\t\t}\n\n\t\t_loadAll() {\n\t\t\ttry {\n\t\t\t\tif (typeof localStorage !== 'undefined') {\n\t\t\t\t\tconst key = this._storageKeyForPort();\n\t\t\t\t\tconst raw = localStorage.getItem(key);\n\t\t\t\t\tif (raw) {\n\t\t\t\t\t\ttry { return JSON.parse(raw); } catch (e) {}\n\t\t\t\t\t}\n\t\t\t\t\tconst legacyRaw = localStorage.getItem(this.storageKey);\n\t\t\t\t\tif (legacyRaw) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst parsed = JSON.parse(legacyRaw);\n\t\t\t\t\t\t\ttry { localStorage.setItem(key, JSON.stringify(parsed)); } catch (e) {}\n\t\t\t\t\t\t\treturn parsed;\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t\treturn this._inMemoryStore[this._port] ? this._inMemoryStore[this._port] : {};\n \t\t}\n \n \t\t_saveAll(data) {\n\t\t\ttry {\n\t\t\t\tconst key = this._storageKeyForPort();\n\t\t\t\tif (typeof localStorage !== 'undefined') {\n\t\t\t\t\tlocalStorage.setItem(key, JSON.stringify(data));\n\t\t\t\t} else {\n\t\t\t\t\tthis._inMemoryStore[this._port] = data;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tthis._inMemoryStore[this._port] = data;\n\t\t\t}\n\t\t\tif (this._cloudProvider && this._cloudAutoSync && typeof this._cloudProvider.upload === 'function') {\n\t\t\t\ttry {\n\t\t\t\t\tconst payload = JSON.stringify(data);\n\t\t\t\t\tPromise.resolve(this._cloudProvider.upload(this._storageKeyForPort(), payload)).catch(() => {});\n\t\t\t\t} catch (e) {}\n\t\t\t}\n \t\t}\n \n \t\tregisterCloudProvider(provider) {\n \t\t\tif (!provider) return false;\n \t\t\tthis._cloudProvider = provider;\n \t\t\treturn true;\n \t\t}\n \n \t\tasync _pushAllToCloud() {\n\t\t\tif (!this._cloudProvider || typeof this._cloudProvider.upload !== 'function') return false;\n\t\t\tconst all = this._loadAll();\n\t\t\ttry {\n\t\t\t\tawait this._cloudProvider.upload(this._storageKeyForPort(), JSON.stringify(all));\n\t\t\t\treturn true;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n \t\t}\n \n \t\tasync _pullAllFromCloud() {\n\t\t\tif (!this._cloudProvider || typeof this._cloudProvider.download !== 'function') return false;\n\t\t\ttry {\n\t\t\t\tconst raw = await this._cloudProvider.download(this._storageKeyForPort());\n\t\t\t\tif (!raw) return false;\n\t\t\t\tlet parsed = {};\n\t\t\t\ttry { parsed = JSON.parse(raw); } catch (e) { return false; }\n\t\t\t\tthis._saveAll(parsed);\n\t\t\t\treturn true;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n \t\t}\n \n \t\tpushAllToCloud(args) {\n \t\t\tif (typeof this._pushAllToCloud === 'function') this._pushAllToCloud().catch(() => {});\n \t\t}\n \n \t\tpullAllFromCloud(args) {\n \t\t\tif (typeof this._pullAllFromCloud === 'function') this._pullAllFromCloud().catch(() => {});\n \t\t}\n \n \t\tsetCloudAutoSync(args) {\n \t\t\tconst toggle = String((args && args.TOGGLE) || '').toLowerCase();\n \t\t\tif (toggle === 'open' || toggle === 'show' || toggle === 'true' || toggle === '1') this.setCloudAutoSyncEnabled(true);\n \t\t\telse if (toggle === 'close' || toggle === 'hide' || toggle === 'false' || toggle === '0') this.setCloudAutoSyncEnabled(false);\n \t\t}\n \n \t\tsetCloudAutoSyncEnabled(enabled) {\n \t\t\tthis._cloudAutoSync = !!enabled;\n \t\t}\n \n \t\t_ensureBoard(data, board) {\n \t\t\tif (!data[board]) data[board] = {};\n \t\t\treturn data[board];\n \t\t}\n\n        docLink() {\n            const url = 'https://chess-brain.github.io/doc/achievements_and_leaderboards.html';\n            if (typeof window === 'undefined') return;\n            try {\n                this._openUrl(url);\n            } catch (e) {}\n        }\n\n\t\tcreateBoard(args) {\n\t\t\tconst board = String(args.BOARD || '\u9ed8\u8ba4\u6392\u884c\u699c');\n\t\t\tconst all = this._loadAll();\n\t\t\tthis._ensureBoard(all, board);\n\t\t\tthis._saveAll(all);\n\t\t}\n\n\t\tsubmitScore(args) {\n\t\t\tconst board = String(args.BOARD || '\u9ed8\u8ba4\u6392\u884c\u699c');\n\t\t\tconst name = String(args.NAME || '\u73a9\u5bb6');\n\t\t\tconst score = Number(args.SCORE) || 0;\n\t\t\tconst all = this._loadAll();\n\t\t\tconst b = this._ensureBoard(all, board);\n\t\t\tconst prev = b[name];\n\t\t\tconst now = Date.now();\n\t\t\tif (!prev || score > prev.score || (score === prev.score && now < prev.ts)) {\n\t\t\t\tb[name] = { score: score, ts: now };\n\t\t\t}\n\t\t\tthis._saveAll(all);\n\t\t}\n\n\t\tgetTop(args) {\n\t\t\tconst board = String(args.BOARD || '\u9ed8\u8ba4\u6392\u884c\u699c');\n\t\t\tconst n = Math.max(0, Math.floor(Number(args.N) || 0));\n\t\t\tconst all = this._loadAll();\n\t\t\tconst b = all[board] || {};\n\t\t\tconst arr = Object.keys(b).map(name => ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));\n\t\t\tarr.sort((a, c) => {\n\t\t\t\tif (c.score !== a.score) return c.score - a.score;\n\t\t\t\treturn a.ts - c.ts;\n\t\t\t});\n\t\t\tconst top = arr.slice(0, n).map((item, idx) => ({ rank: idx + 1, name: item.name, score: item.score }));\n\t\t\ttry {\n\t\t\t\treturn JSON.stringify(top);\n\t\t\t} catch (e) {\n\t\t\t\treturn '[]';\n\t\t\t}\n\t\t}\n\n\t\tgetRank(args) {\n\t\t\tconst board = String(args.BOARD || '\u9ed8\u8ba4\u6392\u884c\u699c');\n\t\t\tconst name = String(args.NAME || '\u73a9\u5bb6');\n\t\t\tconst all = this._loadAll();\n\t\t\tconst b = all[board] || {};\n\t\t\tconst arr = Object.keys(b).map(nm => ({ name: nm, score: Number(b[nm].score), ts: Number(b[nm].ts) }));\n\t\t\tarr.sort((a, c) => {\n\t\t\t\tif (c.score !== a.score) return c.score - a.score;\n\t\t\t\treturn a.ts - c.ts;\n\t\t\t});\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tif (arr[i].name === name) return i + 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tgetHighScore(args) {\n\t\t\tconst board = String(args.BOARD || '\u9ed8\u8ba4\u6392\u884c\u699c');\n\t\t\tconst name = String(args.NAME || '\u73a9\u5bb6');\n\t\t\tconst all = this._loadAll();\n\t\t\tconst b = all[board] || {};\n\t\t\tconst entry = b[name];\n\t\t\treturn entry ? Number(entry.score) : 0;\n\t\t}\n\n\t\tresetBoard(args) {\n\t\t\tconst board = String(args.BOARD || '\u9ed8\u8ba4\u6392\u884c\u699c');\n\t\t\tconst all = this._loadAll();\n\t\t\tif (all[board]) delete all[board];\n\t\t\tthis._saveAll(all);\n\t\t}\n\n\t\tgetAllData() {\n\t\t\tconst all = this._loadAll();\n\t\t\tall.__achievements_meta = all.__achievements_meta || {};\n\t\t\tall.__achievements_unlocked = all.__achievements_unlocked || {};\n\t\t\ttry {\n\t\t\t\treturn JSON.stringify(all);\n\t\t\t} catch (e) {\n\t\t\t\treturn '{}';\n\t\t\t}\n\t\t}\n\n\t\ttoggleDisplay(args) {\n\t\t\tconst toggle = String((args.TOGGLE || '')).toLowerCase();\n\t\t\tconst board = String(args.BOARD || '\u9ed8\u8ba4\u6392\u884c\u699c').trim();\n\t\t\tif (toggle === 'open') {\n\t\t\t\tthis._showOverlay(board);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (toggle === 'close') {\n\t\t\t\tif (this._overlayElement && this._overlayMode === 'leaderboard') this._hideOverlay();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._overlayElement && this._overlayMode === 'leaderboard' && this._overlayContext && this._overlayContext.board === board) {\n\t\t\t\tthis._hideOverlay();\n\t\t\t} else {\n\t\t\t\tthis._showOverlay(board);\n\t\t\t}\n\t\t}\n\n\t\t_ensureAchievementMeta(all) {\n\t\t\tif (!all.__achievements_meta) all.__achievements_meta = {};\n\t\t\treturn all.__achievements_meta;\n\t\t}\n\t\t_ensureAchievementUnlocked(all) {\n\t\t\tif (!all.__achievements_unlocked) all.__achievements_unlocked = {};\n\t\t\treturn all.__achievements_unlocked;\n\t\t}\n\n\t\tcreateAchievement(args) {\n\t\t\tconst id = String(args.ID || '');\n\t\t\tconst name = String(args.NAME || '');\n\t\t\tconst tag = String(args.TAG || '\u9ed8\u8ba4\u6807\u7b7e');\n\t\t\tif (!id) return;\n\t\t\tconst all = this._loadAll();\n\t\t\tconst meta = this._ensureAchievementMeta(all);\n\t\t\tif (!meta[tag]) meta[tag] = {};\n\t\t\tmeta[tag][id] = { name: name || id };\n\t\t\tthis._saveAll(all);\n\t\t}\n\n\t\tawardAchievement(args) {\n\t\t\tconst id = String(args.ID || '');\n\t\t\tconst tag = String(args.TAG || '\u9ed8\u8ba4\u6807\u7b7e');\n\t\t\tconst player = String(args.PLAYER || '\u73a9\u5bb6');\n\t\t\tconst name = String(args.NAME || '');\n\t\t\tif (!id) return;\n\t\t\tconst all = this._loadAll();\n\t\t\tconst meta = this._ensureAchievementMeta(all);\n\t\t\tif (!meta[tag]) meta[tag] = {};\n\t\t\tif (name) meta[tag][id] = { name: name };\n\t\t\tconst unlocked = this._ensureAchievementUnlocked(all);\n\t\t\tif (!unlocked[player]) unlocked[player] = {};\n\t\t\tif (!unlocked[player][tag]) unlocked[player][tag] = {};\n\t\t\tunlocked[player][tag][id] = { ts: Date.now() };\n\t\t\tthis._saveAll(all);\n\t\t\tconst display = String((args && args.DISPLAY) || '').toLowerCase();\n\t\t\tif (display === 'show') {\n\t\t\t\tconst displayName = (meta[tag] && meta[tag][id] && meta[tag][id].name) ? meta[tag][id].name : (name || id);\n\t\t\t\tthis._showDynamicHint('\ud83c\udfc6 ' + this._t('unlocked') + ': ' + displayName);\n\t\t\t}\n\t\t}\n\n\t\tisAchievementUnlocked(args) {\n\t\t\tconst id = String(args.ID || '');\n\t\t\tconst tag = String(args.TAG || '\u9ed8\u8ba4\u6807\u7b7e');\n\t\t\tconst player = String(args.PLAYER || '\u73a9\u5bb6');\n\t\t\tif (!id) return false;\n\t\t\tconst all = this._loadAll();\n\t\t\tconst unlocked = all.__achievements_unlocked || {};\n\t\t\treturn !!(unlocked[player] && unlocked[player][tag] && unlocked[player][tag][id]);\n\t\t}\n\n\t\t_ensureStyles() {\n\t\t\tif (this._stylesInjected || typeof document === 'undefined') {\n\t\t\t\tif (typeof document !== 'undefined' && document.getElementById && document.getElementById('turbo-leaderboard-styles')) {\n\t\t\t\t\tthis._stylesInjected = true;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst css = `\n\t\t\t\t#turbo-leaderboard-overlay {\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\tright: 12px;\n\t\t\t\t\ttop: 12px;\n\t\t\t\t\tmax-height: 70vh;\n\t\t\t\t\toverflow: auto;\n\t\t\t\t\tz-index: 999999;\n\t\t\t\t\tbackground: rgba(255,255,255,0.5);\n\t\t\t\t\tcolor: #111;\n\t\t\t\t\tpadding: 12px;\n\t\t\t\t\tborder-radius: 12px;\n\t\t\t\t\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\tmin-width: 300px;\n\t\t\t\t\tbox-shadow: 0 8px 24px rgba(0,0,0,0.12);\n\t\t\t\t\tbackdrop-filter: blur(4px);\n\t\t\t\t\tborder: 1px solid rgba(0,0,0,0.06);\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay .lb-title {\n\t\t\t\t\tdisplay:flex;\n\t\t\t\t\talign-items:center;\n\t\t\t\t\tjustify-content:space-between;\n\t\t\t\t\tgap:8px;\n\t\t\t\t\tmargin-bottom:8px;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay .lb-title .title-text {\n\t\t\t\t\tfont-weight:700;\n\t\t\t\t\tfont-size:14px;\n\t\t\t\t\tcolor: #222;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay .lb-controls button {\n\t\t\t\t\tbackground: rgba(0,0,0,0.04);\n\t\t\t\t\tborder: 1px solid rgba(0,0,0,0.06);\n\t\t\t\t\tcolor: #111;\n\t\t\t\t\tpadding:4px 8px;\n\t\t\t\t\tborder-radius:6px;\n\t\t\t\t\tcursor:pointer;\n\t\t\t\t\tfont-size:12px;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay table.lb-table {\n\t\t\t\t\twidth:100%;\n\t\t\t\t\tborder-collapse:collapse;\n\t\t\t\t\ttable-layout:fixed;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay table.lb-table th,\n\t\t\t\t#turbo-leaderboard-overlay table.lb-table td {\n\t\t\t\t\tpadding:6px 8px;\n\t\t\t\t\toverflow:hidden;\n\t\t\t\t\ttext-overflow:ellipsis;\n\t\t\t\t\twhite-space:nowrap;\n\t\t\t\t\tcolor: #111;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay table.lb-table th.rank,\n\t\t\t\t#turbo-leaderboard-overlay table.lb-table td.rank {\n\t\t\t\t\twidth:40px;\n\t\t\t\t\ttext-align:left;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay table.lb-table td.name {\n\t\t\t\t\ttext-align:left;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay table.lb-table td.score {\n\t\t\t\t\twidth:70px;\n\t\t\t\t\ttext-align:right;\n\t\t\t\t\tfont-weight:600;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay .lb-row:nth-child(odd){\n\t\t\t\t\tbackground: rgba(0,0,0,0.02);\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay .badge {\n\t\t\t\t\tdisplay:inline-block;\n\t\t\t\t\tmin-width:24px;\n\t\t\t\t\tpadding:2px 6px;\n\t\t\t\t\tborder-radius:12px;\n\t\t\t\t\tfont-weight:700;\n\t\t\t\t\tfont-size:12px;\n\t\t\t\t\ttext-align:center;\n\t\t\t\t\tmargin-right:6px;\n\t\t\t\t}\n\t\t\t\t#turbo-leaderboard-overlay .badge.gold{ background: linear-gradient(90deg,#ffd700,#ffdd66); color:#1b1b1b; }\n\t\t\t\t#turbo-leaderboard-overlay .badge.silver{ background: linear-gradient(90deg,#e6e6e6,#cfcfcf); color:#1b1b1b; }\n\t\t\t\t#turbo-leaderboard-overlay .badge.bronze{ background: linear-gradient(90deg,#cd7f32,#d99b6a); color:#fff; }\n\t\t\t\t#turbo-leaderboard-overlay .name-wrap { max-width: 140px; display:inline-block; vertical-align:middle; }\n\t\t\t\t#turbo-leaderboard-overlay .achv-unlocked { color: #2e7d32; font-weight:700; }\n\t\t\t\t#turbo-leaderboard-overlay .achv-locked { color: #7b7b7b; }\n\t\t\t`;\n\t\t\tconst style = document.createElement('style');\n\t\t\tstyle.id = 'turbo-leaderboard-styles';\n\t\t\tstyle.textContent = css;\n\t\t\tdocument.head.appendChild(style);\n\t\t\tthis._stylesInjected = true;\n\t\t}\n\n\t\t_createOverlay() {\n\t\t\tthis._ensureStyles();\n\t\t\tconst el = document.createElement('div');\n\t\t\tel.id = 'turbo-leaderboard-overlay';\n\t\t\tel.style.display = 'none';\n\n\t\t\tconst titleBar = document.createElement('div');\n\t\t\ttitleBar.className = 'lb-title';\n\t\t\tconst titleText = document.createElement('div');\n\t\t\ttitleText.className = 'title-text';\n\t\t\ttitleText.textContent = '';\n\t\t\ttitleBar.appendChild(titleText);\n\n\t\t\tconst controls = document.createElement('div');\n\t\t\tcontrols.className = 'lb-controls';\n\t\t\tconst refreshBtn = document.createElement('button');\n\t\t\trefreshBtn.textContent = '\ud83c\udfc6 ' + this._t('refresh');\n\t\t\trefreshBtn.onclick = () => {\n\t\t\t\tif (this._overlayMode === 'leaderboard' && this._overlayContext) this._showOverlay(this._overlayContext.board);\n\t\t\t\telse if (this._overlayMode === 'achievements' && this._overlayContext) this._showAchievements(this._overlayContext.tag, this._overlayContext.player);\n\t\t\t};\n\t\t\tconst closeBtn = document.createElement('button');\n\t\t\tcloseBtn.textContent = '\ud83c\udfc6 ' + this._t('close');\n\t\t\tcloseBtn.onclick = () => this._hideOverlay();\n\t\t\tcontrols.appendChild(refreshBtn);\n\t\t\tcontrols.appendChild(closeBtn);\n\t\t\ttitleBar.appendChild(controls);\n\t\t\tel.appendChild(titleBar);\n\n\t\t\tconst table = document.createElement('table');\n\t\t\ttable.className = 'lb-table';\n\t\t\tconst thead = document.createElement('thead');\n\t\t\tconst htr = document.createElement('tr');\n\t\t\tconst thRank = document.createElement('th'); thRank.className = 'rank'; thRank.textContent = '#';\n\t\t\tconst thName = document.createElement('th'); thName.textContent = '\ud83c\udfc6 ' + this._t('nameHeader');\n\t\t\tconst thRight = document.createElement('th'); thRight.className = 'score'; thRight.textContent = '';\n\t\t\thtr.appendChild(thRank); htr.appendChild(thName); htr.appendChild(thRight);\n\t\t\tthead.appendChild(htr);\n\t\t\ttable.appendChild(thead);\n\t\t\tconst tbody = document.createElement('tbody');\n\t\t\ttbody.className = 'lb-list';\n\t\t\ttable.appendChild(tbody);\n\t\t\tel.appendChild(table);\n\t\t\tel._titleText = titleText;\n\t\t\tel._theadRight = thRight;\n\t\t\tel._tbody = tbody;\n\t\t\treturn el;\n\t\t}\n\n\t\t_showOverlay(board) {\n\t\t\tconst all = this._loadAll();\n\t\t\tconst b = all[board] || {};\n\t\t\tconst arr = Object.keys(b).map(name => ({ name, score: Number(b[name].score), ts: Number(b[name].ts) }));\n\t\t\tarr.sort((a, c) => {\n\t\t\t\tif (c.score !== a.score) return c.score - a.score;\n\t\t\t\treturn a.ts - c.ts;\n\t\t\t});\n\t\t\tif (!this._overlayElement) {\n\t\t\t\tthis._overlayElement = this._createOverlay();\n\t\t\t\tdocument.body.appendChild(this._overlayElement);\n\t\t\t}\n\t\t\tthis._overlayMode = 'leaderboard';\n\t\t\tthis._overlayContext = { board };\n\t\t\tthis._overlayElement._titleText.textContent = '\ud83c\udfc6 ' + this._t('leaderboardTitle', { board });\n\t\t\tthis._overlayElement._theadRight.textContent = '\ud83c\udfc6 ' + this._t('scoreHeader');\n\t\t\tconst tbody = this._overlayElement._tbody;\n\t\t\ttbody.innerHTML = '';\n\t\t\tif (arr.length === 0) {\n\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\tconst td = document.createElement('td');\n\t\t\t\ttd.colSpan = 3;\n\t\t\t\ttd.style.opacity = '0.85';\n\t\t\t\ttd.textContent = '\ud83c\udfc6 ' + this._t('noData');\n\t\t\t\ttr.appendChild(td);\n\t\t\t\ttbody.appendChild(tr);\n\t\t\t} else {\n\t\t\t\tconst max = Math.min(50, arr.length);\n\t\t\t\tfor (let i = 0; i < max; i++) {\n\t\t\t\t\tconst it = arr[i];\n\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\ttr.className = 'lb-row';\n\t\t\t\t\tconst tdRank = document.createElement('td'); tdRank.className = 'rank';\n\t\t\t\t\tconst badge = document.createElement('span'); badge.className = 'badge';\n\t\t\t\t\tif (i === 0) badge.classList.add('gold'); else if (i === 1) badge.classList.add('silver'); else if (i === 2) badge.classList.add('bronze');\n\t\t\t\t\tbadge.textContent = (i + 1);\n\t\t\t\t\ttdRank.appendChild(badge);\n\t\t\t\t\ttr.appendChild(tdRank);\n\t\t\t\t\tconst tdName = document.createElement('td'); tdName.className = 'name';\n\t\t\t\t\tconst nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = it.name; nameWrap.textContent = it.name;\n\t\t\t\t\ttdName.appendChild(nameWrap);\n\t\t\t\t\ttr.appendChild(tdName);\n\t\t\t\t\tconst tdScore = document.createElement('td'); tdScore.className = 'score'; tdScore.textContent = String(it.score);\n\t\t\t\t\ttr.appendChild(tdScore);\n\t\t\t\t\ttbody.appendChild(tr);\n\t\t\t\t}\n\t\t\t\tif (arr.length > max) {\n\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\tconst td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.8';\n\t\t\t\t\ttd.textContent = '\ud83c\udfc6 ' + this._t('moreRecords', { n: arr.length - max });\n\t\t\t\t\ttr.appendChild(td);\n\t\t\t\t\ttbody.appendChild(tr);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._overlayElement.style.display = 'block';\n\t\t}\n\t\t\n\t\t_showAchievements(tag, player) {\n\t\t\tconst all = this._loadAll();\n\t\t\tconst meta = (all.__achievements_meta && all.__achievements_meta[tag]) ? all.__achievements_meta[tag] : {};\n\t\t\tconst unlockedForPlayer = (all.__achievements_unlocked && all.__achievements_unlocked[player] && all.__achievements_unlocked[player][tag]) ? all.__achievements_unlocked[player][tag] : {};\n\t\t\tif (!this._overlayElement) {\n\t\t\t\tthis._overlayElement = this._createOverlay();\n\t\t\t\tdocument.body.appendChild(this._overlayElement);\n\t\t\t}\n\t\t\tthis._overlayMode = 'achievements';\n\t\t\tthis._overlayContext = { tag, player };\n\t\t\tthis._overlayElement._titleText.textContent = '\ud83c\udfc6 ' + this._t('achievementsTitle', { tag, player });\n\t\t\tthis._overlayElement._theadRight.textContent = '';\n\t\t\tconst tbody = this._overlayElement._tbody;\n\t\t\ttbody.innerHTML = '';\n\t\t\tconst ids = Object.keys(meta);\n\t\t\tif (ids.length === 0) {\n\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\tconst td = document.createElement('td'); td.colSpan = 3; td.style.opacity = '0.85'; td.textContent = '\ud83c\udfc6 ' + this._t('noAchievements');\n\t\t\t\ttr.appendChild(td); tbody.appendChild(tr);\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\t\t\tconst id = ids[i];\n\t\t\t\t\tconst m = meta[id];\n\t\t\t\t\tconst tr = document.createElement('tr'); tr.className = 'lb-row';\n\t\t\t\t\tconst tdRank = document.createElement('td'); tdRank.className = 'rank'; tdRank.textContent = (i + 1) + '.';\n\t\t\t\t\ttr.appendChild(tdRank);\n\t\t\t\t\tconst tdName = document.createElement('td'); tdName.className = 'name';\n\t\t\t\t\tconst nameWrap = document.createElement('span'); nameWrap.className = 'name-wrap'; nameWrap.title = `${m.name} (${id})`; nameWrap.textContent = m.name;\n\t\t\t\t\ttdName.appendChild(nameWrap); tr.appendChild(tdName);\n\t\t\t\t\tconst tdState = document.createElement('td'); tdState.className = 'score';\n\t\t\t\t\tif (unlockedForPlayer && unlockedForPlayer[id]) {\n\t\t\t\t\t\ttdState.innerHTML = `<span class='achv-unlocked'>${'\ud83c\udfc6 ' + this._t('unlocked')}</span>`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttdState.innerHTML = `<span class='achv-locked'>${'\ud83c\udfc6 ' + this._t('locked')}</span>`;\n\t\t\t\t\t}\n\t\t\t\t\ttr.appendChild(tdState);\n\t\t\t\t\ttbody.appendChild(tr);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._overlayElement.style.display = 'block';\n\t\t}\n\n\t\t_hideOverlay() {\n\t\t\tif (this._overlayElement) {\n\t\t\t\tthis._overlayElement.style.display = 'none';\n\t\t\t\tthis._overlayMode = null;\n\t\t\t\tthis._overlayContext = null;\n\t\t\t}\n\t\t}\n\t\t_hideDocOverlay() {\n\t\t\ttry {\n\t\t\t\tconst el = (typeof document !== 'undefined') ? document.getElementById('turbo-doc-overlay') : null;\n\t\t\t\tif (el && el.parentNode) el.parentNode.removeChild(el);\n\t\t\t} catch (e) {}\n\t\t}\n\t\t_openUrl(url) {\n\t\t\tif (typeof window === 'undefined') return;\n\t\t\ttry {\n\t\t\t\tlet opened = null;\n\t\t\t\ttry { opened = window.open(url, '_blank', 'noopener'); } catch (e) { opened = null; }\n\t\t\t\tif (opened) { try { opened.opener = null; opened.focus && opened.focus(); } catch (e) {} return; }\n\t\t\t\ttry {\n\t\t\t\t\tif (window.top && window.top !== window) {\n\t\t\t\t\t\tlet to = null;\n\t\t\t\t\t\ttry { to = window.top.open(url, '_blank', 'noopener'); } catch (e) { to = null; }\n\t\t\t\t\t\tif (to) { try { to.opener = null; to.focus && to.focus(); } catch (e) {} return; }\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof document !== 'undefined') {\n\t\t\t\t\t\tconst a = document.createElement('a');\n\t\t\t\t\t\ta.href = url;\n\t\t\t\t\t\ta.target = '_blank';\n\t\t\t\t\t\ta.rel = 'noopener noreferrer';\n\t\t\t\t\t\ta.style.display = 'none';\n\t\t\t\t\t\tdocument.body.appendChild(a);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst evt = new MouseEvent('click', { bubbles: true, cancelable: true, view: window });\n\t\t\t\t\t\t\ta.dispatchEvent(evt);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\ttry { a.click(); } catch (e2) {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdocument.body.removeChild(a);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t\ttry { window.location.assign(url); } catch (e) {}\n\t\t\t} catch (e) {}\n\t\t}\n\t\t_showDynamicHint(msg) {\n\t\t\tif (typeof document === 'undefined') return;\n\t\t\ttry {\n\t\t\t\tif (!document.getElementById('turbo-achv-hint-styles')) {\n\t\t\t\t\tconst s = document.createElement('style');\n\t\t\t\t\ts.id = 'turbo-achv-hint-styles';\n\t\t\t\t\ts.textContent = '.turbo-achv-hint{position:fixed;left:50%;transform:translateX(-50%) translateY(-8px);top:12px;background:rgba(0,0,0,0.78);color:#fff;padding:8px 12px;border-radius:10px;font-family:'Helvetica Neue',Arial,sans-serif;font-size:13px;z-index:1000000;opacity:0;transition:opacity 0.28s ease,transform 0.28s ease;pointer-events:none;box-shadow:0 6px 18px rgba(0,0,0,0.2)}.turbo-achv-hint.show{opacity:1;transform:translateX(-50%) translateY(0)}';\n\t\t\t\t\tdocument.head.appendChild(s);\n\t\t\t\t}\n\t\t\t\tlet el = document.getElementById('turbo-achv-hint');\n\t\t\t\tif (!el) {\n\t\t\t\t\tel = document.createElement('div');\n\t\t\t\t\tel.id = 'turbo-achv-hint';\n\t\t\t\t\tel.className = 'turbo-achv-hint';\n\t\t\t\t\tdocument.body.appendChild(el);\n\t\t\t\t}\n\t\t\t\tel.textContent = String(msg || '');\n\t\t\t\tvoid el.offsetWidth;\n\t\t\t\tel.classList.add('show');\n\t\t\t\tif (el._timeout) clearTimeout(el._timeout);\n\t\t\t\tel._timeout = setTimeout(function () {\n\t\t\t\t\tel.classList.remove('show');\n\t\t\t\t}, 3000);\n\t\t\t} catch (e) {}\n\t\t}\n\t\ttoggleAchievementsDisplay(args) {\n\t\t\tconst toggle = String((args.TOGGLE || '')).toLowerCase();\n\t\t\tconst tag = String(args.TAG || '\u9ed8\u8ba4\u6807\u7b7e').trim();\n\t\t\tconst player = String(args.PLAYER || '\u73a9\u5bb6').trim();\n\t\t\tif (toggle === 'open') {\n\t\t\t\tthis._showAchievements(tag, player);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (toggle === 'close') {\n\t\t\t\tif (this._overlayElement && this._overlayMode === 'achievements') this._hideOverlay();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._overlayElement && this._overlayMode === 'achievements' && this._overlayContext && this._overlayContext.tag === tag && this._overlayContext.player === player) {\n\t\t\t\tthis._hideOverlay();\n\t\t\t} else {\n\t\t\t\tthis._showAchievements(tag, player);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (window && window.Scratch && window.Scratch.extensions && window.Scratch.extensions.register) {\n\t\twindow.Scratch.extensions.register(new Leaderboard());\n\t} else if (typeof window !== 'undefined') {\n\t\twindow.LeaderboardExtension = new Leaderboard();\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = Leaderboard;\n\t}\n})();\n\n\n```\u3002", "top": 0, "createdAt": 1766587549, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://assets.bgithub.xyz/favicons/favicon.svg", "createdDate": "2025-12-24", "dateLabelColor": "#0969da"}, "P2": {"htmlDir": "docs/post/xiang-qi-nao-de-deng-lu-zhu-ce.html", "labels": ["\u9002\u914dTurbowarp/02Engine", "\u8c61\u68cb\u8111\u5236\u4f5c"], "postTitle": "\u8c61\u68cb\u8111\u7684\u767b\u5f55\u6ce8\u518c", "postUrl": "post/xiang-qi-nao-de-deng-lu-zhu-ce.html", "postSourceUrl": "https://github.com/chess-brain/code/issues/2", "commentNum": 0, "wordCount": 3467, "description": "```js\n(function(Scratch) {\n    'use strict';\n\n    class LoginExtension {\n        constructor() {\n            this.users = {}; \n            this.ws = null;\n            this.isOnline = false; \n            this.connectToServer();\n        }\n\n        connectToServer() {\n            try {\n                this.ws = new WebSocket('ws://localhost:8080'); \n                this.ws.onopen = () => {\n                    this.isOnline = true;\n                    console.log('Connected to cloud server');\n                };\n                this.ws.onmessage = (event) => {\n                    const data = JSON.parse(event.data);\n                    if (data.type === 'sync') {\n                        this.users = data.users;\n                    }\n                };\n                this.ws.onclose = () => {\n                    this.isOnline = false;\n                    console.log('Disconnected from cloud server');\n                };\n                this.ws.onerror = () => {\n                    this.isOnline = false;\n                };\n            } catch (e) {\n                this.isOnline = false;\n            }\n        }\n\n        getInfo() {\n            return {\n                id: 'login',\n                name: '\u767b\u5f55\u6269\u5c55',\n                blocks: [\n                    {\n                        opcode: 'register',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u6ce8\u518c \u7528\u6237\u540d [username] \u5bc6\u7801 [password]',\n                        arguments: {\n                            username: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'user'\n                            },\n                            password: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'pass'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'login',\n                        blockType: Scratch.BlockType.BOOLEAN,\n                        text: '\u767b\u5f55 \u7528\u6237\u540d [username] \u5bc6\u7801 [password]',\n                        arguments: {\n                            username: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'user'\n                            },\n                            password: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'pass'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'isOnline',\n                        blockType: Scratch.BlockType.BOOLEAN,\n                        text: '\u662f\u5426\u5df2\u8054\u7f51'\n                    }\n                ]\n            };\n        }\n\n        register(args) {\n            const { username, password } = args;\n            if (this.users[username]) {\n                return; // \u7528\u6237\u5df2\u5b58\u5728\n            }\n            this.users[username] = password;\n            if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n                this.ws.send(JSON.stringify({ type: 'sync', users: this.users })); // \u540c\u6b65\u5230\u4e91\u7aef\n            }\n        }\n\n        login(args) {\n            const { username, password } = args;\n            return this.users[username] === password;\n        }\n\n        isOnline() {\n            return this.isOnline;\n        }\n    }\n\n    Scratch.extensions.register(new LoginExtension());\n})(Scratch);\n```\u3002", "top": 0, "createdAt": 1766671025, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://assets.bgithub.xyz/favicons/favicon.svg", "createdDate": "2025-12-25", "dateLabelColor": "#0969da"}}, "singeListJson": {}, "labelColorDict": {"Morgan\u5236\u4f5c": "#8ed697", "\u5b98\u65b9": "#66325c", "\u6587\u6863": "#ad5955", "\u672a\u8fdb\u884c\u9002\u914d\u6d4b\u8bd5": "#2d8ea8", "\u8c61\u68cb\u8111\u5236\u4f5c": "#a34ac6", "\u9002\u914dGandi IDE": "#6876f3", "\u9002\u914dTurbowarp/02Engine": "#1d12ad", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668": "#77e0d0"}, "displayTitle": "Blog Title", "faviconUrl": "https://assets.bgithub.xyz/favicons/favicon.svg", "ogImage": "https://assets.bgithub.xyz/favicons/favicon.svg", "homeUrl": "https://chess-brain.github.io/code", "prevUrl": "disabled", "nextUrl": "disabled"}